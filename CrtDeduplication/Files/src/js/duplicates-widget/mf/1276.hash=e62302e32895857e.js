(self.webpackChunkapp_studio_enterprise_duplicates_widget=self.webpackChunkapp_studio_enterprise_duplicates_widget||[]).push([[1276,3308,927,8546,6165,2832,451,8070,5689,4260,1879,1421,8895],{8895:(D,g,d)=>{d.r(g),d.d(g,{EntityStageDataTableSliderConverter:()=>i,EntityStageProgressBarColorMapperService:()=>n,EntityStageSchemaFilterService:()=>l});var v=d(73308),h=d(5960),s=d(38495),u=d(96590),f=d(59131);class n{constructor(){this._newPaletteColorsMap=[{oldColor:"#000000",newColor:"#181818"},{oldColor:"#999999",newColor:"#757575"},{oldColor:"#dfdfdf",newColor:"#D6D6D6"},{oldColor:"#ef7e63",newColor:"#E06F56"},{oldColor:"#c73920",newColor:"#D2310D"},{oldColor:"#eba793",newColor:"#E99886"},{oldColor:"#7f2910",newColor:"#B61303"},{oldColor:"#d1e9bd",newColor:"#85C280"},{oldColor:"#2c6018",newColor:"#035500"},{oldColor:"#64b8df",newColor:"#4D84E2"},{oldColor:"#3a8bb1",newColor:"#0058EF"},{oldColor:"#d4ebf6",newColor:"#80A7EB"},{oldColor:"#286581",newColor:"#0026BC"},{oldColor:"#6483c3",newColor:"#B87CCF"},{oldColor:"#46639f",newColor:"#7848EE"},{oldColor:"#d1dcf0",newColor:"#D6BEE3"},{oldColor:"#2b467e",newColor:"#4F43C2"},{oldColor:"#5bc8c4",newColor:"#95DBD1"},{oldColor:"#4ca6a3",newColor:"#00BFA5"},{oldColor:"#bfe8e7",newColor:"#D3F1ED"},{oldColor:"#327b78",newColor:"#009688"},{oldColor:"#f8d162",newColor:"#FFAC07"},{oldColor:"#d3ae46",newColor:"#FF8800"},{oldColor:"#fbe8b2",newColor:"#F9D68D"},{oldColor:"#a8882e",newColor:"#FF6534"},{oldColor:"#fbad43",newColor:"#FF795A"},{oldColor:"#cc8930",newColor:"#FF4013"},{oldColor:"#fdd6a1",newColor:"#FFA089"},{oldColor:"#a16a1f",newColor:"#FF1C06"},{oldColor:"#8e8eb7",newColor:"#566D83"},{oldColor:"#5e5684",newColor:"#0D2E4E"},{oldColor:"#e1deed",newColor:"#8697A7"},{oldColor:"#3c365b",newColor:"#031225"},{oldColor:"#309726",newColor:"#0B8500"},{oldColor:"#589928",newColor:"#0B8500"},{oldColor:"#8ecb60",newColor:"#0B8500"},{oldColor:"#8A8A8A",newColor:"#757575"},{oldColor:"#2669DC",newColor:"#0058EF"},{oldColor:"#314D69",newColor:"#0D2E4E"},{oldColor:"#D95031",newColor:"#D2310D"},{oldColor:"#54AA4D",newColor:"#0B8500"}],this._lightHoverPaletteColorsMap=[{color:"#0B8500",lightHover:"#85C280"}],this._darkHoverPaletteColorsMap=[{color:"#0B8500",darkHover:"#035500"}]}getStageColor(e){const r=this._newPaletteColorsMap.find(o=>o.oldColor===e)?.newColor;return r||e}getStageLightHover(e){return this._lightHoverPaletteColorsMap.find(o=>o.color===e)?.lightHover??(0,u.hexToRGBA)(e,.6)}getStageDarkHover(e){return this._darkHoverPaletteColorsMap.find(o=>o.color===e)?.darkHover??(0,u.hexToDarkerRGB)(e,.25)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=f.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}class l{getEntityStageSchemaByFilteredColumnValue(e,r){return e.find(o=>{if(!o.isActive||!o.isActiveVersion)return null;if(!o.filters)return o;const a=JSON.parse(o.filters),t=Object.values(a.items)[0];if(t.comparisonType===s.ComparisonType.Equal)return(t.rightExpressions||[]).map(c=>c?.parameter?.value?.value).filter(c=>!!c).includes(r)?o:null;if(t.comparisonType===s.ComparisonType.Is_null&&!r)return o})}static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275prov=f.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"})}}let i=class{convert(e,r,o){var a=this;return(0,v.A)(function*(){if(!o)return null;const t=yield a._getTargetDCMSchemaData(o.schemas,o.filterColumnAttributePath,r),p=o.schemasData.find(C=>C.name===t?.name);return a._getSliderCellModel(e,p)})()}_getTargetDCMSchemaData(e,r,o){return(0,v.A)(function*(){const a=new l,t=yield o[r];return a.getEntityStageSchemaByFilteredColumnValue(e,t?.value)})()}_getSliderCellModel(e,r){if(!r||!e)return{color:"",value:0};const o=r.stages.filter(C=>!C.parentStageUId);let a=o.find(C=>C.stageRecordId===e.value),t=o.indexOf(a);if(t===-1){const C=r.stages.find(c=>c.stageRecordId===e.value);C&&(t=o.findIndex(c=>c.uId===C.parentStageUId),a=C)}const p=(t+1)*100/o.length;return{color:a?.color,value:p}}};i=(0,h.__decorate)([(0,s.CrtConverter)({type:"crt.ToEntityStageDataTableSliderConverterAsync"})],i)},73308:(D,g,d)=>{d.d(g,{A:()=>h});function v(s,u,f,n,l,i,w){try{var e=s[i](w),r=e.value}catch(o){f(o);return}e.done?u(r):Promise.resolve(r).then(n,l)}function h(s){return function(){var u=this,f=arguments;return new Promise(function(n,l){var i=s.apply(u,f);function w(r){v(i,n,l,w,e,"next",r)}function e(r){v(i,n,l,w,e,"throw",r)}w(void 0)})}}}}]);
