(self.webpackChunkapp_studio_enterprise_duplicates_widget=self.webpackChunkapp_studio_enterprise_duplicates_widget||[]).push([[8895],{8895:(D,u,C)=>{C.r(u),C.d(u,{EntityStageDataTableSliderConverter:()=>f,EntityStageProgressBarColorMapperService:()=>i,EntityStageSchemaFilterService:()=>d});var w=C(73308),p=C(5960),c=C(38495),v=C(96590),g=C(59131);class i{constructor(){this._newPaletteColorsMap=[{oldColor:"#000000",newColor:"#181818"},{oldColor:"#999999",newColor:"#757575"},{oldColor:"#dfdfdf",newColor:"#D6D6D6"},{oldColor:"#ef7e63",newColor:"#E06F56"},{oldColor:"#c73920",newColor:"#D2310D"},{oldColor:"#eba793",newColor:"#E99886"},{oldColor:"#7f2910",newColor:"#B61303"},{oldColor:"#d1e9bd",newColor:"#85C280"},{oldColor:"#2c6018",newColor:"#035500"},{oldColor:"#64b8df",newColor:"#4D84E2"},{oldColor:"#3a8bb1",newColor:"#0058EF"},{oldColor:"#d4ebf6",newColor:"#80A7EB"},{oldColor:"#286581",newColor:"#0026BC"},{oldColor:"#6483c3",newColor:"#B87CCF"},{oldColor:"#46639f",newColor:"#7848EE"},{oldColor:"#d1dcf0",newColor:"#D6BEE3"},{oldColor:"#2b467e",newColor:"#4F43C2"},{oldColor:"#5bc8c4",newColor:"#95DBD1"},{oldColor:"#4ca6a3",newColor:"#00BFA5"},{oldColor:"#bfe8e7",newColor:"#D3F1ED"},{oldColor:"#327b78",newColor:"#009688"},{oldColor:"#f8d162",newColor:"#FFAC07"},{oldColor:"#d3ae46",newColor:"#FF8800"},{oldColor:"#fbe8b2",newColor:"#F9D68D"},{oldColor:"#a8882e",newColor:"#FF6534"},{oldColor:"#fbad43",newColor:"#FF795A"},{oldColor:"#cc8930",newColor:"#FF4013"},{oldColor:"#fdd6a1",newColor:"#FFA089"},{oldColor:"#a16a1f",newColor:"#FF1C06"},{oldColor:"#8e8eb7",newColor:"#566D83"},{oldColor:"#5e5684",newColor:"#0D2E4E"},{oldColor:"#e1deed",newColor:"#8697A7"},{oldColor:"#3c365b",newColor:"#031225"},{oldColor:"#309726",newColor:"#0B8500"},{oldColor:"#589928",newColor:"#0B8500"},{oldColor:"#8ecb60",newColor:"#0B8500"},{oldColor:"#8A8A8A",newColor:"#757575"},{oldColor:"#2669DC",newColor:"#0058EF"},{oldColor:"#314D69",newColor:"#0D2E4E"},{oldColor:"#D95031",newColor:"#D2310D"},{oldColor:"#54AA4D",newColor:"#0B8500"}],this._lightHoverPaletteColorsMap=[{color:"#0B8500",lightHover:"#85C280"}],this._darkHoverPaletteColorsMap=[{color:"#0B8500",darkHover:"#035500"}]}getStageColor(e){const l=this._newPaletteColorsMap.find(o=>o.oldColor===e)?.newColor;return l||e}getStageLightHover(e){return this._lightHoverPaletteColorsMap.find(o=>o.color===e)?.lightHover??(0,v.hexToRGBA)(e,.6)}getStageDarkHover(e){return this._darkHoverPaletteColorsMap.find(o=>o.color===e)?.darkHover??(0,v.hexToDarkerRGB)(e,.25)}static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275prov=g.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}}class d{getEntityStageSchemaByFilteredColumnValue(e,l){return e.find(o=>{if(!o.isActive||!o.isActiveVersion)return null;if(!o.filters)return o;const t=JSON.parse(o.filters),r=Object.values(t.items)[0];if(r.comparisonType===c.ComparisonType.Equal)return(r.rightExpressions||[]).map(a=>a?.parameter?.value?.value).filter(a=>!!a).includes(l)?o:null;if(r.comparisonType===c.ComparisonType.Is_null&&!l)return o})}static{this.\u0275fac=function(l){return new(l||d)}}static{this.\u0275prov=g.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"})}}let f=class{convert(e,l,o){var t=this;return(0,w.A)(function*(){if(!o)return null;const r=yield t._getTargetDCMSchemaData(o.schemas,o.filterColumnAttributePath,l),s=o.schemasData.find(n=>n.name===r?.name);return t._getSliderCellModel(e,s)})()}_getTargetDCMSchemaData(e,l,o){return(0,w.A)(function*(){const t=new d,r=yield o[l];return t.getEntityStageSchemaByFilteredColumnValue(e,r?.value)})()}_getSliderCellModel(e,l){if(!l||!e)return{color:"",value:0};const o=l.stages.filter(n=>!n.parentStageUId);let t=o.find(n=>n.stageRecordId===e.value),r=o.indexOf(t);if(r===-1){const n=l.stages.find(a=>a.stageRecordId===e.value);n&&(r=o.findIndex(a=>a.uId===n.parentStageUId),t=n)}const s=(r+1)*100/o.length;return{color:t?.color,value:s}}};f=(0,p.__decorate)([(0,c.CrtConverter)({type:"crt.ToEntityStageDataTableSliderConverterAsync"})],f)}}]);
