(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[96429,73308,50927,28546,6165,62832,40451,18070,95689,94260,71879,41421,63802,86183,8564,30945,53326,75707,98088,20469,42850,70422,48041,15184,92803,80898,58517,25660,3279,91374,68993,83231,5612,38469],{96429:(L,J,a)=>{a.r(J),a.d(J,{BaseImageListItemCustomEventEnum:()=>q,CrtBaseEditInputComponent:()=>d,CrtBaseImageListBaseItemComponent:()=>F,CrtBaseImageListBaseItemWrapperComponent:()=>P,CrtBaseImageListComponent:()=>U,CrtBaseImageListDefaultItemComponent:()=>K,CrtBaseImageListDefaultItemImageComponent:()=>N,CrtBaseImageListItemWrapperComponent:()=>k,CrtBaseImageListModule:()=>W,CrtNestedTreeNode:()=>y,CrtTextareaAutosizeDirective:()=>Q,CrtTextareaAutosizeModule:()=>Z,CrtTreeNodeToggle:()=>M,CrtTreeViewComponent:()=>S,CrtTreeViewModule:()=>R,CrtTreeViewNodeComponent:()=>V,CrtTreeViewNodeDef:()=>E,CrtTreeViewNodeOutletDirective:()=>w,CrtVirtualScrollTreeViewComponent:()=>$,CrtVirtualScrollTreeViewItemOutletDirective:()=>B,CrtVirtualScrollTreeViewModule:()=>G,CrtVirtualScrollViewItemDirective:()=>f,CrtVirtualScrollViewOutletDirective:()=>T,CrtVirtualScrollViewportComponent:()=>A,CrtVirtualScrollViewportModule:()=>z,DISABLE_DEFAULT_COMPONENT_LOADER_VISIBILITY_DELAY_NAME:()=>ie,defaultComponentLoaderVisibilityDelayProvider:()=>we,getItemKeyPropertyValueByConfig:()=>X});var o=a(5960),i=a(59131),v=a(56711),m=a(38495),g=a(47742),D=a(21018),l=a(62278),C=a(36486);class d extends g.CrtBaseComponent{get _isResponsible(){return this.displayLabelPosition==="auto"}set placeholder(e){this._placeholder=e}get placeholder(){return this._placeholder}set disabled(e){this._disabled=!!e,this.control&&this._setDisabledState()}get skeletonStyles(){return{height:this._displayLabelPosition==="above"?"52px":"32px"}}set control(e){e??=new v.FormControl(this.defaultValue),this.controlDestroyed$.next(),this._control=e,this._setDisabledState(),this._calculateRequired(),this._updateOnControlStatusChanged()}get control(){return this._control}set labelPosition(e){this._initialLabelPosition=e||"auto",this.isAutoLabelPosition=this._initialLabelPosition==="auto",this._initLabelPosition()}get labelPosition(){return this._initialLabelPosition}get invalid(){return this.control.invalid&&(this.control.dirty||this.control.touched)}get displayLabelPosition(){return this.containerQueryMechanismAvailable?this._initialLabelPosition:this._displayLabelPosition}get containerQueryMechanismAvailable(){return!this.disableContainerQueryMechanism}constructor(e,t,n){super(e),this.defaultValue=t,this.changeDetectorRef=n,this._initialLabelPosition="auto",this._placeholder="",this.destroyed$=new l.Subject,this.controlDestroyed$=new l.Subject,this.disableContainerQueryMechanism=!1,this.isAutoLabelPosition=!0,this._baseClass="crt-base-edit-input",this.keyUp=new i.EventEmitter,this.keyDown=new i.EventEmitter,this.blurred=new i.EventEmitter,this.focused=new i.EventEmitter,this.label="",this.ariaLabel="",this.appearance="legacy",this.labelOverModeResponsiveSize=320,this.required=!1,this.inputId=(0,m.generateGuid)(),this._initControl(t),this.disableContainerQueryMechanism=e.get(D.FEATURE_VALUES,null,{optional:!0})?.DisableContainerQueryMechanism,this._measurePerformanceService=e.get(D.MeasurePerformanceService)}_getDisplayLabelPosition(e){return this._initialLabelPosition==null||this._initialLabelPosition==="auto"?(e??=this.elementRef?.nativeElement?.getBoundingClientRect()?.width,e>this.labelOverModeResponsiveSize?"left":"above"):this._initialLabelPosition}_initLabelPosition(){this.containerQueryMechanismAvailable||this._measurePerformanceService.measure("_getDisplayLabelPosition",()=>{this._displayLabelPosition=this._getDisplayLabelPosition()})}_calculateRequired(){const e=this.control?.validator,t=e&&e(new v.FormControl(this.defaultValue));this.required=!!t?.required}_initControl(e){this.control=new v.FormControl(e)}_updateOnControlStatusChanged(){this._control.statusChanges.pipe((0,C.takeUntil)(this.controlDestroyed$),(0,C.observeOn)(l.asapScheduler)).subscribe(()=>{this._calculateRequired(),this.changeDetectorRef.detectChanges()})}_setDisabledState(){this._disabled!==void 0&&this.control.disabled!==this._disabled&&(this._disabled?this.control.disable():this.control.enable())}ngAfterViewInit(){this.isAutoLabelPosition!==!1&&(this._initLabelPosition(),this.changeDetectorRef.detectChanges())}ngOnDestroy(){this.controlDestroyed$.next(),this.controlDestroyed$.complete(),this.destroyed$.next(),this.destroyed$.complete()}onResized(e){this.containerQueryMechanismAvailable||(this._displayLabelPosition=this._getDisplayLabelPosition(e?.width))}static{this.\u0275fac=function(t){i.\u0275\u0275invalidFactory()}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:d,hostVars:4,hostBindings:function(t,n){t&2&&(i.\u0275\u0275classMap(n._baseClass),i.\u0275\u0275classProp("crt-base-edit-input-responsible",n._isResponsible))},inputs:{label:"label",ariaLabel:"ariaLabel",appearance:"appearance",placeholder:"placeholder",disabled:"disabled",tooltip:"tooltip",control:"control",labelPosition:"labelPosition"},outputs:{keyUp:"keyUp",keyDown:"keyDown",blurred:"blurred",focused:"focused"},features:[i.\u0275\u0275InheritDefinitionFeature]})}}(0,o.__decorate)([(0,m.CrtOutput)(),(0,o.__metadata)("design:type",Object)],d.prototype,"keyUp",void 0),(0,o.__decorate)([(0,m.CrtOutput)(),(0,o.__metadata)("design:type",Object)],d.prototype,"keyDown",void 0),(0,o.__decorate)([(0,m.CrtOutput)(),(0,o.__metadata)("design:type",Object)],d.prototype,"blurred",void 0),(0,o.__decorate)([(0,m.CrtOutput)(),(0,o.__metadata)("design:type",Object)],d.prototype,"focused",void 0),(0,o.__decorate)([(0,m.CrtInput)(),(0,o.__metadata)("design:type",Object)],d.prototype,"label",void 0),(0,o.__decorate)([(0,m.CrtInput)(),(0,o.__metadata)("design:type",Object)],d.prototype,"ariaLabel",void 0),(0,o.__decorate)([(0,m.CrtInput)(),(0,o.__metadata)("design:type",String)],d.prototype,"appearance",void 0),(0,o.__decorate)([(0,m.CrtInput)(),(0,o.__metadata)("design:type",String),(0,o.__metadata)("design:paramtypes",[String])],d.prototype,"placeholder",null),(0,o.__decorate)([(0,m.CrtInput)({propertyBindable:!0,defaultValue:!1,propertyName:m.ViewElementProperty.Disabled}),(0,o.__metadata)("design:type",Boolean),(0,o.__metadata)("design:paramtypes",[Boolean])],d.prototype,"disabled",null),(0,o.__decorate)([(0,m.CrtInput)(),(0,o.__metadata)("design:type",String)],d.prototype,"tooltip",void 0),(0,o.__decorate)([(0,m.CrtInput)(),(0,o.__metadata)("design:type",v.FormControl),(0,o.__metadata)("design:paramtypes",[v.FormControl])],d.prototype,"control",null),(0,o.__decorate)([(0,m.CrtInput)(),(0,o.__metadata)("design:type",Object),(0,o.__metadata)("design:paramtypes",[Object])],d.prototype,"labelPosition",null);var I=a(10850);function x(r){const e=r?.itemKeyProperty||"id";return(r?.templateValuesMapping||{})[e]||e}function X(r,e){const t=x(e);return r instanceof I.BaseViewModel?r?.attributes&&r.attributes[t]:r&&r[t]}class U extends g.CrtBaseComponent{get dataItems(){return this._items}set items(e){if(e instanceof I.BaseViewModelCollection){this.initializeDataItemsFromCollection(e);return}this._items=e}constructor(e){super(e),this.injector=e,this.itemConfig={}}initializeDataItemsFromCollection(e){this._itemsChangeSubscription$?.unsubscribe(),this._itemsChangeSubscription$=e.changed.subscribe(()=>this.initializeDataItemsFromCollection(e)),this._items=e}ngOnDestroy(){this._itemsChangeSubscription$?.unsubscribe()}getItemKeyPropertyValue(e){return X(e,this.itemConfig)}hasData(){return!!this.dataItems?.length}static{this.\u0275fac=function(t){return new(t||U)(i.\u0275\u0275directiveInject(i.Injector))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:U,inputs:{items:"items",itemConfig:"itemConfig"},features:[i.\u0275\u0275InheritDefinitionFeature]})}}(0,o.__decorate)([(0,m.CrtInput)(),(0,o.__metadata)("design:type",Object),(0,o.__metadata)("design:paramtypes",[Object])],U.prototype,"items",null),(0,o.__decorate)([(0,m.CrtInput)(),(0,o.__metadata)("design:type",Object)],U.prototype,"itemConfig",void 0);var re=a(71252),q;(function(r){r.KeyEnterPressed="KeyEnterPressed",r.CaptionClick="CaptionClick",r.ItemFocused="ItemFocused"})(q||(q={}));class F extends g.CrtBaseComponent{set itemConfig(e){this._itemConfig=e,this.handleItemConfigChanged(e)}get itemConfig(){return this._itemConfig}set tileSizeClasses(e){this._tileSizeClasses=e}get tileSizeClasses(){return this._tileSizeClasses}constructor(e){super(e),this.injector=e,this.elementRef=this.injector.get(i.ElementRef),this.sanitizer=this.injector.get(re.DomSanitizer)}getImageValue(e){return typeof e=="string"?e:e?.url}getDefaultImage(){return this.itemConfig?.defaultImage}createImageResource(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}getRecordMappingKey(e){return(this.itemConfig?.templateValuesMapping||{})[e]}handleItemConfigChanged(e){}dispatchCustomEvent(e,t){const n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});this.elementRef.nativeElement.dispatchEvent(n)}onCaptionClick(){this.dispatchCustomEvent("itemEvent",q.CaptionClick)}getRecordValue(e){let t=this.record instanceof I.BaseViewModel?this.record.attributes:this.record;t=t||{};const n=this.getRecordMappingKey(e)||e;return t[n]}static{this.\u0275fac=function(t){return new(t||F)(i.\u0275\u0275directiveInject(i.Injector))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:F,inputs:{record:"record",itemConfig:"itemConfig",isSelected:"isSelected",tileSizeClasses:"tileSizeClasses"},features:[i.\u0275\u0275InheritDefinitionFeature]})}}(0,o.__decorate)([(0,m.CrtInput)(),(0,o.__metadata)("design:type",Object)],F.prototype,"record",void 0),(0,o.__decorate)([(0,m.CrtInput)(),(0,o.__metadata)("design:type",Boolean)],F.prototype,"isSelected",void 0),(0,o.__decorate)([(0,m.CrtInput)(),(0,o.__metadata)("design:type",Array),(0,o.__metadata)("design:paramtypes",[Array])],F.prototype,"tileSizeClasses",null);class P{set itemConfig(e){this._itemConfig=e,this.handleItemConfigChanged(e)}get itemConfig(){return this._itemConfig}handleItemConfigChanged(e){}static{this.\u0275fac=function(t){return new(t||P)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:P,selectors:[["crt-base-image-list-base-item-wrapper"]],inputs:{record:"record",itemConfig:"itemConfig"},decls:0,vars:0,template:function(t,n){},encapsulation:2})}}var u=a(40297);class N{static{this.\u0275fac=function(t){return new(t||N)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:N,selectors:[["crt-base-image-list-default-item-image"]],decls:2,vars:0,consts:[[1,"crt-base-image-list-default-item-image-wrapper"],[1,"crt-base-image-list-default-item-image-icon"]],template:function(t,n){t&1&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275element(1,"div",1),i.\u0275\u0275elementEnd())},styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .crt-base-image-list-default-item-image-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%;background:linear-gradient(to right,#1818180d,#18181800)}[_nghost-%COMP%]   .crt-base-image-list-default-item-image-wrapper[_ngcontent-%COMP%]   .crt-base-image-list-default-item-image-icon[_ngcontent-%COMP%]{background-size:cover;width:48px;height:48px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzMiIHZpZXdCb3g9IjAgMCAzMiAzMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aA0KICAgICAgICBkPSJNMTUuOTkyMiAyMkMxOC40Nzc1IDIyIDIwLjQ5MjIgMTkuOTg1MyAyMC40OTIyIDE3LjVDMjAuNDkyMiAxNS4wMTQ3IDE4LjQ3NzUgMTMgMTUuOTkyMiAxM0MxMy41MDY5IDEzIDExLjQ5MjIgMTUuMDE0NyAxMS40OTIyIDE3LjVDMTEuNDkyMiAxOS45ODUzIDEzLjUwNjkgMjIgMTUuOTkyMiAyMloiDQogICAgICAgIGZpbGw9IiNENkQ2RDYiIC8+DQogICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiDQogICAgICAgIGQ9Ik0xMC41NDQyIDYuODY3NTRDMTAuODE2NCA2LjA1MDg2IDExLjU4MDcgNS41IDEyLjQ0MTUgNS41SDE5LjU1ODVDMjAuNDE5MyA1LjUgMjEuMTgzNiA2LjA1MDg2IDIxLjQ1NTggNi44Njc1NEwyMiA4LjVIMjVDMjYuNjU2OSA4LjUgMjggOS44NDMxNSAyOCAxMS41VjIzLjVDMjggMjUuMTU2OSAyNi42NTY5IDI2LjUgMjUgMjYuNUg3QzUuMzQzMTUgMjYuNSA0IDI1LjE1NjkgNCAyMy41VjExLjVDNCA5Ljg0MzE1IDUuMzQzMTUgOC41IDcgOC41SDEwTDEwLjU0NDIgNi44Njc1NFpNMTUuOTkyMiAyNEMxOS41ODIgMjQgMjIuNDkyMiAyMS4wODk5IDIyLjQ5MjIgMTcuNUMyMi40OTIyIDEzLjkxMDEgMTkuNTgyIDExIDE1Ljk5MjIgMTFDMTIuNDAyMyAxMSA5LjQ5MjE5IDEzLjkxMDEgOS40OTIxOSAxNy41QzkuNDkyMTkgMjEuMDg5OSAxMi40MDIzIDI0IDE1Ljk5MjIgMjRaTTIzIDEyLjAwNDlDMjMgMTIuODMzMyAyMy42NzE2IDEzLjUwNDkgMjQuNSAxMy41MDQ5QzI1LjMyODQgMTMuNTA0OSAyNiAxMi44MzMzIDI2IDEyLjAwNDlDMjYgMTEuMTc2NSAyNS4zMjg0IDEwLjUwNDkgMjQuNSAxMC41MDQ5QzIzLjY3MTYgMTAuNTA0OSAyMyAxMS4xNzY1IDIzIDEyLjAwNDlaIg0KICAgICAgICBmaWxsPSIjRDZENkQ2IiAvPg0KPC9zdmc+)}"]})}}const oe=["captionContent"],ae=[[["","header",""]],[["","footer",""]],[["","caption",""]]],le=["[header]","[footer]","[caption]"],ce=r=>({"crt-base-image-list-selected-item":r});function me(r,e){if(r&1&&i.\u0275\u0275element(0,"crt-skeleton-loader",3),r&2){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("styles",t.skeletonStyles)}}function de(r,e){if(r&1&&i.\u0275\u0275element(0,"img",12),r&2){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("src",t.getImageSource(),i.\u0275\u0275sanitizeUrl)("alt",t.getRecordValue("caption"))}}function ue(r,e){r&1&&i.\u0275\u0275element(0,"crt-base-image-list-default-item-image")}function he(r,e){r&1&&i.\u0275\u0275elementContainer(0)}function pe(r,e){if(r&1&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementContainer(1,13),i.\u0275\u0275elementContainerEnd()),r&2){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(),i.\u0275\u0275property("crtViewElement",t.itemConfig.captionViewConfig)("crtViewModel",t.record)}}function ge(r,e){if(r&1){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"label",17),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(t);const s=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(s.onCaptionClick())}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(r&2){const t=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",t.getRecordValue("caption")," ")}}function _e(r,e){if(r&1&&(i.\u0275\u0275elementStart(0,"div",15)(1,"div",null,1),i.\u0275\u0275projection(3,2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,ge,2,1,"label",16),i.\u0275\u0275elementEnd()),r&2){const t=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.isValueNotNullOrEmpty(t.getRecordValue("caption"))&&!t.hasCustomCaptionContent)}}function Ie(r,e){if(r&1&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,_e,5,1,"div",14),i.\u0275\u0275elementContainerEnd()),r&2){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",t.isValueNotNullOrEmpty(t.getRecordValue("caption"))||t.hasCustomCaptionContent)}}function fe(r,e){if(r&1&&(i.\u0275\u0275elementStart(0,"div",18),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),r&2){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",t.getRecordValue("description")," ")}}function Ce(r,e){if(r&1&&(i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275projection(1),i.\u0275\u0275elementStart(2,"div",5),i.\u0275\u0275template(3,de,1,2,"img",6)(4,ue,1,0,"crt-base-image-list-default-item-image",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",8)(6,"div",9),i.\u0275\u0275template(7,he,1,0,"ng-container",10)(8,pe,2,2,"ng-container",7)(9,Ie,2,1,"ng-container",7)(10,fe,2,1,"div",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275projection(11,1),i.\u0275\u0275elementEnd()()),r&2){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(9,ce,t.isSelected)),i.\u0275\u0275attribute("aria-label",t.getRecordValue("caption")),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngClass",t.tileSizeClasses),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",t.hasImageOrDefaultImage()),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",!t.hasImageOrDefaultImage()),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngTemplateOutlet",t.dynamicTemplate),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",t.itemConfig==null?null:t.itemConfig.captionViewConfig),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",!(t.itemConfig!=null&&t.itemConfig.captionViewConfig)),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",t.isValueNotNullOrEmpty(t.getRecordValue("description")))}}class K extends F{constructor(e){super(e),this.injector=e,this.skeletonStyles={height:"36px",width:"120px"}}getRecordImage(){return this.getImageValue(this.getRecordValue("image"))}getDefaultImage(){return this.itemConfig?.defaultImage}ngAfterViewInit(){this.hasCustomCaptionContent=this.captionContent?.nativeElement?.childNodes.length>0,this.detectChanges()}isValueNotNullOrEmpty(e){return e?.length>0}hasImage(){return this.getRecordImage()?.length>0}hasImageOrDefaultImage(){return this.hasImage()||!!this.getDefaultImage()}getImageSource(){const e=this.hasImage()?this.getRecordImage():this.getDefaultImage();return this.createImageResource(e)}static{this.\u0275fac=function(t){return new(t||K)(i.\u0275\u0275directiveInject(i.Injector))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:K,selectors:[["crt-base-image-list-default-item"]],viewQuery:function(t,n){if(t&1&&i.\u0275\u0275viewQuery(oe,5),t&2){let s;i.\u0275\u0275queryRefresh(s=i.\u0275\u0275loadQuery())&&(n.captionContent=s.first)}},inputs:{dynamicTemplate:"dynamicTemplate"},features:[i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:le,decls:3,vars:2,consts:[["baseImageListDefaultItem",""],["captionContent",""],[3,"styles",4,"ngIf","ngIfElse"],[3,"styles"],[1,"crt-base-image-list-item","crt-base-image-list-item-content-wrap",3,"ngClass"],[1,"crt-base-image-list-item-image-wrap",3,"ngClass"],[3,"src","alt",4,"ngIf"],[4,"ngIf"],[1,"crt-base-image-list-item-template-wrap"],[1,"crt-base-image-list-item-info"],[4,"ngTemplateOutlet"],["class","crt-base-image-list-item-description",4,"ngIf"],[3,"src","alt"],[3,"crtViewElement","crtViewModel"],["class","crt-base-image-list-item-caption",4,"ngIf"],[1,"crt-base-image-list-item-caption"],[3,"click",4,"ngIf"],[3,"click"],[1,"crt-base-image-list-item-description"]],template:function(t,n){if(t&1&&(i.\u0275\u0275projectionDef(ae),i.\u0275\u0275template(0,me,1,1,"crt-skeleton-loader",2)(1,Ce,12,11,"ng-template",null,0,i.\u0275\u0275templateRefExtractor)),t&2){const s=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",n.loading)("ngIfElse",s)}},dependencies:[u.NgClass,u.NgIf,u.NgTemplateOutlet,g.ViewModelDirective,g.ViewElementDirective,N],styles:["[_nghost-%COMP%]{min-width:144px;height:100%;display:flex;width:100%}[_nghost-%COMP%]:focus, [_nghost-%COMP%]:focus-visible{outline:none}.crt-base-image-list-item-content-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;padding:12px 12px 16px;border-radius:8px;position:relative}.crt-base-image-list-item-content-wrap[_ngcontent-%COMP%]   .crt-base-image-list-item-image-wrap[_ngcontent-%COMP%]{width:100%;display:flex;border-width:1px;border-style:solid;border-radius:8px;box-sizing:border-box;overflow:hidden}.crt-base-image-list-item-content-wrap[_ngcontent-%COMP%]   .crt-base-image-list-item-image-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:contain;margin:auto}.crt-base-image-list-item-content-wrap[_ngcontent-%COMP%]   .crt-base-image-list-item-template-wrap[_ngcontent-%COMP%]{display:flex}.crt-base-image-list-item-content-wrap[_ngcontent-%COMP%]   .crt-base-image-list-item-template-wrap[_ngcontent-%COMP%]   .crt-base-image-list-item-info[_ngcontent-%COMP%]{width:100%;box-sizing:border-box}.crt-base-image-list-item-content-wrap[_ngcontent-%COMP%]   .crt-base-image-list-item-template-wrap[_ngcontent-%COMP%]   .crt-base-image-list-item-info[_ngcontent-%COMP%]   .crt-base-image-list-item-caption[_ngcontent-%COMP%]{margin-bottom:8px;overflow:hidden;-webkit-box-orient:vertical;display:-webkit-box;-webkit-line-clamp:1}.crt-base-image-list-item-content-wrap[_ngcontent-%COMP%]   .crt-base-image-list-item-template-wrap[_ngcontent-%COMP%]   .crt-base-image-list-item-info[_ngcontent-%COMP%]   .crt-base-image-list-item-description[_ngcontent-%COMP%]{overflow:hidden;-webkit-box-orient:vertical;display:-webkit-box;-webkit-line-clamp:3;word-break:break-word}"]})}}var p=a(28399);const ye=["baseImageListItem"];class k extends P{set itemStyles(e){this._itemStyles!==e&&(this._itemStyles=e,this._initializeItemElementStyles(),this._oldItemStyles=e)}get itemStyles(){return this._itemStyles}set itemClasses(e){this._itemClasses!==e&&(this._itemClasses=e,this._initializeItemElementClasses())}get itemClasses(){return this._itemClasses}set isSelected(e){this._isSelected=e,this._setIsSelectedProperty(e)}get isSelected(){return this._isSelected}constructor(e){super(),this.render=e,this._itemEventsUnListens=[],this._itemWrapperSelector="base-image-list-item-outer-wrap",this.itemClick=new i.EventEmitter,this.itemDblClick=new i.EventEmitter}getItemComponentNativeElement(){return this.itemComponentRef?.location.nativeElement}_setIsSelectedProperty(e){const t=this.itemComponentRef?.instance;t&&(t.isSelected=e)}_initializeItemComponentRef(){const e=this.getItemComponentClass();this.itemComponentRef=this._generateItemComponentRef(e)}_generateItemComponentRef(e){if(this._clearItemViewContainerRef(),!!e)return this.itemViewContainerRef.createComponent(e)}initializeItemComponentProperties(){const e=this.itemComponentRef?.instance;e&&(e.record=this.record,e.itemConfig=this.itemConfig,e.isSelected=this.isSelected)}_initializeItemElementClasses(){this.getItemComponentNativeElement()&&(0,p.forOwn)(this.itemClasses,(t,n)=>this._toggleItemElementClass(n,t))}_initializeItemElementStyles(){const e=this.getItemComponentNativeElement();e&&((0,p.forOwn)(this._oldItemStyles,(t,n)=>this.render.removeStyle(e,n)),(0,p.forOwn)(this.itemStyles,(t,n)=>this.render.setStyle(e,n,t)))}_initializeItemComponentEvents(){const e=this.getItemComponentNativeElement();if(!e)return;const t=this.record;this._itemEventsUnListens.push(...this.getEventListeners(e,t))}getEventListeners(e,t){return[this.render.listen(e,"click",n=>this.itemClick.emit({event:n,item:t})),this.render.listen(e,"dblclick",n=>this.itemDblClick.emit({event:n,item:t}))]}_toggleItemElementClass(e,t){const n=this.getItemComponentNativeElement();n&&(t?this.render.addClass(n,e):this.render.removeClass(n,e))}_clearItemViewContainerRef(){this.itemViewContainerRef.clear()}_destroyItemComponentRef(){this.itemComponentRef&&(this.itemComponentRef.destroy(),this.itemComponentRef=null)}_destroyItemEventListeners(){this._itemEventsUnListens.forEach(e=>e()),this._itemEventsUnListens=[]}initializeItem(){this._initializeItemComponentRef(),this._initializeItemElementClasses(),this.initializeItemElementDefaultClasses(),this._initializeItemElementStyles(),this.initializeItemComponentProperties(),this._initializeItemComponentEvents()}initializeItemElementDefaultClasses(){this._toggleItemElementClass(this._itemWrapperSelector,!0)}handleItemConfigChanged(e){const t=this.itemComponentRef?.instance;t&&(t.itemConfig=e)}getItemComponentClass(){return this.itemConfig?.componentClassFactory?.(this.record)}ngOnInit(){this.initializeItem()}ngOnDestroy(){this._destroyItemComponentRef(),this._clearItemViewContainerRef(),this._destroyItemEventListeners()}static{this.\u0275fac=function(t){return new(t||k)(i.\u0275\u0275directiveInject(i.Renderer2))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:k,selectors:[["crt-base-item-list-item-wrapper"]],viewQuery:function(t,n){if(t&1&&i.\u0275\u0275viewQuery(ye,7,i.ViewContainerRef),t&2){let s;i.\u0275\u0275queryRefresh(s=i.\u0275\u0275loadQuery())&&(n.itemViewContainerRef=s.first)}},inputs:{itemStyles:"itemStyles",itemClasses:"itemClasses",isSelected:"isSelected"},outputs:{itemClick:"itemClick",itemDblClick:"itemDblClick"},features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,consts:[["baseImageListItem",""]],template:function(t,n){t&1&&i.\u0275\u0275elementContainer(0,null,0)},encapsulation:2,changeDetection:0})}}var j=a(59564);const Le=[P,K,N,k];class W{constructor(e){this._materialIconsRegistrator=e,this._materialIconsRegistrator.addIcons([{name:"base-image-list-default-item-image",icon:a(39935)}])}static{this.\u0275fac=function(t){return new(t||W)(i.\u0275\u0275inject(j.MaterialIconsRegistrator))}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:W})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[u.CommonModule,g.ViewGeneratorModule,g.ViewModule]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&i.\u0275\u0275setNgModuleScope(W,{declarations:[P,K,N,k],imports:[u.CommonModule,g.ViewGeneratorModule,g.ViewModule],exports:[P,K,N,k]})})();const ie="DisableDefaultComponentLoaderVisibilityDelay",we={provide:g.COMPONENT_LOADER_VISIBILITY_DELAY,useFactory:r=>r?.[ie]?0:2500,deps:[[new i.Optional,D.FEATURE_VALUES]]};var b=a(37845),H=a(31843);class V extends H.MatTreeNode{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(V)))(n||V)}})()}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:V,selectors:[["crt-tree-view-node"]],hostAttrs:[1,"crt-tree-view-node","mat-tree-node"],exportAs:["crtTreeNode"],features:[i.\u0275\u0275ProvidersFeature([{provide:b.CdkTreeNode,useExisting:V}]),i.\u0275\u0275InheritDefinitionFeature]})}}class E extends H.MatTreeNodeDef{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(E)))(n||E)}})()}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:E,selectors:[["","crtTreeNodeDef",""]],inputs:{when:[i.\u0275\u0275InputFlags.None,"crtTreeNodeDefWhen","when"],data:[i.\u0275\u0275InputFlags.None,"crtTreeNode","data"]},features:[i.\u0275\u0275ProvidersFeature([{provide:b.CdkTreeNodeDef,useExisting:E}]),i.\u0275\u0275InheritDefinitionFeature]})}}class y extends H.MatNestedTreeNode{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(y)))(n||y)}})()}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:y,selectors:[["crt-nested-tree-view-node"]],hostAttrs:[1,"crt-nested-tree-view-node","mat-nested-tree-node"],inputs:{node:[i.\u0275\u0275InputFlags.None,"crtNestedTreeNode","node"]},exportAs:["crtNestedTreeNode"],features:[i.\u0275\u0275ProvidersFeature([{provide:b.CdkNestedTreeNode,useExisting:y},{provide:b.CdkTreeNode,useExisting:y},{provide:b.CDK_TREE_NODE_OUTLET_NODE,useExisting:y}]),i.\u0275\u0275InheritDefinitionFeature]})}}class M extends H.MatTreeNodeToggle{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(M)))(n||M)}})()}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:M,selectors:[["","crtTreeNodeToggle",""]],inputs:{recursive:[i.\u0275\u0275InputFlags.None,"crtTreeNodeToggleRecursive","recursive"]},features:[i.\u0275\u0275ProvidersFeature([{provide:b.CdkTreeNodeToggle,useExisting:M}]),i.\u0275\u0275InheritDefinitionFeature]})}}class w extends H.MatTreeNodeOutlet{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(w)))(n||w)}})()}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:w,selectors:[["","crtTreeViewNodeOutlet",""]],features:[i.\u0275\u0275ProvidersFeature([{provide:b.CdkTreeNodeOutlet,useExisting:w}]),i.\u0275\u0275InheritDefinitionFeature]})}}class S extends H.MatTree{constructor(){super(...arguments),this._nodeOutlet=null}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(S)))(n||S)}})()}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:S,selectors:[["crt-tree-view"]],viewQuery:function(t,n){if(t&1&&i.\u0275\u0275viewQuery(w,7),t&2){let s;i.\u0275\u0275queryRefresh(s=i.\u0275\u0275loadQuery())&&(n._nodeOutlet=s.first)}},hostAttrs:["role","tree",1,"mat-tree","crt-tree-view"],exportAs:["crtTreeView"],features:[i.\u0275\u0275ProvidersFeature([{provide:b.CdkTree,useExisting:S}]),i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:0,consts:[["crtTreeViewNodeOutlet",""]],template:function(t,n){t&1&&i.\u0275\u0275elementContainer(0,0)},dependencies:[w],styles:[`.crt-tree-view{display:block}.crt-tree-view-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.crt-nested-tree-view-node{border-bottom-width:0}
`],encapsulation:2})}}class R{static{this.\u0275fac=function(t){return new(t||R)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:R})}static{this.\u0275inj=i.\u0275\u0275defineInjector({})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&i.\u0275\u0275setNgModuleScope(R,{declarations:[S,V,w,M,y,E],exports:[S,V,w,M,y,E]})})();var ee=a(73308),ve=a(13053),ne=a(62225),_=a(89422),O=a(84177);class f{get nativeElement(){return this.elementRef.nativeElement}set selected(e){this._processElementClass(e,this._selectedClassName)}get selected(){return this._hasClass(this._selectedClassName)}set focused(e){this._processElementClass(e,this._focusedClassName)}get focused(){return this._hasClass(this._focusedClassName)}constructor(e){this.elementRef=e,this._selectedClassName="crt-virtual-scroll-view-item-selected",this._focusedClassName="crt-virtual-scroll-view-item-focused"}_processElementClass(e,t){if(e){if(this._hasClass(t))return;this.nativeElement.classList.add(t)}else{if(!this._hasClass(t))return;this.nativeElement.classList.remove(t)}}_hasClass(e){return this.nativeElement.classList.contains(e)}static{this.\u0275fac=function(t){return new(t||f)(i.\u0275\u0275directiveInject(i.ElementRef))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:f,selectors:[["","crtVirtualScrollViewItem",""]],hostAttrs:[1,"crt-virtual-scroll-view-item"],inputs:{item:"item"}})}}class T{static{this.\u0275fac=function(t){return new(t||T)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:T,selectors:[["","crtVirtualScrollViewOutlet",""]],inputs:{visibleItems:"visibleItems"}})}}const be=["virtualScrollViewport"],Ve=["virtualFocusItem"],Ee=r=>({"crt-virtual-scroll-viewport":!0,"crt-virtual-scroll-viewport-hidden":r}),Me=r=>({visibleItems:r});function Se(r,e){r&1&&i.\u0275\u0275element(0,"ts-mask",9)}function Oe(r,e){r&1&&i.\u0275\u0275elementContainer(0)}class A{constructor(){this._changeDetectorRef=(0,i.inject)(i.ChangeDetectorRef),this._renderer=(0,i.inject)(i.Renderer2),this._resetFocusStateDebounceTime=50,this._scrollToViewItemElementByItemKeyDebounceTime=10,this._setFocusedItemKeyDebounceTime=10,this._virtualScrollItemsBufferSize=5,this._items$=new l.BehaviorSubject([]),this._visibleVirtualItems=new l.BehaviorSubject([]),this._loading$=new l.BehaviorSubject(!1),this._viewRefreshing=new l.BehaviorSubject(!1),this._itemsSubscription=new l.Subscription,this._viewItemsChangedSubscription=new l.Subscription,this._viewItemsEventsUnlistens=[],this._isVirtualFocusItemInFocus=!1,this._updateItemsDebounce=(0,p.debounce)(e=>this._updateItems(e),0),this._resetFocusStateDebounce=(0,p.debounce)(()=>this._resetFocusState(),this._resetFocusStateDebounceTime),this._scrollToViewItemElementByItemKeyDebounce=(0,p.debounce)(e=>this._scrollToViewItemElementByItemKey(e),this._scrollToViewItemElementByItemKeyDebounceTime),this._setFocusedItemKeyDebounce=(0,p.debounce)(e=>this._setFocusedItemKey(e),this._setFocusedItemKeyDebounceTime),this._viewItems=new i.QueryList,this.itemKeyPropertyName="Id",this.isLastItemPropertyName="IsLastItem",this.itemHeight=40,this.minVisibleItemsCount=5,this.selectedItemKeyChange=new i.EventEmitter,this.focusedItemKeyChange=new i.EventEmitter,this.paginationChange=new i.EventEmitter,this.setupLastItemFn=e=>{const t=e[e.length-1];t&&(t.isLastItem=!0)}}get _isVirtualScrollInitialized(){return!!this.virtualScroll&&!!this._virtualScrollSubscription$}set viewItems(e){this._viewItems=e,this._subscribeOnViewItemsChanged()}get viewItems(){return this._viewItems}get allItems(){return this._items$}get visibleVirtualItems(){return this._visibleVirtualItems}get visibleItems(){return this._visibleVirtualItems.pipe((0,C.map)(e=>e.map(t=>t.item)))}get viewportMinHeight(){return Math.min(this.minVisibleItemsCount*this.itemHeight,this.visibleVirtualItems.value.length*this.itemHeight)}get maskVisible(){return this._loading$.value||this._viewRefreshing.value}set items(e){e instanceof I.BaseViewModelCollection&&(this._itemsSubscription.unsubscribe(),this._itemsSubscription=new l.Subscription,this._itemsSubscription.add(e.changed.subscribe(()=>this._updateItemsDebounce(e)))),this._updateItemsDebounce(e)}set loading(e){this._loading$.next(e)}set selectedItemKey(e){this._isValuesEquals(this._selectedItemKey,e)||(this._selectedItemKey=e,this._updateViewItemsSelectedState())}set focusedItemKey(e){this._isValuesEquals(this._focusedItemKey,e)||(this._focusedItemKey=e,this._updateViewItemsFocusedState())}_updateItems(e){var t=this;Promise.all((e??[]).map(function(){var n=(0,ee.A)(function*(s){return{key:s[t.itemKeyPropertyName]instanceof Promise?yield s[t.itemKeyPropertyName]:s[t.itemKeyPropertyName],isLastItem:s[t.isLastItemPropertyName]instanceof Promise?yield s[t.isLastItemPropertyName]:s[t.isLastItemPropertyName],item:s}});return function(s){return n.apply(this,arguments)}}())).then(n=>{this.setupLastItemFn?.(n),this._items$.next(n),this._setRefreshingView(),this._reloadView()})}_setRefreshingView(){setTimeout(()=>{this.detectChanges()},0)}_reloadView(){this._updateData(),this._subscribeOnVirtualScroll()}_updateData(){if((0,p.isEmpty)(this._items$.value)){this._setVirtualData([]);return}this._updateVirtualData(this._lastListRange),this.virtualScroll.checkViewportSize(),this._updateViewItemsState()}_updateVirtualData(e){if(!this._isVirtualScrollInitialized)return;const t=this.virtualScroll.measureScrollOffset();this._updateVirtualDataByVisibleItemsRange(e),this.virtualScroll.scrollToOffset(t)}_updateVirtualDataByVisibleItemsRange(e){e??=this._getDefaultListRange(),this._setVirtualData(this._items$.value.slice(e.start,e.end))}_setVirtualData(e){this._destroyViewItemsEventsListeners(),this.visibleVirtualItems.next(e);const t=this.visibleVirtualItems.value.filter(n=>n.isLastItem);t.length>0&&(t.forEach(n=>n.isLastItem=!1),this.paginationChange.emit({type:"loadNextPage",lastItemsKeys:t.map(n=>n.key)})),this._setRefreshingView()}_subscribeOnVirtualScroll(){!this.virtualScroll||this._isVirtualScrollInitialized||(this._virtualScrollSubscription$?.unsubscribe(),this._virtualScrollSubscription$=new l.Subscription,this._virtualScrollSubscription$.add(this.virtualScroll.renderedRangeStream.subscribe(this._processRenderedRangeStream.bind(this))))}_processRenderedRangeStream(e){this._lastListRange=e,this._updateVirtualData(e),this._updateViewItemsState()}_subscribeOnViewItemsChanged(){this._viewItemsChangedSubscription.unsubscribe(),this._viewItemsChangedSubscription=new l.Subscription,this._viewItemsChangedSubscription.add(this.viewItems.changes.pipe((0,C.tap)(e=>this._subscribeOnViewItemsEvents(e)),(0,C.switchMap)(e=>(0,l.from)(this._updateViewItemKey(e)))).subscribe(()=>this._updateViewItemsState()))}_subscribeOnViewItemsEvents(e){this._destroyViewItemsEventsListeners(),e.forEach(t=>{this._viewItemsEventsUnlistens.push(this._renderer.listen(t.nativeElement,"focusin",()=>this._onViewItemElementFocusIn(t)),this._renderer.listen(t.nativeElement,"focusout",()=>this._onViewItemElementFocusOut()),this._renderer.listen(t.nativeElement,"click",n=>this._onViewItemElementClick(t,n)),this._renderer.listen(t.nativeElement,"keydown",n=>this._onViewItemElementKeyDown(t,n)))})}_updateViewItemKey(e){var t=this;return Promise.all(e.map(function(){var n=(0,ee.A)(function*(s){return s.itemKey=s.item[t.itemKeyPropertyName]instanceof Promise?yield s.item[t.itemKeyPropertyName]:s.item[t.itemKeyPropertyName]});return function(s){return n.apply(this,arguments)}}()))}_updateViewItemsState(){this._updateViewItemsFocusedState(),this._updateViewItemsSelectedState()}_updateViewItemsFocusedState(){this._resetFocusedItemStateIfNeed(),this._resetFocusStateDebounce()}_resetFocusState(){const e=this._isCustomActionOnViewItem("focus",this._focusedItemKey);if((0,p.isEmpty)(this._focusedItemKey)&&!e){this._setVirtualFocusItemState(!1);return}this._resetFocusedItemStateIfNeed();const t=this._getFocusElement(this._focusedItemKey),n=this._getFocusAction(this._focusedItemKey);if(this._isVirtualFocusItemInFocus){this._focusOnElement(t,!e,n);return}this._focusOnElement(t,!e,n)||this._focusOnVirtualFocusItem()}_resetFocusedItemStateIfNeed(){const e=this._findViewItem(this._focusedItemKey);this._resetViewItemState(e,"focused")}_resetViewItemState(e,t){this._setViewItemState(e,t,!0),this._clearViewItemState(t,e?.itemKey)}_focusOnElement(e,t,n){return this._isElementInViewport(e,t)?(this._isVirtualFocusItemInFocus=!1,n(e),!0):!1}_isElementInViewport(e,t){if(!e||!this.virtualScrollViewport)return!1;const n=e.getBoundingClientRect(),s=this.virtualScrollViewport.nativeElement.getBoundingClientRect(),c=s.top,h=this._getVirtualScrollBottom(c)||s.bottom;return t?n.top>=c&&n.bottom<=h:n.top<h&&n.bottom>c}_getVirtualScrollBottom(e){return this.virtualScroll?e+this.virtualScroll.elementRef.nativeElement.clientHeight:null}_focusOnVirtualFocusItem(){this._setVirtualFocusItemState(!0),setTimeout(()=>{this.virtualFocusItem.nativeElement.focus()},10)}_clearViewItemState(e,t){this._getViewItemsWithState(e).filter(n=>!t||n.itemKey!==t).forEach(n=>{this._setViewItemState(n,e,!1)})}_getViewItemsWithState(e){return this.viewItems.filter(t=>!!t[e])}_setViewItemState(e,t,n){e&&(e[t]=n)}_updateViewItemsSelectedState(){const e=this._findViewItem(this._selectedItemKey);this._resetViewItemState(e,"selected")}_onViewItemElementFocusIn(e){this._setVirtualFocusItemState(!1),this._setFocusedItem(e)}_onViewItemElementFocusOut(){this._isVirtualFocusItemInFocus||this._setFocusedItem(null)}_onViewItemElementClick(e,t){if(this._isCustomActionOnViewItem("click",e.itemKey)&&this.onViewItemCustomActionFn){this.onViewItemCustomActionFn("click",e.itemKey,t);return}this._setSelectedItem(e)}_onViewItemElementKeyDown(e,t){if(this._isCustomActionOnViewItem("keydown",e.itemKey,t)&&this.onViewItemCustomActionFn){this.onViewItemCustomActionFn("keydown",e.itemKey,t);return}switch(t.key){case _.Key.ArrowDown:{this._focusOnEventSiblingElement(t,"next");break}case _.Key.ArrowUp:{this._focusOnEventSiblingElement(t,"previous");break}case _.Key.Enter:{this._setSelectedItem(e);break}}}_focusOnEventSiblingElement(e,t){const n=`${t}ElementSibling`;e.preventDefault(),e.stopPropagation(),e.currentTarget[n]instanceof HTMLElement&&e.currentTarget[n].focus()}_setSelectedItem(e){this._resetViewItemState(e,"selected");const t=e?.itemKey||null;this._isValuesEquals(this._selectedItemKey,t)||(this._selectedItemKey=t,this._emitSelectedItemKeyChange(t))}_setFocusedItem(e){this._resetViewItemState(e,"focused");const t=e?.itemKey||null;this._setFocusedItemKeyDebounce(t)}_setFocusedItemKey(e){this._isValuesEquals(this._focusedItemKey,e)||(this._focusedItemKey=e,this._emitFocusedItemKeyChange(e))}_setVirtualFocusItemState(e){this._isVirtualFocusItemInFocus=e,this.virtualFocusItem&&(this.virtualFocusItem.nativeElement.tabIndex=e?0:-1)}_emitSelectedItemKeyChange(e){this.selectedItemKeyChange.emit(e)}_emitFocusedItemKeyChange(e){this.focusedItemKeyChange.emit(e)}_setFocusItemByDirectionType(e){switch(e){case"next":{this._processSetFocusOnNewItemByDirection("next");break}case"previous":{this._processSetFocusOnNewItemByDirection("previous");break}case"first":{this._processSetFocusOnNewItemByPosition("first");break}case"last":{this._processSetFocusOnNewItemByPosition("last");break}default:{this._processSetFocusOnNewItemByItemKey(e);break}}}_processSetFocusOnNewItemByDirection(e){if((0,p.isEmpty)(this._focusedItemKey)||this._isCustomActionOnViewItem("focus",this._focusedItemKey))return;const t=this._items$.value.findIndex(c=>c.key===this._focusedItemKey);if(t===-1)return;const n=Math.min(Math.max(0,this._items$.value.length-1),Math.max(0,t+(e==="next"?1:-1))),s=this._items$.value[n];this._processSetFocusOnNewItem(s)}_processSetFocusOnNewItemByPosition(e){const t=this._items$.value[e==="first"?0:this._items$.value.length-1];this._processSetFocusOnNewItem(t)}_processSetFocusOnNewItemByItemKey(e){const t=this._items$.value.find(n=>n.key===e);this._processSetFocusOnNewItem(t)}_processSetFocusOnNewItem(e){if(!e){this._resetViewItemState(null,"focused");return}const t=this._findViewItem(e.key);this._resetViewItemState(t,"focused"),!(t&&this._focusOnElement(t.nativeElement,!1,this._getFocusAction(t.itemKey)))&&(this._setFocusedItemKey(e.key),this._scrollToViewItemElementByItemKeyDebounce(e.key))}_scrollToViewItemElementByItemKey(e){const t=this._findViewItem(e);if(this._isElementInViewport(t?.nativeElement,!1))return;if(this._resetFocusStateDebounce(),t?.nativeElement){t.nativeElement.scrollIntoView({block:"center",behavior:"auto"});return}const n=this._items$.value.findIndex(s=>s.key===e);n!==-1&&this.virtualScroll.scrollToIndex(n)}_processOnVirtualFocusItemFocusOut(e){if(this._isCustomActionOnViewItem("focusout",this._focusedItemKey)&&this.onViewItemCustomActionFn){this.onViewItemCustomActionFn("focusout",this._focusedItemKey,e);return}this._setFocusedItem(null)}_checkAndHandleCustomActionKeyDown(e){return this._isCustomActionOnViewItem("keydown",this._focusedItemKey,e)&&this.onViewItemCustomActionFn?(this.onViewItemCustomActionFn("keydown",this._focusedItemKey,e),this._scrollToViewItemElementByItemKeyDebounce(this._focusedItemKey),!0):!1}_handleNavigationKeys(e){switch(e.key){case _.Key.ArrowUp:case _.Key.ArrowDown:this._processArrowKeyVirtualFocusItemKeyDown(e);break;case _.Key.Enter:this._processEnterVirtualFocusItemKeyDown(e);break;case _.Key.Tab:this._processTabVirtualFocusItemKeyDown(e);break}}_processArrowKeyVirtualFocusItemKeyDown(e){this._processSetFocusOnNewItemByDirection(e.key===_.Key.ArrowUp?"previous":"next")}_processEnterVirtualFocusItemKeyDown(e){this._setSelectedItemByItemKey(this._focusedItemKey),this._scrollToViewItemElementByItemKeyDebounce(this._focusedItemKey)}_setSelectedItemByItemKey(e){const t=this.viewItems.find(n=>n.itemKey===e);if(t){this._setSelectedItem(t);return}this._isValuesEquals(this._selectedItemKey,e)||(this._selectedItemKey=e,this._emitSelectedItemKeyChange(e))}_processTabVirtualFocusItemKeyDown(e){e.preventDefault(),e.stopPropagation(),this._scrollToViewItemElementByItemKeyDebounce(this._focusedItemKey)}_isCustomActionOnViewItem(e,t,n){return this.isCustomActionOnViewItemFn?this.isCustomActionOnViewItemFn(e,t,n):!1}_getFocusElement(e){return this._isCustomActionOnViewItem("focus",e)&&this.getFocusElementFn?this.getFocusElementFn(e,this.viewItems):this._findViewItem(e)?.nativeElement}_getFocusAction(e){return this._isCustomActionOnViewItem("focus",e)&&this.getFocusActionFn?this.getFocusActionFn(e,this.viewItems):t=>t.focus()}_findViewItem(e){return this.viewItems.find(t=>t.itemKey===e)}_isValuesEquals(e,t){return e===t||(0,p.isEmpty)(e)&&(0,p.isEmpty)(t)}_getDefaultListRange(){return{start:0,end:Math.floor(this.virtualScroll.getViewportSize()/this.itemHeight)+this._virtualScrollItemsBufferSize}}_destroyViewItemsEventsListeners(){this._viewItemsEventsUnlistens.forEach(e=>e()),this._viewItemsEventsUnlistens=[]}detectChanges(){this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._subscribeOnViewItemsChanged()}ngOnDestroy(){this._itemsSubscription.unsubscribe(),this._viewItemsChangedSubscription.unsubscribe(),this._virtualScrollSubscription$?.unsubscribe(),this._destroyViewItemsEventsListeners()}setFocusItem(e,t){e?.preventDefault(),e?.stopPropagation(),this._setFocusItemByDirectionType(t)}onVirtualFocusItemFocusOut(e){this.virtualFocusItem.nativeElement.tabIndex=-1,this._isVirtualFocusItemInFocus&&(this._isVirtualFocusItemInFocus=!1,this._processOnVirtualFocusItemFocusOut(e))}onVirtualFocusItemKeyDown(e){this._checkAndHandleCustomActionKeyDown(e)||this._handleNavigationKeys(e)}onViewportResized(e){this.virtualScroll.checkViewportSize()}onWheelTree(){this._resetFocusStateDebounce()}static{this.\u0275fac=function(t){return new(t||A)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:A,selectors:[["crt-virtual-scroll-viewport"]],contentQueries:function(t,n,s){if(t&1&&(i.\u0275\u0275contentQuery(s,T,5,i.TemplateRef),i.\u0275\u0275contentQuery(s,f,4,f)),t&2){let c;i.\u0275\u0275queryRefresh(c=i.\u0275\u0275loadQuery())&&(n.viewOutlet=c.first),i.\u0275\u0275queryRefresh(c=i.\u0275\u0275loadQuery())&&(n._viewItems=c)}},viewQuery:function(t,n){if(t&1&&(i.\u0275\u0275viewQuery(be,5,i.ElementRef),i.\u0275\u0275viewQuery(O.CdkVirtualScrollViewport,5),i.\u0275\u0275viewQuery(Ve,5,i.ElementRef)),t&2){let s;i.\u0275\u0275queryRefresh(s=i.\u0275\u0275loadQuery())&&(n.virtualScrollViewport=s.first),i.\u0275\u0275queryRefresh(s=i.\u0275\u0275loadQuery())&&(n.virtualScroll=s.first),i.\u0275\u0275queryRefresh(s=i.\u0275\u0275loadQuery())&&(n.virtualFocusItem=s.first)}},inputs:{itemKeyPropertyName:"itemKeyPropertyName",isLastItemPropertyName:"isLastItemPropertyName",itemHeight:"itemHeight",minVisibleItemsCount:"minVisibleItemsCount",isCustomActionOnViewItemFn:"isCustomActionOnViewItemFn",onViewItemCustomActionFn:"onViewItemCustomActionFn",getFocusElementFn:"getFocusElementFn",getFocusActionFn:"getFocusActionFn",viewItems:"viewItems",items:"items",loading:"loading",selectedItemKey:"selectedItemKey",focusedItemKey:"focusedItemKey",setupLastItemFn:"setupLastItemFn"},outputs:{selectedItemKeyChange:"selectedItemKeyChange",focusedItemKeyChange:"focusedItemKeyChange",paginationChange:"paginationChange"},decls:11,vars:16,consts:[["virtualScrollViewport",""],["virtualFocusItem",""],[3,"ngClass"],["class","component-mask",4,"ngIf"],["crtResizable","",1,"crt-virtual-scroll-viewport-wrap",3,"resized","wheel"],[1,"crt-virtual-scroll-virtual-focus-item",3,"keydown","focusout"],["tabIndex","-1",1,"crt-virtual-scroll-viewport-container",3,"itemSize"],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"component-mask"]],template:function(t,n){if(t&1){const s=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",2,0),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,Se,1,0,"ts-mask",3),i.\u0275\u0275elementStart(4,"div",4),i.\u0275\u0275listener("resized",function(h){return i.\u0275\u0275restoreView(s),i.\u0275\u0275resetView(n.onViewportResized(h))})("wheel",function(){return i.\u0275\u0275restoreView(s),i.\u0275\u0275resetView(n.onWheelTree())}),i.\u0275\u0275elementStart(5,"div",5,1),i.\u0275\u0275listener("keydown",function(h){return i.\u0275\u0275restoreView(s),i.\u0275\u0275resetView(n.onVirtualFocusItemKeyDown(h))})("focusout",function(h){return i.\u0275\u0275restoreView(s),i.\u0275\u0275resetView(n.onVirtualFocusItemFocusOut(h))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"cdk-virtual-scroll-viewport",6),i.\u0275\u0275template(8,Oe,1,0,"ng-container",7),i.\u0275\u0275pipe(9,"async"),i.\u0275\u0275elementContainer(10,8),i.\u0275\u0275elementEnd()()()}t&2&&(i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(12,Ee,i.\u0275\u0275pipeBind1(2,8,n.visibleItems).length===0)),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",n.maskVisible),i.\u0275\u0275advance(),i.\u0275\u0275styleProp("min-height",n.viewportMinHeight,"px"),i.\u0275\u0275advance(3),i.\u0275\u0275property("itemSize",n.itemHeight),i.\u0275\u0275advance(),i.\u0275\u0275property("cdkVirtualForOf",i.\u0275\u0275pipeBind1(9,10,n.allItems)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngTemplateOutlet",n.viewOutlet)("ngTemplateOutletContext",i.\u0275\u0275pureFunction1(14,Me,n.visibleItems)))},dependencies:[u.NgClass,u.NgIf,u.NgTemplateOutlet,O.CdkVirtualScrollViewport,O.CdkFixedSizeVirtualScroll,j.CrtResizableDirective,j.MaskComponent,O.CdkVirtualForOf,u.AsyncPipe],styles:[".crt-virtual-scroll-viewport[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.crt-virtual-scroll-viewport.crt-virtual-scroll-viewport-hidden[_ngcontent-%COMP%]{height:unset}.crt-virtual-scroll-viewport.crt-virtual-scroll-viewport-hidden[_ngcontent-%COMP%]   .crt-virtual-scroll-viewport-wrap[_ngcontent-%COMP%]{display:none}.crt-virtual-scroll-viewport[_ngcontent-%COMP%]   .crt-virtual-scroll-viewport-wrap[_ngcontent-%COMP%]{width:100%;height:100%}.crt-virtual-scroll-viewport[_ngcontent-%COMP%]   .crt-virtual-scroll-viewport-wrap[_ngcontent-%COMP%]   .crt-virtual-scroll-virtual-focus-item[_ngcontent-%COMP%]:focus-visible{outline:none}.crt-virtual-scroll-viewport[_ngcontent-%COMP%]   .crt-virtual-scroll-viewport-wrap[_ngcontent-%COMP%]   .crt-virtual-scroll-viewport-container[_ngcontent-%COMP%]{height:100%}.crt-virtual-scroll-viewport[_ngcontent-%COMP%]   .crt-virtual-scroll-viewport-wrap[_ngcontent-%COMP%]   .crt-virtual-scroll-viewport-container[_ngcontent-%COMP%]   .crt-virtual-scroll-view-item-focused[_ngcontent-%COMP%]{background-color:red}"],changeDetection:0})}}class z{static{this.\u0275fac=function(t){return new(t||z)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:z})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[u.CommonModule,O.CdkVirtualScrollViewport,j.MaskModule,O.ScrollingModule]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&i.\u0275\u0275setNgModuleScope(z,{declarations:[A,f,T],imports:[u.CommonModule,O.CdkVirtualScrollViewport,O.CdkFixedSizeVirtualScroll,j.CrtResizableDirective,j.MaskModule,O.ScrollingModule],exports:[A,f,T]})})();class B{static{this.\u0275fac=function(t){return new(t||B)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:B,selectors:[["","crtVirtualScrollTreeViewItemOutlet",""]],inputs:{node:"node"}})}}var te=a(52989);const De=["virtualScrollViewport"],xe=r=>({node:r});function Fe(r,e){if(r&1){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-icon",8),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(t);const s=i.\u0275\u0275nextContext().$implicit,c=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(c.onToggleNodeClick(s))}),i.\u0275\u0275elementEnd()}if(r&2){const t=i.\u0275\u0275nextContext().$implicit,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("svgIcon",n.treeControl.isExpanded(t)?"arrow-down":"arrow-right")}}function Pe(r,e){if(r&1&&(i.\u0275\u0275elementStart(0,"crt-tree-view-node",5),i.\u0275\u0275template(1,Fe,1,1,"mat-icon",6),i.\u0275\u0275elementContainer(2,7),i.\u0275\u0275elementEnd()),r&2){const t=e.$implicit,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("item",t==null?null:t.item)("ngClass",n.getNodeClasses(t)),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.hasChildren(t)),i.\u0275\u0275advance(),i.\u0275\u0275property("ngTemplateOutlet",n.nodeOutlet)("ngTemplateOutletContext",i.\u0275\u0275pureFunction1(5,xe,t==null?null:t.item))}}function Ne(r,e){if(r&1&&(i.\u0275\u0275elementStart(0,"crt-tree-view",3),i.\u0275\u0275template(1,Pe,3,7,"crt-tree-view-node",4),i.\u0275\u0275elementEnd()),r&2){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("dataSource",t.treeDataSource)("treeControl",t.treeControl)("trackBy",t.treeNodeTracker)}}class ${constructor(){this._changeDetectorRef=(0,i.inject)(i.ChangeDetectorRef),this._directionality=(0,i.inject)(ve.Directionality),this._allNodes$=new l.BehaviorSubject([]),this._expandedItems=[],this._itemsSubscription=new l.Subscription,this._updateItemsDebounce=(0,p.debounce)(e=>this._updateItems(e),0),this.isCustomActionOnTreeViewItemFn=this.isCustomActionOnTreeViewItem.bind(this),this.onTreeViewItemCustomActionFn=this.onTreeViewItemCustomAction.bind(this),this.treeControl=new b.FlatTreeControl(e=>e.level,e=>e.expandable),this.treeDataSource=new ne.ArrayDataSource([]),this.itemKeyPropertyName="Id",this.itemLevelPropertyName="Level",this.itemExpandablePropertyName="Expandable",this.itemParentKeyPropertyName="ParentId",this.isLastItemPropertyName="IsLastItem",this.itemHeight=40,this.minVisibleItemsCount=5,this.dataLoadLimit=0,this.viewItems=new i.QueryList,this.selectedItemKeyChange=new i.EventEmitter,this.nodeExpanded=new i.EventEmitter,this.expandedItemsChanged=new i.EventEmitter,this.paginationChange=new i.EventEmitter,this.setupLastItemFn=null,this.hasChildren=e=>e.expandable}set items(e){e instanceof I.BaseViewModelCollection&&(this._itemsSubscription.unsubscribe(),this._itemsSubscription=new l.Subscription,this._itemsSubscription.add(e.changed.subscribe(()=>this._updateItemsDebounce(e)))),this._updateItemsDebounce([...e])}get allItems(){return this._allNodes$?.value}set expandedItems(e){Array.isArray(e)&&this._hasExpandedItemsChanges(e)&&this._initExpandedItems(e)}set visibleItems(e){this._visibleItems=e}get visibleItems(){return this._visibleItems}_hasExpandedItemsChanges(e){return(0,p.difference)(e,this._expandedItems).length>0||(0,p.difference)(this._expandedItems,e).length>0}_initExpandedItems(e){this._expandedItems=[...e],this._allNodes$?.value?.forEach(t=>{this.treeControl.collapse(t),this._updateNodesVisibility(t)}),this._processExpandedItems(),this._updateVisibleNodes()}_updateItems(e){var t=this;Promise.all((e??[]).map(function(){var n=(0,ee.A)(function*(s){return{key:s[t.itemKeyPropertyName]instanceof Promise?yield s[t.itemKeyPropertyName]:s[t.itemKeyPropertyName],expandable:s[t.itemExpandablePropertyName]instanceof Promise?yield s[t.itemExpandablePropertyName]:s[t.itemExpandablePropertyName],level:s[t.itemLevelPropertyName]instanceof Promise?yield s[t.itemLevelPropertyName]:s[t.itemLevelPropertyName],parentKey:s[t.itemParentKeyPropertyName]instanceof Promise?yield s[t.itemParentKeyPropertyName]:s[t.itemParentKeyPropertyName],isLastItem:s[t.isLastItemPropertyName]instanceof Promise?yield s[t.isLastItemPropertyName]:s[t.isLastItemPropertyName],item:s}});return function(s){return n.apply(this,arguments)}}())).then(n=>{this._setupAllNodes(n),this._processExpandedItems(),this._updateVisibleNodes(),this._detectChanges()})}_setupAllNodes(e){if(this._lastExpandedItem){this._loadExpandedItems(e),this._lastExpandedItem=null;return}this._mergeNodeProperties(e),this._allNodes$.next(e),this.allItems.filter(t=>t.expandable).forEach(t=>{this._updateNodesVisibility(t)})}_loadExpandedItems(e){const t=e.filter(s=>s.parentKey===this._lastExpandedItem);t.forEach(s=>s.hidden=!1);const n=this.allItems.findIndex(s=>s.key===this._lastExpandedItem);this.allItems.splice(n+1,0,...t)}_mergeNodeProperties(e){this.allItems?.forEach(t=>{const n=e.find(s=>s.key===t.key);n&&(n.hidden=t.hidden)})}_processExpandedItems(){this._expandedItems?.forEach(e=>{const t=this.allItems.find(n=>n.key===e);t&&t.expandable&&(this.treeControl.expand(t),this._getChildren(t.key,!0).length?t.hidden||this._updateNodesVisibility(t):this.nodeExpanded.emit(t.item))})}_detectChanges(){this._changeDetectorRef.detectChanges()}_updateVisibleNodes(){this.visibleItems=this.allItems.filter(e=>!e.hidden).map(e=>e.item)}_updateNodesVisibility(e){const t=this.treeControl.isExpanded(e);this._getChildren(e.key,!1,t).forEach(s=>s.hidden=!t)}_getChildren(e,t=!1,n=!1,s=[]){const c=this.allItems.filter(h=>h.parentKey===e);return s.push(...c),t||c.forEach(h=>{(!n||this.treeControl.isExpanded(h))&&this._getChildren(h.key,t,n,s)}),s}_updateExpandedItems(e){const t=e.key;if(this._expandedItems=this._expandedItems||[],this.treeControl.isExpanded(e))this._expandedItems.find(n=>n===t)||this._expandedItems.push(t);else{const n=this._expandedItems.indexOf(t);n>-1&&this._expandedItems.splice(n,1)}}_isToggleKey(e){return e?e.key===_.Key.ArrowLeft||e.key===_.Key.ArrowRight:!1}_getToggleKeydownFn(e){return this._isRtl()?e===_.Key.ArrowLeft?this.expandNode.bind(this):this.collapseNode.bind(this):e===_.Key.ArrowLeft?this.collapseNode.bind(this):this.expandNode.bind(this)}_isCustomActionOnViewItem(e,t,n){return this.isCustomActionOnViewItemFn?this.isCustomActionOnViewItemFn(e,t,n):!1}_isRtl(){return this._directionality.value==="rtl"}_processToggleNode(e,t){const n=this.allItems.find(s=>s.key===e);!n.expandable||this.treeControl.isExpanded(n)===(t==="expand")||(this.treeControl[t](n),this.onToggleNodeClick(n))}_isChildOfNode(e,t){const n=this.allItems.find(s=>s.key===t);return n?n.parentKey===e?!0:this._isChildOfNode(e,n.parentKey):!1}_handleSelectedNodeChangeOnNodeToggle(e){if(this.onToggleNodeSelectedItemChangeFn){this.onToggleNodeSelectedItemChangeFn(this.treeControl.isExpanded(e)?"expand":"collapse",e.key);return}this.treeControl.isExpanded(e)||!this.selectedItemKey||this._isChildOfNode(e.key,this.selectedItemKey)&&(this.selectedItemKey=e.key,this.selectedItemKeyChange.emit(e.key))}treeNodeTracker(e,t){return this.treeNodeTrackerFn?this.treeNodeTrackerFn(e,t):{key:t.key,parentKey:t.parentKey,level:t.level,expandable:t.expandable,hidden:t.hidden}}ngAfterViewInit(){this.treeDataSource=new ne.ArrayDataSource(this.virtualScrollViewport?.visibleVirtualItems?.asObservable().pipe((0,l.map)(e=>e.map(t=>this.allItems.find(n=>n.key===t.key)))))}ngOnDestroy(){this._itemsSubscription.unsubscribe()}onSelectedItemKeyChange(e){this.selectedItemKeyChange.emit(e)}onToggleNodeClick(e){this._updateNodesVisibility(e),this._updateVisibleNodes(),this._updateExpandedItems(e),this.treeControl.isExpanded(e)&&!this._getChildren(e.key,!0).length&&(this._lastExpandedItem=e.key,this.nodeExpanded.emit(e.item)),this._handleSelectedNodeChangeOnNodeToggle(e),this.expandedItemsChanged.emit(this._expandedItems),this._detectChanges()}onPaginationChange(e){const t=e?.lastItemsKeys?.map(n=>this.allItems.find(s=>s.key===n)?.parentKey)||[];this.paginationChange.emit({type:e.type,parentKeys:t})}expandNode(e){this._processToggleNode(e,"expand")}collapseNode(e){this._processToggleNode(e,"collapse")}expandAll(){this.allItems.forEach(e=>{this._getChildren(e.key,!0).length&&(this.treeControl.expand(e),this._updateExpandedItems(e),this._updateNodesVisibility(e))}),this.expandedItemsChanged.emit(this._expandedItems),this._updateVisibleNodes(),this._detectChanges()}isCustomActionOnTreeViewItem(e,t,n){return!!(this._isCustomActionOnViewItem(e,t,n)||e==="keydown"&&this._isToggleKey(n))}onTreeViewItemCustomAction(e,t,n){if(this.isCustomActionOnTreeViewItem(e,t,n)&&this.onViewItemCustomActionFn){this.onViewItemCustomActionFn(e,t,n);return}if(e==="keydown"&&this._isToggleKey(n)){this._getToggleKeydownFn(n.key)(t);return}}getNodeClasses(e){const t=[];return e?.level===0&&t.push("root-level-node"),this.hasChildren(e)?t.push("parent-node"):t.push("child-node"),t.push("dynamic-"+e?.level+"-level-node"),t}static{this.\u0275fac=function(t){return new(t||$)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:$,selectors:[["crt-virtual-scroll-tree-view"]],contentQueries:function(t,n,s){if(t&1&&i.\u0275\u0275contentQuery(s,B,5,i.TemplateRef),t&2){let c;i.\u0275\u0275queryRefresh(c=i.\u0275\u0275loadQuery())&&(n.nodeOutlet=c.first)}},viewQuery:function(t,n){if(t&1&&(i.\u0275\u0275viewQuery(De,5,A),i.\u0275\u0275viewQuery(f,5,f)),t&2){let s;i.\u0275\u0275queryRefresh(s=i.\u0275\u0275loadQuery())&&(n.virtualScrollViewport=s.first),i.\u0275\u0275queryRefresh(s=i.\u0275\u0275loadQuery())&&(n.viewItems=s)}},inputs:{itemKeyPropertyName:"itemKeyPropertyName",itemLevelPropertyName:"itemLevelPropertyName",itemExpandablePropertyName:"itemExpandablePropertyName",itemParentKeyPropertyName:"itemParentKeyPropertyName",isLastItemPropertyName:"isLastItemPropertyName",selectedItemKey:"selectedItemKey",focusedItemKey:"focusedItemKey",itemHeight:"itemHeight",minVisibleItemsCount:"minVisibleItemsCount",dataLoadLimit:"dataLoadLimit",items:"items",expandedItems:"expandedItems",isCustomActionOnViewItemFn:"isCustomActionOnViewItemFn",onViewItemCustomActionFn:"onViewItemCustomActionFn",onToggleNodeSelectedItemChangeFn:"onToggleNodeSelectedItemChangeFn",getFocusElementFn:"getFocusElementFn",getFocusActionFn:"getFocusActionFn",setupLastItemFn:"setupLastItemFn",treeNodeTrackerFn:"treeNodeTrackerFn"},outputs:{selectedItemKeyChange:"selectedItemKeyChange",nodeExpanded:"nodeExpanded",expandedItemsChanged:"expandedItemsChanged",paginationChange:"paginationChange"},decls:3,vars:12,consts:[["virtualScrollViewport",""],[3,"selectedItemKeyChange","paginationChange","items","itemKeyPropertyName","itemHeight","focusedItemKey","selectedItemKey","minVisibleItemsCount","viewItems","isCustomActionOnViewItemFn","onViewItemCustomActionFn","getFocusElementFn","getFocusActionFn","setupLastItemFn"],["crtVirtualScrollViewOutlet",""],[3,"dataSource","treeControl","trackBy"],["crtVirtualScrollViewItem","","tabIndex","0",3,"item","ngClass",4,"crtTreeNodeDef"],["crtVirtualScrollViewItem","","tabIndex","0",3,"item","ngClass"],["crtTreeNodeToggle","","class","material-icons mat-icon-rtl-mirror node-toggle-icon",3,"svgIcon","click",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["crtTreeNodeToggle","",1,"material-icons","mat-icon-rtl-mirror","node-toggle-icon",3,"click","svgIcon"]],template:function(t,n){if(t&1){const s=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"crt-virtual-scroll-viewport",1,0),i.\u0275\u0275listener("selectedItemKeyChange",function(h){return i.\u0275\u0275restoreView(s),i.\u0275\u0275resetView(n.onSelectedItemKeyChange(h))})("paginationChange",function(h){return i.\u0275\u0275restoreView(s),i.\u0275\u0275resetView(n.onPaginationChange(h))}),i.\u0275\u0275template(2,Ne,2,3,"ng-template",2),i.\u0275\u0275elementEnd()}t&2&&i.\u0275\u0275property("items",n.visibleItems)("itemKeyPropertyName",n.itemKeyPropertyName)("itemHeight",n.itemHeight)("focusedItemKey",n.focusedItemKey)("selectedItemKey",n.selectedItemKey)("minVisibleItemsCount",n.minVisibleItemsCount)("viewItems",n.viewItems)("isCustomActionOnViewItemFn",n.isCustomActionOnTreeViewItemFn)("onViewItemCustomActionFn",n.onTreeViewItemCustomActionFn)("getFocusElementFn",n.getFocusElementFn)("getFocusActionFn",n.getFocusActionFn)("setupLastItemFn",n.setupLastItemFn)},dependencies:[u.NgClass,u.NgIf,u.NgTemplateOutlet,A,f,T,S,V,M,E,te.MatIcon],styles:["crt-tree-view[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;min-width:100%}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node[_ngcontent-%COMP%]{display:flex;gap:.5rem;min-height:40px;white-space:nowrap;outline:none}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node[_ngcontent-%COMP%]   .mat-icon.node-toggle-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;line-height:16px;cursor:pointer}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.root-level-node[_ngcontent-%COMP%]{padding-inline-start:.5rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.root-level-node.child-node[_ngcontent-%COMP%]   .prefix-node[_ngcontent-%COMP%]{margin-inline-start:0}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-1-level-node[_ngcontent-%COMP%]{padding-inline-start:2rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-2-level-node[_ngcontent-%COMP%]{padding-inline-start:4rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-3-level-node[_ngcontent-%COMP%]{padding-inline-start:6rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-4-level-node[_ngcontent-%COMP%]{padding-inline-start:8rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-5-level-node[_ngcontent-%COMP%]{padding-inline-start:10rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-6-level-node[_ngcontent-%COMP%]{padding-inline-start:12rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-7-level-node[_ngcontent-%COMP%]{padding-inline-start:14rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-8-level-node[_ngcontent-%COMP%]{padding-inline-start:16rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-9-level-node[_ngcontent-%COMP%]{padding-inline-start:18rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-10-level-node[_ngcontent-%COMP%]{padding-inline-start:20rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-11-level-node[_ngcontent-%COMP%]{padding-inline-start:22rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-12-level-node[_ngcontent-%COMP%]{padding-inline-start:24rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-13-level-node[_ngcontent-%COMP%]{padding-inline-start:26rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-14-level-node[_ngcontent-%COMP%]{padding-inline-start:28rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-15-level-node[_ngcontent-%COMP%]{padding-inline-start:30rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-16-level-node[_ngcontent-%COMP%]{padding-inline-start:32rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-17-level-node[_ngcontent-%COMP%]{padding-inline-start:34rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-18-level-node[_ngcontent-%COMP%]{padding-inline-start:36rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-19-level-node[_ngcontent-%COMP%]{padding-inline-start:38rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-20-level-node[_ngcontent-%COMP%]{padding-inline-start:40rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-21-level-node[_ngcontent-%COMP%]{padding-inline-start:42rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-22-level-node[_ngcontent-%COMP%]{padding-inline-start:44rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-23-level-node[_ngcontent-%COMP%]{padding-inline-start:46rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-24-level-node[_ngcontent-%COMP%]{padding-inline-start:48rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-25-level-node[_ngcontent-%COMP%]{padding-inline-start:50rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-26-level-node[_ngcontent-%COMP%]{padding-inline-start:52rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-27-level-node[_ngcontent-%COMP%]{padding-inline-start:54rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-28-level-node[_ngcontent-%COMP%]{padding-inline-start:56rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-29-level-node[_ngcontent-%COMP%]{padding-inline-start:58rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-30-level-node[_ngcontent-%COMP%]{padding-inline-start:60rem}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.child-node[_ngcontent-%COMP%]   .prefix-node[_ngcontent-%COMP%]{margin-inline-start:16px}"],changeDetection:0})}}class G{constructor(e){this._materialIconsRegistrator=e,this._materialIconsRegistrator.addIcons([{name:"arrow-down",icon:a(16227)},{name:"arrow-right",icon:a(75035)}])}static{this.\u0275fac=function(t){return new(t||G)(i.\u0275\u0275inject(j.MaterialIconsRegistrator))}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:G})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[u.CommonModule,z,R,te.MatIconModule]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&i.\u0275\u0275setNgModuleScope(G,{declarations:[$,B],imports:[u.CommonModule,z,R,te.MatIconModule],exports:[$,B]})})();var se=a(50456),Te=a(90865),Ae=a(96590);class Y{constructor(e){this._window=e,this._destroyed$=new l.Subject,this._delayTime=20,this._elements=new Set,this.disabledWindowsResize=!1,(0,l.fromEvent)(this._window,"resize").pipe((0,l.auditTime)(this._delayTime),(0,l.takeUntil)(this._destroyed$)).subscribe(()=>{this.onWindowResize()})}onWindowResize(){this.disabledWindowsResize||(this.disabledWindowsResize=!0,this._elements.forEach(e=>e.resizeToFitContent(!0)),this.disabledWindowsResize=!1)}addElement(e){this._elements.add(e)}removeElement(e){this._elements.delete(e)}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(t){return new(t||Y)(i.\u0275\u0275inject(Ae.WINDOW_TOKEN))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Y,factory:Y.\u0275fac,providedIn:"root"})}}class Q extends Te.CdkTextareaAutosize{constructor(){super(...arguments),this._controller=(0,i.inject)(Y),this.rows=1,this.autosizeClass=!0}noopInputHandler(){this._noopInputHandler()}_handleInput(){this._controller.disabledWindowsResize=!0,this.resizeToFitContent()}_handleChange(){this._controller.disabledWindowsResize=!1}ngOnInit(){this._controller.addElement(this)}ngAfterViewInit(){const e=this;e._platform.isBrowser&&(e._initialHeight=e._textareaElement.style.height,e.resizeToFitContent(),e._ngZone.runOutsideAngular(()=>{e._textareaElement.addEventListener("input",e._handleInput.bind(e)),e._textareaElement.addEventListener("change",e._handleChange.bind(e)),e._textareaElement.addEventListener("focus",e._handleFocusEvent.bind(e)),e._textareaElement.addEventListener("blur",e._handleFocusEvent.bind(e))}),e._isViewInited=!0,e.resizeToFitContent(!0))}ngOnDestroy(){this._controller.removeElement(this);const e=this;e._textareaElement.removeEventListener("input",e._handleInput.bind(e)),e._textareaElement.removeEventListener("change",e._handleChange.bind(e)),super.ngOnDestroy()}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Q)))(n||Q)}})()}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Q,selectors:[["textarea","crtTextareaAutosize",""]],hostVars:3,hostBindings:function(t,n){t&1&&i.\u0275\u0275listener("input",function(c){return n.noopInputHandler(c)}),t&2&&(i.\u0275\u0275attribute("rows",n.rows),i.\u0275\u0275classProp("cdk-textarea-autosize",n.autosizeClass))},exportAs:["crtTextareaAutosize"],features:[i.\u0275\u0275InheritDefinitionFeature]})}}class Z{static{this.\u0275fac=function(t){return new(t||Z)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Z})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[u.CommonModule,se.CdkModule]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&i.\u0275\u0275setNgModuleScope(Z,{declarations:[Q],imports:[u.CommonModule,se.CdkModule],exports:[Q]})})()},16227:L=>{L.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M3.27572 5.27844C3.64335 4.90719 4.2394 4.90719 4.60703 5.27844L8 8.70489L11.393 5.27844C11.7606 4.90719 12.3566 4.90719 12.7243 5.27844C13.0919 5.6497 13.0919 6.25163 12.7243 6.62289L8.66565 10.7216C8.29802 11.0928 7.70198 11.0928 7.33435 10.7216L3.27572 6.62289C2.90809 6.25163 2.90809 5.6497 3.27572 5.27844Z" fill="currentColor"/>
</svg>
`},75035:L=>{L.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><g xmlns="http://www.w3.org/2000/svg" transform="matrix(0 -1 1 0 -0 16)"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.27572 5.27844C3.64335 4.90719 4.2394 4.90719 4.60703 5.27844L8 8.70489L11.393 5.27844C11.7606 4.90719 12.3566 4.90719 12.7243 5.27844C13.0919 5.6497 13.0919 6.25163 12.7243 6.62289L8.66565 10.7216C8.29802 11.0928 7.70198 11.0928 7.33435 10.7216L3.27572 6.62289C2.90809 6.25163 2.90809 5.6497 3.27572 5.27844Z" fill="currentColor" /></g></svg>'},39935:L=>{L.exports=`<svg width="588" height="366" viewBox="0 0 588 366" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clip-path="url(#clip0_14741_15949)">
        <rect width="588" height="366" rx="8" fill="white" />
        <rect width="588" height="366" fill="url(#paint0_linear_14741_15949)" fill-opacity="0.05" />
        <path
            d="M293.988 191.25C297.716 191.25 300.738 188.228 300.738 184.5C300.738 180.772 297.716 177.75 293.988 177.75C290.26 177.75 287.238 180.772 287.238 184.5C287.238 188.228 290.26 191.25 293.988 191.25Z"
            fill="#D6D6D6" />
        <path fill-rule="evenodd" clip-rule="evenodd"
            d="M285.816 168.551C286.225 167.326 287.371 166.5 288.662 166.5H299.338C300.629 166.5 301.775 167.326 302.184 168.551L303 171H307.5C309.985 171 312 173.015 312 175.5V193.5C312 195.985 309.985 198 307.5 198H280.5C278.015 198 276 195.985 276 193.5V175.5C276 173.015 278.015 171 280.5 171H285L285.816 168.551ZM293.988 194.25C299.373 194.25 303.738 189.885 303.738 184.5C303.738 179.115 299.373 174.75 293.988 174.75C288.604 174.75 284.238 179.115 284.238 184.5C284.238 189.885 288.604 194.25 293.988 194.25ZM304.5 176.257C304.5 177.5 305.507 178.507 306.75 178.507C307.993 178.507 309 177.5 309 176.257C309 175.015 307.993 174.007 306.75 174.007C305.507 174.007 304.5 175.015 304.5 176.257Z"
            fill="#D6D6D6" />
    </g>
    <rect x="0.5" y="0.5" width="587" height="365" rx="7.5" stroke="#E3E3E3" />
    <defs>
        <linearGradient id="paint0_linear_14741_15949" x1="188.519" y1="0" x2="536.382" y2="0"
            gradientUnits="userSpaceOnUse">
            <stop stop-color="#181818" />
            <stop offset="1" stop-color="#181818" stop-opacity="0" />
        </linearGradient>
        <clipPath id="clip0_14741_15949">
            <rect width="588" height="366" rx="8" fill="white" />
        </clipPath>
    </defs>
</svg>`},73308:(L,J,a)=>{a.d(J,{A:()=>i});function o(v,m,g,D,l,C,d){try{var I=v[C](d),x=I.value}catch(X){g(X);return}I.done?m(x):Promise.resolve(x).then(D,l)}function i(v){return function(){var m=this,g=arguments;return new Promise(function(D,l){var C=v.apply(m,g);function d(x){o(C,D,l,d,I,"next",x)}function I(x){o(C,D,l,d,I,"throw",x)}d(void 0)})}}}}]);
