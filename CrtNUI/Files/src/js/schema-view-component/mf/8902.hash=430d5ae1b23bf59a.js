(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[8902],{86521:(m,d,o)=>{o.r(d),o.d(d,{BaseFilterPreprocessor:()=>f,HandlerBasedPreprocessor:()=>g});class f{constructor(){this.isNewStructure=e=>!!e._filterOptions}_getOrCreateModelFilters(e){const t=e.modelConfig;return t.filterAttributes||(t.filterAttributes=[]),t.filterAttributes}_setFilterToModelFilters(e,t,i){const s=this.getAttributeModelFilters(e,t);s.some(n=>n.name===i)||s.push({name:i,loadOnChange:!0})}getFilterAttributeName(e,t){return`${e}_${t}`}getAttributeModelFilters(e,t){const i=e[t];return i?.modelConfig?this._getOrCreateModelFilters(i):[]}createAttributeIfNeed(e,t,i){t in e||(e[t]=i)}setFilterAttribute(e,t,i){const s=this.getFilterAttributeName(t,i),r=e.viewModelConfig.attributes;this.createAttributeIfNeed(r,s,{value:{}}),this._setFilterToModelFilters(r,i,s)}}var l=o(73308),u=o(21018);class g{getViewConfigsByType(e,t){return(u.MetadataSchemaUtils.getViewConfigInfoByPropertyForValues("type",[e],t.viewConfig)||[]).map(i=>i?.viewConfig).filter(Boolean)}processElementsOnMetadataInit(e,t,i){var s=this;return(0,l.A)(function*(){const r=s.getViewConfigsByType(e,i);yield Promise.all(r.map(n=>t?.handle({metadata:i,viewConfig:n})))})()}processElementsOnModelInit(e,t,i,s){var r=this;return(0,l.A)(function*(){const n=r.getViewConfigsByType(e,i);yield Promise.all(n.map(a=>t?.handle({metadata:i,viewConfig:a,models:s})))})()}processElementsOnViewModelInit(e,t,i,s,r){var n=this;return(0,l.A)(function*(){const a=n.getViewConfigsByType(e,i);yield Promise.all(a.map(p=>t?.handle({metadata:i,viewConfig:p,models:s,viewModel:r})))})()}}}}]);
