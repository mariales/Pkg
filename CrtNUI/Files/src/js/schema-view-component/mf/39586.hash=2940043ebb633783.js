(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[39586],{39586:(Q,W,l)=>{l.r(W),l.d(W,{AddNextStepHandler:()=>B,AddNextStepRequest:()=>G,CHANGE_NEXT_STEPS_STATE_DEBOUNCE_MS:()=>te,CHANGE_NEXT_STEPS_STATE_EVENT_NAME:()=>z,ChangeNextStepsStateRequest:()=>K,ChangeNextStepsStateRequestHandler:()=>P,CrtApprovalTileComponent:()=>k,CrtNextStepTileComponent:()=>w,CrtNextStepsComponent:()=>m,CrtNextStepsIconComponent:()=>y,CrtNextStepsModule:()=>L,EnitityStageProgressBarSaveRecordHandler:()=>H,FILTER_NEXT_STEPS_ITEMS_EVENT_NAME:()=>O,LoadNextStepsConverter:()=>D,NEXT_STEPS_APPROVAL_ENTITY_NAME:()=>j,NEXT_STEPS_OLD_APPROVAL_ENTITY_NAME_REGEX:()=>U,NextStepTileIconUtil:()=>Z,NextStepsPreprocessor:()=>I,NextStepsService:()=>b,RELOAD_NEXT_STEPS_PREFIX:()=>F});var s=l(5960),h=l(40297),R=l(52989),q=l(10067),r=l(38495),v=l(79772),x=l(59564),S=l(96590),p=l(20822),u=l(21018);const ae={"hr-HR":JSON.parse('{"NextSteps":{"Caption":"Sljede\u0107i koraci","CompleteButtonCaption":"Zavr\u0161iti","AddNewStepMenuCaption":"Dodaj novi korak","CreateActivityButtonCaption":"Stvori zadatak","CreateEmailButtonCaption":"Kreiraj e-po\u0161tu","NoDataContainerLabel":"Ni\u0161ta za prikazivanje ovdje!","NoDataContainerDescription":"Nisu dodani koraci za ovu fazu","OwnerHint":"Dodijeljeni korisnik","OwnerRoleHint":"Dodijeljena grupa","RequiredStepHint":"Obavezni korak","ApprovalApprovedSnackbarCaption":"Zahtjev je odobren","ApprovalRejectedSnackbarCaption":"Zahtjev je odbijen"}}'),"hu-HU":JSON.parse('{"NextSteps":{"Caption":"K\xF6vetkez\u0151 l\xE9p\xE9sek","CompleteButtonCaption":"K\xE9sz","AddNewStepMenuCaption":"\xDAj l\xE9p\xE9s hozz\xE1ad\xE1sa","CreateActivityButtonCaption":"Hozzon l\xE9tre egy feladatot","CreateEmailButtonCaption":"Email l\xE9trehoz\xE1sa","NoDataContainerLabel":"Itt nincs mit mutatni!","NoDataContainerDescription":"Ehhez a szakaszhoz nincsenek hozz\xE1adva l\xE9p\xE9sek","OwnerHint":"Hozz\xE1rendelt felhaszn\xE1l\xF3","OwnerRoleHint":"Hozz\xE1rendelt csoport","RequiredStepHint":"K\xF6telez\u0151 l\xE9p\xE9s","ApprovalApprovedSnackbarCaption":"A k\xE9r\xE9st j\xF3v\xE1hagyt\xE1k","ApprovalRejectedSnackbarCaption":"A k\xE9r\xE9st elutas\xEDtott\xE1k"}}'),"zh-CN":JSON.parse('{"NextSteps":{"Caption":"\u4E0B\u4E00\u6B65()","CompleteButtonCaption":"\u5B8C\u6210","AddNewStepMenuCaption":"Add a new step","CreateActivityButtonCaption":"Create a task","CreateEmailButtonCaption":"Create an email","NoDataContainerLabel":"Nothing to show here!","NoDataContainerDescription":"There are no steps added for this stage","OwnerHint":"Assigned user","OwnerRoleHint":"Assigned group","RequiredStepHint":"Required step","ApprovalApprovedSnackbarCaption":"Request was approved","ApprovalRejectedSnackbarCaption":"Request was rejected"}}'),"sq-AL":JSON.parse('{"NextSteps":{"Caption":"Hapat e tjer\xEB","CompleteButtonCaption":"Complete","AddNewStepMenuCaption":"Add a new step","CreateActivityButtonCaption":"Krijo nj\xEB detyr\xEB","CreateEmailButtonCaption":"Krijo nj\xEB email","NoDataContainerLabel":"Nothing to show here!","NoDataContainerDescription":"Nuk ka hapa t\xEB shtuara n\xEB k\xEBt\xEB faz\xEB","OwnerHint":"Assigned user","OwnerRoleHint":"Assigned group","RequiredStepHint":"Required step","ApprovalApprovedSnackbarCaption":"Request was approved","ApprovalRejectedSnackbarCaption":"Request was rejected"}}'),"en-GB":{},"bg-BG":JSON.parse('{"NextSteps":{"Caption":"\u0421\u043B\u0435\u0434\u0432\u0430\u0449\u0438 \u0441\u0442\u044A\u043F\u043A\u0438","CompleteButtonCaption":"\u0417\u0430\u0432\u044A\u0440\u0448\u0438","AddNewStepMenuCaption":"\u0414\u043E\u0431\u0430\u0432\u0438 \u043D\u043E\u0432\u0430 \u0441\u0442\u044A\u043F\u043A\u0430","CreateActivityButtonCaption":"\u0421\u044A\u0437\u0434\u0430\u0439 \u0437\u0430\u0434\u0430\u0447\u0430","CreateEmailButtonCaption":"\u0421\u044A\u0437\u0434\u0430\u0439 \u0438\u043C\u0435\u0439\u043B","NoDataContainerLabel":"\u041D\u044F\u043C\u0430 \u043D\u0438\u0449\u043E \u0437\u0430 \u043F\u043E\u043A\u0430\u0437\u0432\u0430\u043D\u0435 \u0442\u0443\u043A!","NoDataContainerDescription":"\u041D\u044F\u043C\u0430 \u0434\u043E\u0431\u0430\u0432\u0435\u043D\u0438 \u0441\u0442\u044A\u043F\u043A\u0438 \u0437\u0430 \u0442\u043E\u0437\u0438 \u0435\u0442\u0430\u043F","OwnerHint":"\u041F\u0440\u0438\u0441\u0432\u043E\u0435\u043D \u043F\u043E\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043B","OwnerRoleHint":"\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0430 \u0433\u0440\u0443\u043F\u0430","RequiredStepHint":"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u0430 \u0441\u0442\u044A\u043F\u043A\u0430","ApprovalApprovedSnackbarCaption":"\u0417\u0430\u044F\u0432\u043A\u0430\u0442\u0430 \u0431\u0435\u0448\u0435 \u043E\u0434\u043E\u0431\u0440\u0435\u043D\u0430","ApprovalRejectedSnackbarCaption":"\u0418\u0441\u043A\u0430\u043D\u0435\u0442\u043E \u0431\u0435\u0448\u0435 \u043E\u0442\u0445\u0432\u044A\u0440\u043B\u0435\u043D\u043E"}}'),"zh-TW":JSON.parse('{"NextSteps":{"Caption":"\u4E0B\u4E00\u6B65","CompleteButtonCaption":"\u5B8C\u6210","AddNewStepMenuCaption":"\u6DFB\u52A0\u65B0\u6B65\u9AA4","CreateActivityButtonCaption":"\u5EFA\u7ACB\u4EFB\u52D9","CreateEmailButtonCaption":"\u5EFA\u7ACB\u96FB\u5B50\u90F5\u4EF6","NoDataContainerLabel":"\u8FD8\u6CA1\u6709\u8981\u663E\u793A\u7684\u5185\u5BB9!","NoDataContainerDescription":"\u6B64\u968E\u6BB5\u5C1A\u672A\u6DFB\u52A0\u4EFB\u4F55\u6B65\u9A5F","OwnerHint":"\u5DF2\u5206\u914D\u7528\u6237","OwnerRoleHint":"\u5206\u914D\u7684\u7EC4","RequiredStepHint":"\u5FC5\u586B\u9879","ApprovalApprovedSnackbarCaption":"\u8BF7\u6C42\u5DF2\u88AB\u6279\u51C6","ApprovalRejectedSnackbarCaption":"\u8BF7\u6C42\u88AB\u62D2\u7EDD"}}'),"no-NO":{},"ko-KR":JSON.parse('{"NextSteps":{"Caption":"\uB2E4\uC74C \uB2E8\uACC4","CompleteButtonCaption":"\uC644\uB8CC\uB428","AddNewStepMenuCaption":"\uC0C8 \uB2E8\uACC4 \uCD94\uAC00","CreateActivityButtonCaption":"Create a task","CreateEmailButtonCaption":"Create an email","NoDataContainerLabel":"\uC5EC\uAE30\uC11C \uBCF4\uC5EC\uC904 \uAC74 \uC5C6\uC5B4\uC694!","NoDataContainerDescription":"\uC774 \uB2E8\uACC4\uC5D0\uB294 \uCD94\uAC00\uB41C \uB2E8\uACC4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4","OwnerHint":"\uD560\uB2F9\uB41C \uC0AC\uC6A9\uC790","OwnerRoleHint":"\uD560\uB2F9\uB41C \uADF8\uB8F9","RequiredStepHint":"\uD544\uC218 \uB2E8\uACC4","ApprovalApprovedSnackbarCaption":"\uC694\uCCAD\uC774 \uC2B9\uC778\uB418\uC5C8\uC2B5\uB2C8\uB2E4","ApprovalRejectedSnackbarCaption":"\uC694\uCCAD\uC774 \uAC70\uBD80\uB418\uC5C8\uC2B5\uB2C8\uB2E4"}}'),"ja-JP":JSON.parse('{"NextSteps":{"Caption":"\u6B21\u306E\u30B9\u30C6\u30C3\u30D7","CompleteButtonCaption":"\u5B8C\u4E86","AddNewStepMenuCaption":"\u65B0\u3057\u3044\u30B9\u30C6\u30C3\u30D7\u3092\u8FFD\u52A0","CreateActivityButtonCaption":"\u30BF\u30B9\u30AF\u3092\u4F5C\u6210","CreateEmailButtonCaption":"\u30E1\u30FC\u30EB\u3092\u4F5C\u6210","NoDataContainerLabel":"\u8868\u793A\u3059\u308B\u3082\u306E\u304C\u3042\u308A\u307E\u305B\u3093\uFF01","NoDataContainerDescription":"\u3053\u306E\u30B9\u30C6\u30FC\u30B8\u306B\u8FFD\u52A0\u3055\u308C\u305F\u30B9\u30C6\u30C3\u30D7\u306F\u3042\u308A\u307E\u305B\u3093","OwnerHint":"\u30A2\u30B5\u30A4\u30F3\u3055\u308C\u305F\u30E6\u30FC\u30B6\u30FC","OwnerRoleHint":"\u30A2\u30B5\u30A4\u30F3\u3055\u308C\u305F\u30B0\u30EB\u30FC\u30D7","RequiredStepHint":"\u5FC5\u9808\u30B9\u30C6\u30C3\u30D7","ApprovalApprovedSnackbarCaption":"\u30EA\u30AF\u30A8\u30B9\u30C8\u306F\u627F\u8A8D\u3055\u308C\u307E\u3057\u305F","ApprovalRejectedSnackbarCaption":"\u30EA\u30AF\u30A8\u30B9\u30C8\u304C\u62D2\u5426\u3055\u308C\u307E\u3057\u305F"}}'),"fr-CA":{},zh:{},"vi-VN":JSON.parse('{"NextSteps":{"Caption":"C\xE1c b\u01B0\u1EDBc ti\u1EBFp theo","CompleteButtonCaption":"Ho\xE0n t\u1EA5t","AddNewStepMenuCaption":"Add a new step","CreateActivityButtonCaption":"Create a task","CreateEmailButtonCaption":"Create an email","NoDataContainerLabel":"Nothing to show here!","NoDataContainerDescription":"There are no steps added for this stage","OwnerHint":"Assigned user","OwnerRoleHint":"Assigned group","RequiredStepHint":"Required step","ApprovalApprovedSnackbarCaption":"Request was approved","ApprovalRejectedSnackbarCaption":"Request was rejected"}}'),"tr-TR":JSON.parse('{"NextSteps":{"Caption":"Sonraki ad\u0131mlar","CompleteButtonCaption":"Durduruldu","AddNewStepMenuCaption":"Yeni bir ad\u0131m ekle","CreateActivityButtonCaption":"Create a task","CreateEmailButtonCaption":"Create an email","NoDataContainerLabel":"Burada g\xF6sterilecek bir \u015Fey yok!","NoDataContainerDescription":"Bu a\u015Fama i\xE7in hi\xE7bir ad\u0131m eklenmedi","OwnerHint":"Atanan kullan\u0131c\u0131","OwnerRoleHint":"Atanan grup","RequiredStepHint":"Gerekli ad\u0131m","ApprovalApprovedSnackbarCaption":"\u0130stek onayland\u0131","ApprovalRejectedSnackbarCaption":"\u0130stek reddedildi"}}'),"th-TH":JSON.parse('{"NextSteps":{"Caption":"\u0E02\u0E31\u0E49\u0E19\u0E15\u0E2D\u0E19\u0E15\u0E48\u0E2D\u0E44\u0E1B","CompleteButtonCaption":"\u0E2A\u0E21\u0E1A\u0E39\u0E23\u0E13\u0E4C","AddNewStepMenuCaption":"Add a new step","CreateActivityButtonCaption":"Create a task","CreateEmailButtonCaption":"Create an email","NoDataContainerLabel":"Nothing to show here!","NoDataContainerDescription":"There are no steps added for this stage","OwnerHint":"Assigned user","OwnerRoleHint":"Assigned group","RequiredStepHint":"\u0E02\u0E31\u0E49\u0E19\u0E15\u0E2D\u0E19\u0E17\u0E35\u0E48\u0E08\u0E33\u0E40\u0E1B\u0E47\u0E19","ApprovalApprovedSnackbarCaption":"Request was approved","ApprovalRejectedSnackbarCaption":"Request was rejected"}}'),"sv-SE":JSON.parse('{"NextSteps":{"Caption":"N\xE4sta steg","CompleteButtonCaption":"Slutf\xF6r","AddNewStepMenuCaption":"Add a new step","CreateActivityButtonCaption":"Create a task","CreateEmailButtonCaption":"Create an email","NoDataContainerLabel":"Nothing to show here!","NoDataContainerDescription":"There are no steps added for this stage","OwnerHint":"Assigned user","OwnerRoleHint":"Assigned group","RequiredStepHint":"Obligatoriskt steg","ApprovalApprovedSnackbarCaption":"Request was approved","ApprovalRejectedSnackbarCaption":"Request was rejected"}}'),"ro-RO":JSON.parse('{"NextSteps":{"Caption":"Urm\u0103torii pa\u015Fi","CompleteButtonCaption":"Completa\u021Bi","AddNewStepMenuCaption":"Adaug\u0103 un nou pas","CreateActivityButtonCaption":"Creeaz\u0103 un task","CreateEmailButtonCaption":"Crea\u021Bi un e-mail","NoDataContainerLabel":"Nimic de afi\u0219at aici!","NoDataContainerDescription":"Nu exist\u0103 nici un pas ad\u0103ugat pentru aceast\u0103 etap\u0103","OwnerHint":"Utilizator alocat","OwnerRoleHint":"Grup alocat","RequiredStepHint":"Pasul necesar","ApprovalApprovedSnackbarCaption":"Solicitarea fost aprobat\u0103","ApprovalRejectedSnackbarCaption":"Solicitarea a fost respins\u0103"}}'),"pt-PT":JSON.parse('{"NextSteps":{"Caption":"Pr\xF3ximos passos","CompleteButtonCaption":"Completar","AddNewStepMenuCaption":"Adicionar uma nova etapa","CreateActivityButtonCaption":"Criar tarefa","CreateEmailButtonCaption":"Criar um email","NoDataContainerLabel":"Nada para mostrar aqui!","NoDataContainerDescription":"There are no steps added for this stage","OwnerHint":"Utilizador assignado","OwnerRoleHint":"Assigned group","RequiredStepHint":"Passo obrigat\xF3rio","ApprovalApprovedSnackbarCaption":"Request was approved","ApprovalRejectedSnackbarCaption":"Request was rejected"}}'),"pt-BR":JSON.parse('{"NextSteps":{"Caption":"Pr\xF3ximos passos","CompleteButtonCaption":"Completar","AddNewStepMenuCaption":"Adicionar um novo passo","CreateActivityButtonCaption":"Criar uma tarefa","CreateEmailButtonCaption":"Criar um e-mail","NoDataContainerLabel":"Nada a mostrar aqui!","NoDataContainerDescription":"N\xE3o existem passos adicionados para este est\xE1gio","OwnerHint":"Usu\xE1rio designado","OwnerRoleHint":"Grupo designado","RequiredStepHint":"Passo requerido","ApprovalApprovedSnackbarCaption":"Solicita\xE7\xE3o aprovada","ApprovalRejectedSnackbarCaption":"Solicita\xE7\xE3o rejeitada"}}'),"pl-PL":JSON.parse('{"NextSteps":{"Caption":"Nast\u0119pne kroki","CompleteButtonCaption":"Uko\u0144czono","AddNewStepMenuCaption":"Dodaj nowy krok","CreateActivityButtonCaption":"Utw\xF3rz zadanie","CreateEmailButtonCaption":"Utw\xF3rz email","NoDataContainerLabel":"Nie ma tutaj nic do pokazania!","NoDataContainerDescription":"Nie ma \u017Cadnych krok\xF3w dodanych do tego etapu","OwnerHint":"Przypisany u\u017Cytkownik","OwnerRoleHint":"Przypisana grupa","RequiredStepHint":"Wymagany krok","ApprovalApprovedSnackbarCaption":"\u017B\u0105danie zosta\u0142o zatwierdzone","ApprovalRejectedSnackbarCaption":"\u017B\u0105danie zosta\u0142o odrzucone"}}'),no:{},"nl-NL":JSON.parse('{"NextSteps":{"Caption":"Volgende stappen","CompleteButtonCaption":"Klaar","AddNewStepMenuCaption":"Add a new step","CreateActivityButtonCaption":"Create a task","CreateEmailButtonCaption":"Create an email","NoDataContainerLabel":"Nothing to show here!","NoDataContainerDescription":"There are no steps added for this stage","OwnerHint":"Assigned user","OwnerRoleHint":"Assigned group","RequiredStepHint":"Required step","ApprovalApprovedSnackbarCaption":"Request was approved","ApprovalRejectedSnackbarCaption":"Request was rejected"}}'),"lv-LV":JSON.parse('{"NextSteps":{"Caption":"N\u0101kamie so\u013Ci","CompleteButtonCaption":"Pabeigt","AddNewStepMenuCaption":"Pievienot jaunu soli","CreateActivityButtonCaption":"Izveidot uzdevumu","CreateEmailButtonCaption":"Izveidot e-pastu","NoDataContainerLabel":"\u0160eit nav ko par\u0101d\u012Bt!","NoDataContainerDescription":"Nav pievienotu so\u013Cu \u0161ai stadijai","OwnerHint":"Pie\u0161\u0137irtais lietot\u0101js","OwnerRoleHint":"Atbild\u012Bgo grupa","RequiredStepHint":"Oblig\u0101ts solis","ApprovalApprovedSnackbarCaption":"Piepras\u012Bjums tika apstiprin\u0101ts","ApprovalRejectedSnackbarCaption":"Piepras\u012Bjums tika noraid\u012Bts"}}'),"kk-KZ":{},"it-IT":JSON.parse(`{"NextSteps":{"Caption":"Prossime attivit\xE0","CompleteButtonCaption":"Completo","AddNewStepMenuCaption":"Aggiungi un nuovo passo","CreateActivityButtonCaption":"Crea un'attivit\xE0","CreateEmailButtonCaption":"Creare un Email","NoDataContainerLabel":"Niente da mostrare qui!","NoDataContainerDescription":"Non ci sono passaggi aggiunti per questa fase","OwnerHint":"Utente assegnato","OwnerRoleHint":"Gruppo assegnato","RequiredStepHint":"Passo obbligatorio","ApprovalApprovedSnackbarCaption":"La richiesta \xE8 stata approvata","ApprovalRejectedSnackbarCaption":"La richiesta \xE8 stata respinta"}}`),"id-ID":JSON.parse('{"NextSteps":{"Caption":"Next steps","CompleteButtonCaption":"Complete","AddNewStepMenuCaption":"Add a new step","CreateActivityButtonCaption":"Create a task","CreateEmailButtonCaption":"Create an email","NoDataContainerLabel":"Nothing to show here!","NoDataContainerDescription":"There are no steps added for this stage","OwnerHint":"Assigned user","OwnerRoleHint":"Assigned group","RequiredStepHint":"Required step","ApprovalApprovedSnackbarCaption":"Request was approved","ApprovalRejectedSnackbarCaption":"Request was rejected"}}'),"he-IL":JSON.parse('{"NextSteps":{"Caption":"\u05E6\u05E2\u05D3\u05D9\u05DD \u05D4\u05D1\u05D0\u05D9\u05DD","CompleteButtonCaption":"\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD","AddNewStepMenuCaption":"\u05D4\u05D5\u05E1\u05E3 \u05E9\u05DC\u05D1 \u05D7\u05D3\u05E9","CreateActivityButtonCaption":"\u05E6\u05D5\u05E8 \u05DE\u05E9\u05D9\u05DE\u05D4","CreateEmailButtonCaption":"\u05E6\u05D5\u05E8 \u05D3\u05D5\u05D0\\"\u05DC","NoDataContainerLabel":"\u05D0\u05D9\u05DF \u05DE\u05D4 \u05DC\u05D4\u05E6\u05D9\u05D2 \u05DB\u05D0\u05DF!","NoDataContainerDescription":"\u05D0\u05D9\u05DF \u05E9\u05DC\u05D1\u05D9\u05DD \u05DE\u05D5\u05E1\u05E4\u05D9\u05DD \u05E2\u05D1\u05D5\u05E8 \u05E9\u05DC\u05D1 \u05D6\u05D4","OwnerHint":"\u05DE\u05E9\u05EA\u05DE\u05E9 \u05E9\u05D4\u05D5\u05E7\u05E6\u05D4","OwnerRoleHint":"\u05E7\u05D1\u05D5\u05E6\u05D4 \u05E9\u05D4\u05D5\u05E7\u05E6\u05D0\u05D4","RequiredStepHint":"\u05E6\u05E2\u05D3 \u05E0\u05D3\u05E8\u05E9","ApprovalApprovedSnackbarCaption":"\u05D4\u05D1\u05E7\u05E9\u05D4 \u05D0\u05D5\u05E9\u05E8\u05D4","ApprovalRejectedSnackbarCaption":"\u05D4\u05D1\u05E7\u05E9\u05D4 \u05E0\u05D3\u05D7\u05EA\u05D4"}}'),"fr-FR":JSON.parse(`{"NextSteps":{"Caption":"Prochaines \xE9tapes","CompleteButtonCaption":"Effectuer","AddNewStepMenuCaption":"Ajouter une nouvelle \xE9tape","CreateActivityButtonCaption":"Cr\xE9er une t\xE2che","CreateEmailButtonCaption":"Cr\xE9er un email","NoDataContainerLabel":"Rien \xE0 afficher pour l'instant !","NoDataContainerDescription":"Il n'y a aucune \xE9tape ajout\xE9e pour cette \xE9tape","OwnerHint":"Utilisateur assign\xE9","OwnerRoleHint":"Groupe assign\xE9","RequiredStepHint":"Etapes n\xE9cessaires","ApprovalApprovedSnackbarCaption":"La demande a \xE9t\xE9 approuv\xE9e","ApprovalRejectedSnackbarCaption":"La demande a \xE9t\xE9 rejet\xE9e"}}`),"fa-IR":{},"es-ES":JSON.parse('{"NextSteps":{"Caption":"Pasos siguientes","CompleteButtonCaption":"Paso completo","AddNewStepMenuCaption":"A\xF1adir un nuevo paso","CreateActivityButtonCaption":"Crear una tarea","CreateEmailButtonCaption":"Crear un email","NoDataContainerLabel":"\xA1No hay nada que mostrar aqu\xED!","NoDataContainerDescription":"No hay pasos agregados para esta etapa","OwnerHint":"Usuario asignado","OwnerRoleHint":"Grupo asignado","RequiredStepHint":"Paso requerido","ApprovalApprovedSnackbarCaption":"Solicitud fue aprobada","ApprovalRejectedSnackbarCaption":"La solicitud fue rechazada"}}'),"de-DE":JSON.parse('{"NextSteps":{"Caption":"N\xE4chste Schritte","CompleteButtonCaption":"Fertigstellen","AddNewStepMenuCaption":"Neuen Schritt hinzuf\xFCgen","CreateActivityButtonCaption":"Neue Aufgabe","CreateEmailButtonCaption":"Neue E-Mail","NoDataContainerLabel":"Hier gibt es noch nichts zu zeigen!","NoDataContainerDescription":"F\xFCr diese Stufe wurden keine Schritte hinzugef\xFCgt","OwnerHint":"Zugewiesener Benutzer","OwnerRoleHint":"Zugewiesene Gruppe","RequiredStepHint":"Notwendiger Schritt","ApprovalApprovedSnackbarCaption":"Anfrage wurde genehmigt","ApprovalRejectedSnackbarCaption":"Anfrage wurde abgelehnt"}}'),"cs-CZ":JSON.parse('{"NextSteps":{"Caption":"Dal\u0161\xED kroky","CompleteButtonCaption":"Ukon\u010Dit","AddNewStepMenuCaption":"P\u0159idejte nov\xFD krok","CreateActivityButtonCaption":"Create a task","CreateEmailButtonCaption":"Create an email","NoDataContainerLabel":"Nic zde nen\xED k zobrazen\xED!","NoDataContainerDescription":"Pro tuto f\xE1zi nebyly p\u0159id\xE1ny \u017E\xE1dn\xE9 kroky","OwnerHint":"Assigned user","OwnerRoleHint":"Assigned group","RequiredStepHint":"Povinn\xFD krok","ApprovalApprovedSnackbarCaption":"Request was approved","ApprovalRejectedSnackbarCaption":"Request was rejected"}}'),"ar-SA":JSON.parse('{"NextSteps":{"Caption":"Next steps","CompleteButtonCaption":"Complete","AddNewStepMenuCaption":"Add a new step","CreateActivityButtonCaption":"Create a task","CreateEmailButtonCaption":"Create an email","NoDataContainerLabel":"Nothing to show here!","NoDataContainerDescription":"There are no steps added for this stage","OwnerHint":"Assigned user","OwnerRoleHint":"Assigned group","RequiredStepHint":"Required step","ApprovalApprovedSnackbarCaption":"Request was approved","ApprovalRejectedSnackbarCaption":"Request was rejected"}}'),"en-US":JSON.parse('{"NextSteps":{"Caption":"Next steps","CompleteButtonCaption":"Complete","AddNewStepMenuCaption":"Add a new step","CreateActivityButtonCaption":"Create a task","CreateEmailButtonCaption":"Create an email","NoDataContainerLabel":"Nothing to show here!","NoDataContainerDescription":"There are no steps added for this stage","OwnerHint":"Assigned user","OwnerRoleHint":"Assigned group","RequiredStepHint":"Required step","ApprovalApprovedSnackbarCaption":"Request was approved","ApprovalRejectedSnackbarCaption":"Request was rejected"}}'),"ru-RU":JSON.parse('{"NextSteps":{"Caption":"\u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435 \u0448\u0430\u0433\u0438","CompleteButtonCaption":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C","AddNewStepMenuCaption":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0448\u0430\u0433","CreateActivityButtonCaption":"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0443","CreateEmailButtonCaption":"\u0421\u043E\u0437\u0434\u0430\u0442\u044C email","NoDataContainerLabel":"\u0422\u0443\u0442 \u0435\u0449\u0435 \u043D\u0438\u0447\u0435\u0433\u043E \u043D\u0435\u0442!","NoDataContainerDescription":"\u041D\u0435\u0442 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043D\u044B\u0445 \u0448\u0430\u0433\u043E\u0432 \u0434\u043B\u044F \u044D\u0442\u043E\u0439 \u0441\u0442\u0430\u0434\u0438\u0438","OwnerHint":"\u041E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439","OwnerRoleHint":"\u0413\u0440\u0443\u043F\u043F\u0430 \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0445","RequiredStepHint":"\u041E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u0448\u0430\u0433","ApprovalApprovedSnackbarCaption":"\u0417\u0430\u044F\u0432\u043A\u0430 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0430","ApprovalRejectedSnackbarCaption":"\u0417\u0430\u044F\u0432\u043A\u0430 \u043E\u0442\u043A\u043B\u043E\u043D\u0435\u043D\u0430"}}'),"uk-UA":JSON.parse(`{"NextSteps":{"Caption":"\u041D\u0430\u0441\u0442\u0443\u043F\u043D\u0456 \u043A\u0440\u043E\u043A\u0438","CompleteButtonCaption":"\u0412\u0438\u043A\u043E\u043D\u0430\u043D\u043E","AddNewStepMenuCaption":"\u0414\u043E\u0434\u0430\u0442\u0438 \u043D\u043E\u0432\u0438\u0439 \u043A\u0440\u043E\u043A","CreateActivityButtonCaption":"\u0421\u0442\u0432\u043E\u0440\u0438\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043D\u043D\u044F","CreateEmailButtonCaption":"\u041D\u0430\u043F\u0438\u0441\u0430\u0442\u0438 email","NoDataContainerLabel":"\u041D\u0435\u043C\u0430\u0454 \u0449\u043E \u043F\u043E\u043A\u0430\u0437\u0430\u0442\u0438 \u0442\u0443\u0442!","NoDataContainerDescription":"\u041D\u0435\u043C\u0430\u0454 \u043A\u0440\u043E\u043A\u0456\u0432, \u0434\u043E\u0434\u0430\u043D\u0438\u0445 \u0434\u043B\u044F \u0446\u044C\u043E\u0433\u043E \u0435\u0442\u0430\u043F\u0443","OwnerHint":"\u041F\u0440\u0438\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0439 \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447","OwnerRoleHint":"\u0413\u0440\u0443\u043F\u0430 \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u043B\u044C\u043D\u0438\u0445","RequiredStepHint":"\u041E\u0431\u043E\u0432'\u044F\u0437\u043A\u043E\u0432\u0438\u0439 \u043A\u0440\u043E\u043A","ApprovalApprovedSnackbarCaption":"\u0417\u0430\u043F\u0438\u0442 \u0431\u0443\u043B\u043E \u043F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043D\u043E","ApprovalRejectedSnackbarCaption":"\u0417\u0430\u043F\u0438\u0442 \u0431\u0443\u043B\u043E \u0432\u0456\u0434\u0445\u0438\u043B\u0435\u043D\u043E"}}`)};var g=l(73308),e=l(59131),d=l(28399);class Z{static{this._activitySchemaName="Activity"}static{this._activityCategoryTileIconHash={"e52bd583-7825-e011-8165-00155d043204":"call","03df85bf-6b19-4dea-8463-d5d49b80bb28":"call","42c74c49-58e6-df11-971b-001d60e938c6":"meeting","2365ae4f-58e6-df11-971b-001d60e938c6":"paper-work","8b16d130-313e-4b12-a12e-73a2dd8d33cf":"visit"}}static _getActivityTileIconKey(t){if(t.TypeId?.toLowerCase()===u.ACTIVITY_TYPE_EMAIL.toLowerCase())return"email";const a=t.ActivityCategoryId;return(0,d.isEmpty)(a)?"":this._activityCategoryTileIconHash[a]}static getTileIconKey(t,n){if(t===this._activitySchemaName&&n){const a=this._getActivityTileIconKey(n);if(!(0,d.isEmpty)(a))return a}return t}}var V=l(47742);const z="ChangeNextStepsStateEvent",O="FilterNextStepsItemsEvent",F="NextStepsEvent_",j="SysApproval",U=new RegExp(".+?Visa$","i");class y extends V.CrtBaseComponent{get icon(){let t=this.tileKey?.toLowerCase();return p.ENTITY_SCHEMA_ICONS.includes(t)||(U.test(t)?t=j.toLowerCase():t="default"),`${t}-entity-icon`}static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=e.\u0275\u0275getInheritedFactory(y)))(a||y)}})()}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:y,selectors:[["crt-next-steps-icon"]],inputs:{tileKey:"tileKey"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[[3,"tileKey","icon"]],template:function(n,a){n&1&&e.\u0275\u0275element(0,"crt-entity-icon",0),n&2&&e.\u0275\u0275property("tileKey",a.tileKey)("icon",a.icon)},dependencies:[p.CrtEntityIconComponent]})}}const ie=["nextStepTile"],oe=i=>({dataType:i});function re(i,t){if(i&1&&e.\u0275\u0275element(0,"crt-skeleton-loader",5),i&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("styles",n.skeletonStyles)}}function se(i,t){i&1&&(e.\u0275\u0275elementStart(0,"div",17),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275text(2," * "),e.\u0275\u0275elementEnd()),i&2&&e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,1,"NextSteps.RequiredStepHint"))}function pe(i,t){if(i&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-link",21),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(o.onLinkClick("Contact",o.ownerId))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(i&2){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("href",n.ownerLink),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("",n.ownerName," ")}}function le(i,t){if(i&1&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),i&2){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(n.ownerName)}}function ce(i,t){if(i&1&&(e.\u0275\u0275elementStart(0,"div",18),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"crt-image-input",19),e.\u0275\u0275template(3,pe,2,2,"crt-link",20)(4,le,2,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),i&2){const n=e.\u0275\u0275reference(5),a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,6,"NextSteps.OwnerHint")),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",a.photoUrl)("placeholder",a.ownerNamePlaceholder)("colorId",a.ownerId),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.getRecordValue("entityName")!=="ProcessElement")("ngIfElse",n)}}function de(i,t){if(i&1&&(e.\u0275\u0275elementStart(0,"div",18),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"mat-icon",23,2),e.\u0275\u0275elementStart(4,"span",22),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()),i&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,3,"NextSteps.OwnerRoleHint")),e.\u0275\u0275advance(2),e.\u0275\u0275property("svgIcon","next-step-role-icon"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.ownerName)}}function me(i,t){if(i&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",6,1),e.\u0275\u0275listener("keydown.escape",function(o){return e.\u0275\u0275restoreView(n),e.\u0275\u0275resetView(o.target.blur())})("mouseenter",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.mouseEnter())})("mouseleave",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.mouseLeave())})("touchstart",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.mouseEnter())})("touchend",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.mouseLeave())}),e.\u0275\u0275elementStart(2,"div",7)(3,"div",8),e.\u0275\u0275element(4,"crt-next-steps-icon",9),e.\u0275\u0275pipe(5,"lowercase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",10),e.\u0275\u0275listener("keydown.enter",function(o){e.\u0275\u0275restoreView(n);const c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onTileCaptionClick(o))})("click",function(o){e.\u0275\u0275restoreView(n);const c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onTileCaptionClick(o))}),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,se,3,3,"div",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",12),e.\u0275\u0275template(10,ce,6,8,"div",13)(11,de,6,5,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(13,"div",14),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"dateTimeFormat"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",15)(17,"crt-button",16),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.onCompleteClicked())}),e.\u0275\u0275elementEnd()()()()}if(i&2){const n=e.\u0275\u0275reference(12),a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("tileKey",e.\u0275\u0275pipeBind1(5,8,a.tileIconKey)),e.\u0275\u0275advance(2),e.\u0275\u0275property("title",a.getRecordValue("caption")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",a.getRecordValue("caption")," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.getRecordValue("isRequired")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!a.getRecordValue("isOwnerRole"))("ngIfElse",n),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(15,10,a.getRecordValue("date"),e.\u0275\u0275pureFunction1(15,oe,a.dateValueType))," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("caption",e.\u0275\u0275pipeBind1(18,13,"NextSteps.CompleteButtonCaption"))}}var f;(function(i){i.RunProcess="runProcess",i.OpenSpecificPage="openSpecificPage",i.OpenDefaultPage="openDefaultPage",i.EditEmail="editEmail"})(f||(f={}));let w=class J extends p.CrtGalleryBaseItemComponent{constructor(t){super(t),this.skeletonStyles={height:"60px",width:"60px"},this.dateValueType=r.DataValueType.Date,this._handleKeyDown=n=>{n.key==="Escape"&&this._isHover&&(this._isBlockedHover=!0,this.mouseLeave())},this._window=this.injector.get(S.WINDOW_TOKEN),this._window.addEventListener("keydown",this._handleKeyDown)}_runProcess(t){return(0,g.A)(function*(){const n={type:"crt.OpenProcessPageRequest",processElementUId:t,$context:null};yield r.HandlerChainService.instance.process(n)})()}_openSpecificPage(t,n){return(0,g.A)(function*(){const a={type:"crt.OpenPageRequest",schemaName:t,modelInitConfigs:[{recordId:n,action:r.ModelInPageAction.Edit}],$context:null};yield r.HandlerChainService.instance.process(a)})()}_openDefaultPage(t,n){return(0,g.A)(function*(){const a={type:"crt.UpdateRecordRequest",entityName:t,recordId:n,$context:null};yield r.HandlerChainService.instance.process(a)})()}_editEmail(t){return(0,g.A)(function*(){const n={type:"crt.CreateEmailRequest",recordId:t,$context:null};yield r.HandlerChainService.instance.process(n)})()}_getCompleteAction(){const t=this.getRecordValue("entityName");if(t==="ProcessElement")return f.RunProcess;const n=this.getRecordValue("processElementId"),a=this.getRecordValue("additionalInfo");if(t==="Activity"&&a?.TypeId.toLowerCase()===u.ACTIVITY_TYPE_EMAIL.toLowerCase())return f.EditEmail;if(!(0,d.isEmpty)(n)&&n!==r.EMPTY_GUID&&a?.UserTaskEntitySchemaName!=="Activity")return f.RunProcess;const o=this.getRecordValue("tileConfig");return(0,d.isEmpty)(o?.editPage)?f.OpenDefaultPage:f.OpenSpecificPage}get photoUrl(){const t=this.getRecordValue("owner")?.primaryImageValue;return t&&t!==r.EMPTY_GUID?(0,u.getImageFullUrlById)(t):""}get ownerId(){return this.getRecordValue("owner")?.value}get ownerLink(){const t=this.ownerId;return t?(0,u.getEntityUrl)("Contact",t):""}get ownerName(){return this.getRecordValue("owner")?.displayValue||""}get ownerNamePlaceholder(){const t=this.ownerName;return(0,d.isEmpty)(t)?"":t[0]}get tileIconKey(){const t=this.getRecordValue("entityName"),n=this.getRecordValue("additionalInfo");return Z.getTileIconKey(t,n)}onLinkClick(t,n){var a=this;return(0,g.A)(function*(){yield a._openDefaultPage(t,n)})()}onTileCaptionClick(t){var n=this;return(0,g.A)(function*(){t.stopPropagation();const a=n.getRecordValue("entityName"),o=n.getRecordValue("id");yield n._openDefaultPage(a,o)})()}onCompleteClicked(){var t=this;return(0,g.A)(function*(){const n=t.getRecordValue("id"),a=t.getRecordValue("processElementId"),o=t.getRecordValue("tileConfig"),c=t.getRecordValue("entityName");switch(t._getCompleteAction()){case f.RunProcess:yield t._runProcess(a||n);return;case f.OpenSpecificPage:yield t._openSpecificPage(o.editPage,n);return;case f.EditEmail:yield t._editEmail(n);return;default:yield t._openDefaultPage(c,n);return}})()}mouseEnter(){this._isHover=!0,this._isBlockedHover||this.nextStepTile.nativeElement.classList.add("hover")}mouseLeave(){this._isHover=this._isBlockedHover=!1,this.nextStepTile.nativeElement.classList.remove("hover")}ngOnDestroy(){this._window.removeEventListener("keydown",this._handleKeyDown)}static{this.\u0275fac=function(n){return new(n||J)(e.\u0275\u0275directiveInject(e.Injector))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:J,selectors:[["crt-next-step-tile"]],viewQuery:function(n,a){if(n&1&&e.\u0275\u0275viewQuery(ie,5,e.ElementRef),n&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(a.nextStepTile=o.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[["nextStepsGalleryItem",""],["nextStepTile",""],["ownerRole",""],["ownerLabel",""],[3,"styles",4,"ngIf","ngIfElse"],[3,"styles"],[1,"next-step-tile",3,"keydown.escape","mouseenter","mouseleave","touchstart","touchend"],[1,"next-step-tile-header"],[1,"next-step-tile-icon"],[3,"tileKey"],["tabindex","0",1,"next-step-tile-caption",3,"keydown.enter","click","title"],["class","next-step-tile-required",3,"title",4,"ngIf"],[1,"next-step-tile-footer"],["class","next-step-tile-owner",3,"title",4,"ngIf","ngIfElse"],[1,"next-step-tile-date"],[1,"next-step-tile-actions"],["size","medium","color","accent",3,"clicked","caption"],[1,"next-step-tile-required",3,"title"],[1,"next-step-tile-owner",3,"title"],["readonly","true","placeholderMode","abbreviation","borderRadius","large","positioning","scale-down","size","none",1,"next-step-tile-owner-photo",3,"value","placeholder","colorId"],["mode","'preventDefault'","underlining","hover","class","next-step-tile-owner-link",3,"href","clicked",4,"ngIf","ngIfElse"],["mode","'preventDefault'","underlining","hover",1,"next-step-tile-owner-link",3,"clicked","href"],[1,"next-step-tile-owner-text"],[1,"next-step-tile-owner-photo",3,"svgIcon"]],template:function(n,a){if(n&1&&e.\u0275\u0275template(0,re,1,1,"crt-skeleton-loader",4)(1,me,19,17,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),n&2){const o=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",a.loading)("ngIfElse",o)}},dependencies:[p.CrtButtonComponent,h.NgIf,p.CrtLinkComponent,R.MatIcon,p.CrtImageInputComponent,x.SkeletonLoaderComponent,y,h.LowerCasePipe,v.TranslatePipe,u.DateTimeFormatPipe],styles:[`body{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}.next-steps .crt-gallery-items-wrap{gap:8px;padding:0;container-type:inline-size}.next-step-tile{height:96px;max-width:100%;border:1px solid var(--crt-palette-interaction-900);border-radius:8px;overflow:auto;background:var(--crt-palette-background-400);padding:5px}.next-step-tile.hover,.next-step-tile:focus-within{background-color:var(--crt-palette-interaction-200)}.next-step-tile.hover .next-step-tile-actions,.next-step-tile:focus-within .next-step-tile-actions{width:100px;display:inline-block}.next-step-tile.hover .next-step-tile-date,.next-step-tile:focus-within .next-step-tile-date{display:none}.next-step-tile-header{display:flex}.next-step-tile-footer{display:flex;margin:12px 8px 0;align-items:center;height:24px}.next-step-tile-icon{display:inline-block;width:20px;height:20px;margin:6px}.next-step-tile-icon .icon{width:20px!important;height:20px!important}.next-step-tile-required{float:right;color:var(--crt-palette-error-500);font-size:large;line-height:.7em}.next-step-tile-caption{font-family:var(--crt-body-1-font-family);font-size:var(--crt-body-1-font-size);line-height:var(--crt-body-1-line-height);font-weight:var(--crt-body-1-font-weight);letter-spacing:var(--crt-body-1-letter-spacing);text-transform:var(--crt-body-1-text-transform);-webkit-font-smoothing:antialiased;width:calc(100% - 32px);overflow:hidden;height:2.8em;margin-top:6px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;text-overflow:ellipsis;cursor:pointer}.next-step-tile-caption:focus-visible{box-shadow:inset 0 0 0 1px var(--focus-outline-outer-color),inset 0 0 0 2px var(--focus-outline-inner-color);outline:none;border-radius:4px}.next-step-tile-owner{font-family:var(--crt-caption-font-family);font-size:var(--crt-caption-font-size);line-height:var(--crt-caption-line-height);font-weight:var(--crt-caption-font-weight);letter-spacing:var(--crt-caption-letter-spacing);text-transform:var(--crt-caption-text-transform);-webkit-font-smoothing:antialiased;width:100%;display:inline-flex;overflow:hidden;margin-inline-end:3em}.next-step-tile-owner-photo{width:16px;display:flex;height:16px;margin-inline-end:8px}.next-step-tile-owner-photo .placeholder-abbreviation.no-photo{min-width:unset!important;min-height:unset!important;line-height:16px;height:16px;width:16px;font-size:8px}.next-step-tile-owner-photo img{object-fit:unset!important}.next-step-tile-owner-link{max-width:calc(100% - 24px)!important}.next-step-tile-owner-text{max-width:calc(100% - 24px);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.next-step-tile-date{font-family:var(--crt-caption-font-family);font-size:var(--crt-caption-font-size);line-height:var(--crt-caption-line-height);font-weight:var(--crt-caption-font-weight);letter-spacing:var(--crt-caption-letter-spacing);text-transform:var(--crt-caption-text-transform);-webkit-font-smoothing:antialiased;color:var(--crt-palette-label-500);width:100px;text-align:end;display:inline-block}.next-step-tile-actions{display:none}@container (max-width: 472px){.next-steps .crt-gallery-view-item-wrap{width:100%}}@container (min-width: 472px) and (max-width: 712px){.next-steps .crt-gallery-view-item-wrap{width:calc((100% - 8px)/2)}}@container (min-width: 712px) and (max-width: 952px){.next-steps .crt-gallery-view-item-wrap{width:calc((100% - 16px) / 3)}}@container (min-width: 952px) and (max-width: 1192px){.next-steps .crt-gallery-view-item-wrap{width:calc((100% - 24px)/4)}}@container (min-width: 1192px) and (max-width: 1432px){.next-steps .crt-gallery-view-item-wrap{width:calc((100% - 32px)/5)}}@container (min-width: 1432px) and (max-width: 2008px){.next-steps .crt-gallery-view-item-wrap{width:calc((100% - 40px) / 6)}}@container (min-width: 2008px){.next-steps .next-step-tile{max-width:280px}}
`],encapsulation:2,changeDetection:0})}};w=(0,s.__decorate)([(0,r.CrtViewElement)({selector:"crt-next-step-tile",type:"crt.NextStepTile",reuseStrategy:r.ViewElementReuseStrategy.Reuse}),(0,s.__metadata)("design:paramtypes",[e.Injector])],w);var ue=l(85638),ee=l(78814),T=l(62278);class N extends V.CrtBaseComponent{constructor(){super(...arguments),this.labelText=""}static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=e.\u0275\u0275getInheritedFactory(N)))(a||N)}})()}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:N,selectors:[["crt-base-next-steps-snackbar-label"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:3,consts:[[1,"message-snackbar-label-container"],["labelTextAlign","center"]],template:function(n,a){n&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"crt-label",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()),n&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,a.labelText)))},dependencies:[p.CrtLabelComponent,v.TranslatePipe],styles:[`.message-action-snackbar-container{--mdc-snackbar-container-color: var(--crt-color-primary-black);opacity:.6!important}.message-action-snackbar-container .message-snackbar-label-container{width:100%}.message-action-snackbar-container .message-snackbar-label-container .crt-label{width:100%;color:var(--crt-palette-background-50)}
`],encapsulation:2})}}class A extends N{constructor(){super(...arguments),this.labelText="NextSteps.ApprovalApprovedSnackbarCaption"}static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=e.\u0275\u0275getInheritedFactory(A)))(a||A)}})()}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:A,selectors:[["crt-approval-approved-snackbar-label"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:3,consts:[[1,"message-snackbar-label-container"],["labelTextAlign","center"]],template:function(n,a){n&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"crt-label",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()),n&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,a.labelText)))},dependencies:[p.CrtLabelComponent,v.TranslatePipe],styles:[`.message-action-snackbar-container{--mdc-snackbar-container-color: var(--crt-color-primary-black);opacity:.6!important}.message-action-snackbar-container .message-snackbar-label-container{width:100%}.message-action-snackbar-container .message-snackbar-label-container .crt-label{width:100%;color:var(--crt-palette-background-50)}
`],encapsulation:2})}}class E extends N{constructor(){super(...arguments),this.labelText="NextSteps.ApprovalRejectedSnackbarCaption"}static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=e.\u0275\u0275getInheritedFactory(E)))(a||E)}})()}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:E,selectors:[["crt-approval-rejected-snackbar-label"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:3,consts:[[1,"message-snackbar-label-container"],["labelTextAlign","center"]],template:function(n,a){n&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"crt-label",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()),n&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,a.labelText)))},dependencies:[p.CrtLabelComponent,v.TranslatePipe],styles:[`.message-action-snackbar-container{--mdc-snackbar-container-color: var(--crt-color-primary-black);opacity:.6!important}.message-action-snackbar-container .message-snackbar-label-container{width:100%}.message-action-snackbar-container .message-snackbar-label-container .crt-label{width:100%;color:var(--crt-palette-background-50)}
`],encapsulation:2})}}const Ce=["nextStepTile"],xe=i=>({dataType:i});function ge(i,t){if(i&1&&e.\u0275\u0275element(0,"crt-skeleton-loader",4),i&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("styles",n.skeletonStyles)}}function _e(i,t){i&1&&(e.\u0275\u0275elementStart(0,"div",17),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275text(2," * "),e.\u0275\u0275elementEnd()),i&2&&e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,1,"NextSteps.RequiredStepHint"))}function he(i,t){if(i&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",18),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"crt-image-input",19),e.\u0275\u0275elementStart(3,"crt-link",20),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.onLinkClick("Contact",o.ownerId))}),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()}if(i&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,6,"NextSteps.OwnerHint")),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",n.photoUrl)("placeholder",n.ownerNamePlaceholder)("colorId",n.ownerId),e.\u0275\u0275advance(),e.\u0275\u0275property("href",n.ownerLink),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("",n.ownerName," ")}}function ve(i,t){if(i&1&&(e.\u0275\u0275elementStart(0,"div",18),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"mat-icon",21,2),e.\u0275\u0275elementStart(4,"span",22),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()),i&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,3,"NextSteps.OwnerRoleHint")),e.\u0275\u0275advance(2),e.\u0275\u0275property("svgIcon","next-step-role-icon"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.ownerName)}}function Se(i,t){if(i&1){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5,1),e.\u0275\u0275listener("keydown.escape",function(o){return e.\u0275\u0275restoreView(n),e.\u0275\u0275resetView(o.target.blur())})("mouseenter",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.mouseEnter())})("mouseleave",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.mouseLeave())})("touchstart",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.mouseEnter())})("touchend",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.mouseLeave())}),e.\u0275\u0275elementStart(2,"div",6)(3,"div",7),e.\u0275\u0275element(4,"crt-next-steps-icon",8),e.\u0275\u0275pipe(5,"lowercase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",9),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,_e,3,3,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",11),e.\u0275\u0275template(10,he,5,8,"div",12)(11,ve,6,5,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(13,"div",13),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"dateTimeFormat"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",14)(17,"crt-button",15),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.onApproveClicked())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"crt-button",16),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.onRejectClicked())}),e.\u0275\u0275elementEnd()()()()}if(i&2){const n=e.\u0275\u0275reference(12),a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("tileKey",e.\u0275\u0275pipeBind1(5,11,a.tileIconKey)),e.\u0275\u0275advance(2),e.\u0275\u0275property("title",a.getRecordValue("caption")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",a.getRecordValue("caption")," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.getRecordValue("isRequired")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!a.getRecordValue("isOwnerRole"))("ngIfElse",n),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(15,13,a.getRecordValue("date"),e.\u0275\u0275pureFunction1(24,xe,a.dateValueType))," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ariaLabel",e.\u0275\u0275pipeBind1(18,16,"Approvals.ApproveButtonLabel"))("title",e.\u0275\u0275pipeBind1(19,18,"Approvals.ApproveButtonLabel")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ariaLabel",e.\u0275\u0275pipeBind1(21,20,"Approvals.RejectButtonLabel"))("title",e.\u0275\u0275pipeBind1(22,22,"Approvals.RejectButtonLabel"))}}let k=class $ extends w{constructor(t){super(t),this._snackBarDisplayTime=3e3,this.skeletonStyles={height:"60px",width:"60px"},this._sysSettingsService=t.get(ue.SysSettingsService),this._customEventService=t.get(S.CustomEventService),this._snackBar=t.get(q.MatSnackBar)}_getRequest(t,n){const a={id:this.getRecordValue("id"),schemaName:this.getRecordValue("entityName"),actionType:t};return{type:n,config:a,approvalChangedHandlerAttributeName:null,$context:null}}_processRequest(t){return(0,g.A)(function*(){return yield r.HandlerChainService.instance.process(t)})()}_showSnackbar(t){this._snackBar.openFromComponent(t,{duration:this._snackBarDisplayTime,panelClass:"message-action-snackbar-container"})}onApproveClicked(){var t=this;return(0,g.A)(function*(){const n=yield(0,T.lastValueFrom)(t._sysSettingsService.getByCode("AcceptApprovalWithoutComment")),a=(0,d.isEmpty)(n)?!0:n.value,o=a?"crt.ApprovalActionHandlerRequest":"crt.ApprovalConfirmationHandlerRequest",c=t._getRequest(ee.ApprovalActionType.Approve,o),C=c;t._processRequest(C).then(_=>{_&&(t._customEventService.createOutboundChannel(O).next(C.config.id),t._showSnackbar(A))})})()}onRejectClicked(){const t=this._getRequest(ee.ApprovalActionType.Reject,"crt.ApprovalConfirmationHandlerRequest");this._processRequest(t).then(n=>{n&&(this._customEventService.createOutboundChannel(O).next(t.config.id),this._showSnackbar(E))})}static{this.\u0275fac=function(n){return new(n||$)(e.\u0275\u0275directiveInject(e.Injector))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:$,selectors:[["crt-approval-tile"]],viewQuery:function(n,a){if(n&1&&e.\u0275\u0275viewQuery(Ce,5,e.ElementRef),n&2){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(a.nextStepTile=o.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:S.CustomEventService,useFactory:t=>new S.CustomEventService(t),deps:[h.DOCUMENT]}]),e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[["approvalTile",""],["nextStepTile",""],["ownerRole",""],[3,"styles",4,"ngIf","ngIfElse"],[3,"styles"],[1,"next-step-tile",3,"keydown.escape","mouseenter","mouseleave","touchstart","touchend"],[1,"next-step-tile-header"],[1,"next-step-tile-icon"],[3,"tileKey"],["tabindex","0",1,"next-step-tile-caption",3,"title"],["class","next-step-tile-required",3,"title",4,"ngIf"],[1,"next-step-tile-footer"],["class","next-step-tile-owner approval-tile",3,"title",4,"ngIf","ngIfElse"],[1,"next-step-tile-date"],[1,"next-step-tile-actions","approval-tile"],["icon","approve-visa-icon","iconPosition","only-icon","color","accent",1,"approve-visa-icon",3,"clicked","ariaLabel","title"],["icon","reject-visa-icon","iconPosition","only-icon","color","warn",1,"reject-visa-icon",3,"clicked","ariaLabel","title"],[1,"next-step-tile-required",3,"title"],[1,"next-step-tile-owner","approval-tile",3,"title"],["readonly","true","placeholderMode","abbreviation","borderRadius","large","positioning","scale-down","size","none",1,"next-step-tile-owner-photo",3,"value","placeholder","colorId"],["mode","'preventDefault'","underlining","hover",1,"next-step-tile-owner-link",3,"clicked","href"],[1,"next-step-tile-owner-photo",3,"svgIcon"],[1,"next-step-tile-owner-text"]],template:function(n,a){if(n&1&&e.\u0275\u0275template(0,ge,1,1,"crt-skeleton-loader",3)(1,Se,23,26,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),n&2){const o=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",a.loading)("ngIfElse",o)}},dependencies:[p.CrtButtonComponent,h.NgIf,p.CrtLinkComponent,R.MatIcon,p.CrtImageInputComponent,x.SkeletonLoaderComponent,y,h.LowerCasePipe,v.TranslatePipe,u.DateTimeFormatPipe],styles:[`.next-step-tile.hover .next-step-tile-actions.approval-tile,.next-step-tile:focus-within .next-step-tile-actions.approval-tile{display:flex;gap:8px}.next-step-tile-actions.approval-tile{margin-bottom:13px}.next-step-tile .approve-visa-icon,.next-step-tile .reject-visa-icon{width:24px;margin-top:12px}.next-step-tile .approve-visa-icon .crt-button,.next-step-tile .reject-visa-icon .crt-button{height:24px;padding:0 4px!important}
`,`body{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}.next-steps .crt-gallery-items-wrap{gap:8px;padding:0;container-type:inline-size}.next-step-tile{height:96px;max-width:100%;border:1px solid var(--crt-palette-interaction-900);border-radius:8px;overflow:auto;background:var(--crt-palette-background-400);padding:5px}.next-step-tile.hover,.next-step-tile:focus-within{background-color:var(--crt-palette-interaction-200)}.next-step-tile.hover .next-step-tile-actions,.next-step-tile:focus-within .next-step-tile-actions{width:100px;display:inline-block}.next-step-tile.hover .next-step-tile-date,.next-step-tile:focus-within .next-step-tile-date{display:none}.next-step-tile-header{display:flex}.next-step-tile-footer{display:flex;margin:12px 8px 0;align-items:center;height:24px}.next-step-tile-icon{display:inline-block;width:20px;height:20px;margin:6px}.next-step-tile-icon .icon{width:20px!important;height:20px!important}.next-step-tile-required{float:right;color:var(--crt-palette-error-500);font-size:large;line-height:.7em}.next-step-tile-caption{font-family:var(--crt-body-1-font-family);font-size:var(--crt-body-1-font-size);line-height:var(--crt-body-1-line-height);font-weight:var(--crt-body-1-font-weight);letter-spacing:var(--crt-body-1-letter-spacing);text-transform:var(--crt-body-1-text-transform);-webkit-font-smoothing:antialiased;width:calc(100% - 32px);overflow:hidden;height:2.8em;margin-top:6px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;text-overflow:ellipsis;cursor:pointer}.next-step-tile-caption:focus-visible{box-shadow:inset 0 0 0 1px var(--focus-outline-outer-color),inset 0 0 0 2px var(--focus-outline-inner-color);outline:none;border-radius:4px}.next-step-tile-owner{font-family:var(--crt-caption-font-family);font-size:var(--crt-caption-font-size);line-height:var(--crt-caption-line-height);font-weight:var(--crt-caption-font-weight);letter-spacing:var(--crt-caption-letter-spacing);text-transform:var(--crt-caption-text-transform);-webkit-font-smoothing:antialiased;width:100%;display:inline-flex;overflow:hidden;margin-inline-end:3em}.next-step-tile-owner-photo{width:16px;display:flex;height:16px;margin-inline-end:8px}.next-step-tile-owner-photo .placeholder-abbreviation.no-photo{min-width:unset!important;min-height:unset!important;line-height:16px;height:16px;width:16px;font-size:8px}.next-step-tile-owner-photo img{object-fit:unset!important}.next-step-tile-owner-link{max-width:calc(100% - 24px)!important}.next-step-tile-owner-text{max-width:calc(100% - 24px);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.next-step-tile-date{font-family:var(--crt-caption-font-family);font-size:var(--crt-caption-font-size);line-height:var(--crt-caption-line-height);font-weight:var(--crt-caption-font-weight);letter-spacing:var(--crt-caption-letter-spacing);text-transform:var(--crt-caption-text-transform);-webkit-font-smoothing:antialiased;color:var(--crt-palette-label-500);width:100px;text-align:end;display:inline-block}.next-step-tile-actions{display:none}@container (max-width: 472px){.next-steps .crt-gallery-view-item-wrap{width:100%}}@container (min-width: 472px) and (max-width: 712px){.next-steps .crt-gallery-view-item-wrap{width:calc((100% - 8px)/2)}}@container (min-width: 712px) and (max-width: 952px){.next-steps .crt-gallery-view-item-wrap{width:calc((100% - 16px) / 3)}}@container (min-width: 952px) and (max-width: 1192px){.next-steps .crt-gallery-view-item-wrap{width:calc((100% - 24px)/4)}}@container (min-width: 1192px) and (max-width: 1432px){.next-steps .crt-gallery-view-item-wrap{width:calc((100% - 32px)/5)}}@container (min-width: 1432px) and (max-width: 2008px){.next-steps .crt-gallery-view-item-wrap{width:calc((100% - 40px) / 6)}}@container (min-width: 2008px){.next-steps .next-step-tile{max-width:280px}}
`],encapsulation:2,changeDetection:0})}};k=(0,s.__decorate)([(0,r.CrtViewElement)({selector:"crt-approval-tile",type:"crt.ApprovalTile",reuseStrategy:r.ViewElementReuseStrategy.Reuse}),(0,s.__metadata)("design:paramtypes",[e.Injector])],k);var M=l(10850);const fe=()=>["next-step-activity-icon","next-step-call-icon","next-step-feed-icon","next-step-email-icon"];function ye(i,t){if(i&1&&(e.\u0275\u0275elementStart(0,"div",15),e.\u0275\u0275element(1,"crt-button",16),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),i&2){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("iconPosition","left-icon")("iconSize","large")("icon","add-button-icon")("menuItems",n.addNextStepsItems)("color","default")("caption",e.\u0275\u0275pipeBind1(2,6,"NextSteps.AddNewStepMenuCaption"))}}function we(i,t){if(i&1&&(e.\u0275\u0275elementStart(0,"div",10),e.\u0275\u0275element(1,"crt-lottie",11)(2,"crt-label",12),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275element(4,"crt-label",13),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275template(6,ye,3,8,"div",14),e.\u0275\u0275elementEnd()),i&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("config",n.noDataAnimationOptions),e.\u0275\u0275advance(),e.\u0275\u0275property("caption",e.\u0275\u0275pipeBind1(3,4,"NextSteps.NoDataContainerLabel")),e.\u0275\u0275advance(2),e.\u0275\u0275property("caption",e.\u0275\u0275pipeBind1(5,6,"NextSteps.NoDataContainerDescription")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.canAdd)}}function Ne(i,t){if(i&1&&e.\u0275\u0275element(0,"crt-gallery",17),i&2){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("items",n.dataItems)("itemConfig",n.galleryItemConfig)("selectable",!0)("loading",n.loading)("mode",n.galleryItemViewMode.ViewElementConfig)}}function be(i,t){if(i&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",8),e.\u0275\u0275template(2,we,7,8,"div",9)(3,Ne,1,5,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),i&2){const n=e.\u0275\u0275reference(4),a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(a.dataItems==null?null:a.dataItems.length)===0)("ngIfElse",n)}}function Ae(i,t){if(i&1&&e.\u0275\u0275element(0,"mat-icon",31),i&2){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("svgIcon",n)}}function Ee(i,t){if(i&1&&e.\u0275\u0275element(0,"crt-skeleton-loader",32),i&2){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("styles",n.skeletonConfig.icon)}}function ke(i,t){i&1&&e.\u0275\u0275element(0,"div",33)}function Ie(i,t){if(i&1&&e.\u0275\u0275element(0,"crt-skeleton-loader",34),i&2){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("styles",n.skeletonConfig.title)}}function Re(i,t){i&1&&e.\u0275\u0275element(0,"div",35)}function Te(i,t){if(i&1&&e.\u0275\u0275element(0,"crt-skeleton-loader",36),i&2){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("styles",n.skeletonConfig.title)}}function Oe(i,t){i&1&&e.\u0275\u0275element(0,"div",37)}function je(i,t){if(i&1&&e.\u0275\u0275element(0,"crt-skeleton-loader",38),i&2){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("styles",n.skeletonConfig.footerIcon)}}function Me(i,t){i&1&&e.\u0275\u0275element(0,"div",39)}function De(i,t){i&1&&e.\u0275\u0275element(0,"div",39)}function Be(i,t){if(i&1&&e.\u0275\u0275element(0,"crt-skeleton-loader",40),i&2){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("styles",n.skeletonConfig.ownerName)}}function Pe(i,t){if(i&1&&(e.\u0275\u0275elementStart(0,"div",21)(1,"div",22),e.\u0275\u0275template(2,Ae,1,1,"mat-icon",23)(3,Ee,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(5,"div",24),e.\u0275\u0275template(6,ke,1,0,"div",25)(7,Ie,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(9,Re,1,0,"div",26)(10,Te,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",27),e.\u0275\u0275template(13,Oe,1,0,"div",28)(14,je,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(16,"div",29),e.\u0275\u0275template(17,Me,1,0,"div",30)(18,De,1,0,"div",30)(19,Be,1,1,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()),i&2){const n=e.\u0275\u0275reference(4),a=e.\u0275\u0275reference(8),o=e.\u0275\u0275reference(11),c=e.\u0275\u0275reference(15),C=e.\u0275\u0275reference(20),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.isDesignTime)("ngIfElse",n),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",_.isDesignTime)("ngIfElse",a),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.isDesignTime)("ngIfElse",o),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",_.isDesignTime)("ngIfElse",c),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",_.isDesignTime)("ngIfElse",C),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.isDesignTime)("ngIfElse",C)}}function He(i,t){if(i&1&&(e.\u0275\u0275elementStart(0,"div",18)(1,"div",19),e.\u0275\u0275template(2,Pe,21,12,"div",20),e.\u0275\u0275elementEnd()()),i&2){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass","next-steps-plug "+(n.isDesignTime?"design-time":"runtime")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(2,fe))}}const te=500;let m=class X extends V.CrtBaseComponent{set nextSteps(t){if(!t)return;this.dataLoading=!1;const n=new M.BaseViewModelCollection(this._viewModelGenerator);t.forEach(a=>{n.push({...a,tileConfig:this._getTileConfig(a)})}),this.dataItems=n}set masterSchemaId(t){t&&(this._masterSchemaId=t)}set masterSchemaName(t){t&&(this._masterSchemaName=t)}set galleryItemConfig(t){this._galleryItemConfig=t}get galleryItemConfig(){return{...this._defaultGalleryItemConfig,...this._galleryItemConfig}}set tilesMap(t){const n=Object.assign({},this._defaultTilesMap);Object.keys(t).forEach(a=>{n[a]={...n[a],...t[a]}}),this._tilesMap=n}get tilesMap(){return(0,d.isEmpty)(this._tilesMap)&&(this._tilesMap={...this._defaultTilesMap}),this._tilesMap}get isDesignTime(){return this._isDesignTime??!1}get canAdd(){return this.cardState===r.ModelInPageAction.Edit}set bindingColumns(t){this._bindingColumns=t,this._setAddNextStepsItems()}get addNextStepsItems(){return this._addNextStepsItems||this._setAddNextStepsItems(),this._addNextStepsItems}constructor(t,n,a,o,c){super(t),this._viewModelGenerator=n,this._isDesignTime=a,this._customEventService=o,this._translateService=c,this._subscriptions=[],this._defaultTilesMap={[j]:{tileClassName:"crt.ApprovalTile"},Activity:{tileClassName:"crt.NextStepTile",editPage:"CrtActivityMiniPage"},default:{tileClassName:"crt.NextStepTile"}},this._defaultGalleryItemConfig={viewElementConfigFactory:C=>({type:this._getViewElementType(C),record:C})},this._reloadNextStepsDebounceFn=(0,d.debounce)(()=>this._reloadNextSteps(),te),this.galleryItemViewMode=p.GalleryItemViewMode,this.skeletonConfig={icon:{height:"20px",width:"20px",margin:0,"vertical-align":"top"},footerIcon:{height:"16px",width:"16px",margin:0,"vertical-align":"top"},title:{height:"16px","vertical-align":"top","border-radius":"4px"},ownerName:{height:"12px",width:"46px","vertical-align":"top","border-radius":"4px"}},this.dataItems=[],this.noDataAnimationOptions={animationData:()=>l.e(43691).then(l.t.bind(l,43691,19)),autoplay:!0,loop:!1},this.reloadNextStepsChange=new e.EventEmitter,this.dataLoading=!0,this._liveEditingService=t.get(M.ModelLiveEditingNotificationService)}_reloadNextSteps(){(0,d.isEmpty)(this._masterSchemaId)||(0,d.isEmpty)(this._masterSchemaName)||this._masterSchemaName==="#DataSourceEntityName()#"||this.reloadNextStepsChange.emit(F+new Date)}_setAddNextStepsItems(){this._addNextStepsItems=[{caption:this._translateService.instant("NextSteps.CreateActivityButtonCaption"),type:"crt.MenuItem",name:"AddTask",clicked:{request:"crt.AddNextStepRequest",params:{entityName:"Activity"}}},{caption:this._translateService.instant("NextSteps.CreateEmailButtonCaption"),type:"crt.MenuItem",name:"AddEmail",clicked:{request:"crt.CreateEmailRequest",params:{bindingColumns:this._bindingColumns}}}]}_getTileConfig(t){if((0,d.isEmpty)(t?.entityName))return this.tilesMap.default;const n=this.tilesMap[t.entityName];return n||(U.test(t.entityName)?this.tilesMap[j]:this.tilesMap.default)}_getViewElementType(t){const n=this._getTileConfig(t),a=this.tilesMap.default;return n.tileClassName||a.tileClassName}_subscribeToEvents(){this._subscriptions.push(this._customEventService.subscribe(z).subscribe(()=>this._reloadNextStepsDebounceFn())),this._subscriptions.push(this._liveEditingService.liveEditingEvent$.subscribe(t=>{t.entitySchemaName==="Activity"&&this._reloadNextStepsDebounceFn()})),this._subscriptions.push(this._customEventService.subscribe(O).subscribe(t=>this._filterDataItems(t)))}_filterDataItems(t){this.dataItems=this.dataItems.filter(n=>n.id!==t),this.changeDetectorRef.detectChanges()}_unsubscribeFromEvents(){this._subscriptions.forEach(t=>t?.unsubscribe())}ngOnInit(){(0,d.isEmpty)(this.reloadNextSteps)||this._reloadNextStepsDebounceFn(),this._subscribeToEvents()}ngOnDestroy(){super.ngOnDestroy(),this._unsubscribeFromEvents()}static{this.\u0275fac=function(n){return new(n||X)(e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(M.BaseViewModelGenerator),e.\u0275\u0275directiveInject(u.IS_DESIGN_TIME,8),e.\u0275\u0275directiveInject(S.CustomEventService),e.\u0275\u0275directiveInject(v.TranslateService))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:X,selectors:[["crt-next-steps"]],inputs:{reloadNextSteps:"reloadNextSteps",nextSteps:"nextSteps",dataLoading:"dataLoading",cardState:"cardState",masterSchemaId:"masterSchemaId",masterSchemaName:"masterSchemaName",galleryItemConfig:"galleryItemConfig",tilesMap:"tilesMap",bindingColumns:"bindingColumns"},outputs:{reloadNextStepsChange:"reloadNextStepsChange"},features:[e.\u0275\u0275ProvidersFeature([{provide:S.CustomEventService,useFactory:t=>new S.CustomEventService(t),deps:[h.DOCUMENT]}]),e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[["next_steps_plug",""],["next_steps",""],["nextStepsSkeletonIcon",""],["nextStepsSkeletonTitle",""],["nextStepsSkeletonDesc",""],["nextStepsSkeletonFooterIcon",""],["nextStepsSkeletonSignatureItem",""],[4,"ngIf","ngIfElse"],[1,"next-steps"],["class","next-steps-no-data-container",4,"ngIf","ngIfElse"],[1,"next-steps-no-data-container"],[3,"config"],[1,"next-steps-no-data-main-label",3,"caption"],[1,"next-steps-no-data-description",3,"caption"],["class","next-steps-no-data-add-step-container",4,"ngIf"],[1,"next-steps-no-data-add-step-container"],["clickMode","menu",1,"next-steps-plug-add-button",3,"iconPosition","iconSize","icon","menuItems","color","caption"],[1,"next-steps-gallery",3,"items","itemConfig","selectable","loading","mode"],[3,"ngClass"],[1,"next-steps-plug-tiles"],["class","next-steps-plug-tiles-item",4,"ngFor","ngForOf"],[1,"next-steps-plug-tiles-item"],[1,"next-steps-plug-tiles-item-header"],[3,"svgIcon",4,"ngIf","ngIfElse"],[1,"next-steps-plug-tiles-item-header-content"],["class","next-steps-plug-tiles-item-header-content-text title",4,"ngIf","ngIfElse"],["class","next-steps-plug-tiles-item-header-content-text desc",4,"ngIf","ngIfElse"],[1,"next-steps-plug-tiles-item-footer"],["class","next-steps-plug-tiles-item-footer-icon",4,"ngIf","ngIfElse"],[1,"next-steps-plug-tiles-item-footer-signature"],["class","next-steps-plug-tiles-item-footer-signature-item",4,"ngIf","ngIfElse"],[3,"svgIcon"],["appearance","circle","count","1",1,"next-steps-plug-tiles-item-header-icon",3,"styles"],[1,"next-steps-plug-tiles-item-header-content-text","title"],["appearance","line","count","1",1,"next-steps-plug-tiles-item-header-content-text","title",3,"styles"],[1,"next-steps-plug-tiles-item-header-content-text","desc"],["appearance","line","count","1",1,"next-steps-plug-tiles-item-header-content-text","desc",3,"styles"],[1,"next-steps-plug-tiles-item-footer-icon"],["appearance","circle","count","1",1,"next-steps-plug-tiles-item-footer-icon",3,"styles"],[1,"next-steps-plug-tiles-item-footer-signature-item"],["appearance","line","count","2",1,"next-steps-plug-tiles-item-footer-signature-item-skeleton",3,"styles"]],template:function(n,a){if(n&1&&e.\u0275\u0275template(0,be,5,2,"ng-container",7)(1,He,3,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),n&2){const o=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!a.isDesignTime&&!a.dataLoading)("ngIfElse",o)}},dependencies:[p.CrtButtonComponent,h.NgClass,h.NgForOf,h.NgIf,p.CrtLabelComponent,R.MatIcon,p.CrtGalleryComponent,x.SkeletonLoaderComponent,x.CrtLottieComponent,v.TranslatePipe],styles:[".next-steps[_ngcontent-%COMP%]:not(.card-toggle-tab-panel   .next-steps)[_ngcontent-%COMP%]{max-height:312px}.next-steps-no-data-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:100%}.next-steps-no-data-container[_ngcontent-%COMP%]   ng-lottie[_ngcontent-%COMP%]{cursor:pointer}.next-steps-no-data-container[_ngcontent-%COMP%]   .next-steps-no-data-main-label[_ngcontent-%COMP%]{margin-top:35px}.next-steps-no-data-container[_ngcontent-%COMP%]   .next-steps-no-data-add-step-container[_ngcontent-%COMP%]{display:inline-block}.next-steps-no-data-container[_ngcontent-%COMP%]   .next-steps-no-data-description[_ngcontent-%COMP%], .next-steps-no-data-container[_ngcontent-%COMP%]   .next-steps-plug-add-button[_ngcontent-%COMP%]{margin-top:16px}.next-steps-no-data-container[_ngcontent-%COMP%]   .next-steps-plug-add-caption[_ngcontent-%COMP%]{float:right;margin-top:22px}.next-steps-plug.design-time[_ngcontent-%COMP%]{padding-bottom:12px}.next-steps-plug.runtime[_ngcontent-%COMP%]{padding:0}.next-steps-plug-tiles[_ngcontent-%COMP%]{container-type:inline-size;margin-top:12px;display:flex;flex-wrap:wrap;gap:8px}.next-steps-plug-tiles-item[_ngcontent-%COMP%]{background:var(--crt-palette-interaction-A100);padding:12px;height:96px;border:1px solid var(--crt-palette-foreground-50);border-radius:8px;box-sizing:border-box}.next-steps-plug-tiles-item-header[_ngcontent-%COMP%]{display:flex}.next-steps-plug-tiles-item-header-content[_ngcontent-%COMP%]{width:calc(100% - 20px)}.next-steps-plug-tiles-item-header-content-text[_ngcontent-%COMP%]{margin-inline-start:8px;border-radius:4px;height:16px;background-color:var(--crt-palette-secondary-50)}.next-steps-plug-tiles-item-header-content-text.title[_ngcontent-%COMP%]{width:calc(100% - 8px)}.next-steps-plug-tiles-item-header-content-text.desc[_ngcontent-%COMP%]{margin-top:4px;width:calc(87% - 8px)}.next-steps-plug-tiles-item-header-icon[_ngcontent-%COMP%]{border-radius:50%;width:20px;height:20px;background-color:var(--crt-palette-secondary-50)}.next-steps-plug-tiles-item-footer[_ngcontent-%COMP%]{display:flex;margin-top:22px}.next-steps-plug-tiles-item-footer-icon[_ngcontent-%COMP%]{border-radius:50%;width:16px;height:16px;background-color:var(--crt-palette-secondary-50)}.next-steps-plug-tiles-item-footer-signature[_ngcontent-%COMP%]{margin-top:2px;margin-inline-start:12px;display:flex;justify-content:space-between;width:calc(100% - 28px)}.next-steps-plug-tiles-item-footer-signature-item[_ngcontent-%COMP%], .next-steps-plug-tiles-item-footer-signature-item-skeleton[_ngcontent-%COMP%]{border-radius:4px;width:46px;height:12px;background-color:var(--crt-palette-secondary-50);margin-inline-start:4px}.next-steps-plug-tiles-item-footer-signature-item-skeleton[_ngcontent-%COMP%], .next-steps-plug-tiles-item-footer-signature-item-skeleton-skeleton[_ngcontent-%COMP%]{margin-inline-start:0}@container (max-width: 472px){.next-steps-plug-tiles-item[_ngcontent-%COMP%]{width:100%}}@container (min-width: 472px) and (max-width: 712px){.next-steps-plug-tiles-item[_ngcontent-%COMP%]{width:calc((100% - 8px)/2)}}@container (min-width: 712px) and (max-width: 952px){.next-steps-plug-tiles-item[_ngcontent-%COMP%]{width:calc((100% - 16px) / 3)}}@container (min-width: 952px){.next-steps-plug-tiles-item[_ngcontent-%COMP%]{width:calc((100% - 24px)/4);max-width:292px}}"]})}};(0,s.__decorate)([(0,r.CrtInput)(),(0,s.__metadata)("design:type",String)],m.prototype,"reloadNextSteps",void 0),(0,s.__decorate)([(0,r.CrtOutput)(),(0,s.__metadata)("design:type",Object)],m.prototype,"reloadNextStepsChange",void 0),(0,s.__decorate)([(0,r.CrtInput)(),(0,s.__metadata)("design:type",Array),(0,s.__metadata)("design:paramtypes",[Array])],m.prototype,"nextSteps",null),(0,s.__decorate)([(0,r.CrtInput)(),(0,s.__metadata)("design:type",Object)],m.prototype,"dataLoading",void 0),(0,s.__decorate)([(0,r.CrtInput)(),(0,s.__metadata)("design:type",String)],m.prototype,"cardState",void 0),(0,s.__decorate)([(0,r.CrtInput)(),(0,s.__metadata)("design:type",String),(0,s.__metadata)("design:paramtypes",[String])],m.prototype,"masterSchemaId",null),(0,s.__decorate)([(0,r.CrtInput)(),(0,s.__metadata)("design:type",String),(0,s.__metadata)("design:paramtypes",[String])],m.prototype,"masterSchemaName",null),(0,s.__decorate)([(0,r.CrtInput)(),(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[Object])],m.prototype,"galleryItemConfig",null),(0,s.__decorate)([(0,r.CrtInput)(),(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[Object])],m.prototype,"tilesMap",null),(0,s.__decorate)([(0,r.CrtInput)(),(0,s.__metadata)("design:type",Array),(0,s.__metadata)("design:paramtypes",[Array])],m.prototype,"bindingColumns",null),m=(0,s.__decorate)([(0,r.CrtViewElement)({type:"crt.NextSteps",reuseStrategy:r.ViewElementReuseStrategy.Reuse}),(0,r.CrtInterfaceDesignerItem)({designControlConfig:{allowDesignContent:!0},propertiesPanelComponentTypeName:"crt.NextStepsPropertiesPanel",viewElementGroupType:r.ViewElementGroupType.Components,typeCaption:"NextSteps.Caption"}),(0,s.__metadata)("design:paramtypes",[e.Injector,M.BaseViewModelGenerator,Boolean,S.CustomEventService,v.TranslateService])],m);var Le=l(35266),qe=l(36486);class b{constructor(t){this._queryExecutor=t.get(Le.QueryExecutor)}_mapNextStep(t){return{id:t.Id,caption:t.Caption,owner:t.Owner,entityName:t.EntityName,isRequired:t.IsRequired,isOwnerRole:t.IsOwnerRole,date:t.Date,processElementId:t.ProcessElementId,masterEntityId:t.MasterEntityId,masterEntityName:t.MasterEntityName,additionalInfo:(0,d.isEmpty)(t.AdditionalInfo)?{}:JSON.parse(t.AdditionalInfo)}}getNextSteps(t,n){if((0,d.isEmpty)(t)||(0,d.isEmpty)(n))return(0,T.of)([]);const a=new r.EntitySchemaQuery("NextStep");return a.addSchemaColumn("Id"),a.addSchemaColumn("Caption"),a.addSchemaColumn("Owner"),a.addSchemaColumn("IsOwnerRole"),a.addSchemaColumn("EntityName"),a.addSchemaColumn("ProcessElementId"),a.addSchemaColumn("IsRequired"),a.addSchemaColumn("Date"),a.addSchemaColumn("MasterEntityId"),a.addSchemaColumn("MasterEntityName"),a.addSchemaColumn("AdditionalInfo"),a.filters.addSchemaColumnFilterWithParameter(r.ComparisonType.Equal,"MasterEntityId",t),a.filters.addSchemaColumnFilterWithParameter(r.ComparisonType.Equal,"MasterEntityName",n),this._queryExecutor.executeSelectQuery(a).pipe((0,qe.map)(o=>o.map(c=>this._mapNextStep(c))))}static{this.\u0275fac=function(n){return new(n||b)(e.\u0275\u0275inject(e.Injector))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac})}}let D=class{constructor(t){this._nextStepsService=t}convert(t,n,a){const o=t.find(c=>(0,r.isGuid)(c));return(0,d.isEmpty)(o)||(0,d.isEmpty)(a)||a==="#DataSourceEntityName()#"?(0,T.lastValueFrom)((0,T.of)([])):(0,T.lastValueFrom)(this._nextStepsService.getNextSteps(o,a))}};D=(0,s.__decorate)([(0,r.CrtConverter)({type:"crt.LoadNextSteps"}),(0,s.__metadata)("design:paramtypes",[b])],D);let B=class extends r.BaseRequestHandler{constructor(t){super(),this._entityConnectionService=t.get(p.EntityConnectionService)}handle(t){var n=this;return(0,g.A)(function*(){const a=t.$context,c=(yield a.getPrimaryDataSchema()).name,C=a.attributes[a.primaryAttributeName],_=t.defaultValues||[];_.push({attributeName:"Type",value:u.ACTIVITY_TYPE_TASK},{attributeName:"ActivityCategory",value:u.ACTIVITY_CATEGORY_TODO});const ne=yield n._entityConnectionService.getEntityConnectionColumns("Activity",c);ne&&ne.forEach(Ve=>{_.push({attributeName:Ve.name,value:C})}),yield n.handlerChain.process({type:"crt.CreateRecordRequest",$context:t.$context,entityName:t.entityName,defaultValues:_}),yield n.next?.handle(t)})()}};B=(0,s.__decorate)([(0,r.CrtRequestHandler)({requestType:"crt.AddNextStepRequest",type:"crt.AddNextStepHandler"}),(0,s.__metadata)("design:paramtypes",[e.Injector])],B);let P=class extends r.BaseRequestHandler{constructor(t){super(),this.customEventService=t}emitChangeNextStepsPromise(){return new Promise(t=>{this.customEventService.createOutboundChannel(z).next({}),t()})}handle(t){var n=this;return(0,g.A)(function*(){yield n.emitChangeNextStepsPromise(),yield n.next?.handle(t)})()}};P=(0,s.__decorate)([(0,r.CrtRequestHandler)({type:"crt.ChangeNextStepsStateRequestHandler",requestType:"crt.ChangeNextStepsStateRequest"}),(0,s.__metadata)("design:paramtypes",[S.CustomEventService])],P);let H=class extends r.BaseRequestHandler{changeNextStepsState(t){const{$context:n,scopes:a}=t,o={type:"crt.ChangeNextStepsStateRequest",scopes:a,$context:n};return this.handlerChain.process(o)}handle(t){var n=this;return(0,g.A)(function*(){const a=yield n.next?.handle(t);return yield n.changeNextStepsState(t),a})()}};H=(0,s.__decorate)([(0,r.CrtRequestHandler)({requestType:"crt.SaveRecordRequest",type:"crt.EnitityStageProgressBarSaveRecordHandler"})],H);class I{constructor(t){this._translateService=t}_getViewConfigs(t,n){return u.MetadataSchemaUtils.getViewConfigInfoByProperty("type",n,t.viewConfig).map(a=>a?.viewConfig).filter(Boolean)}_setAddNextStepBtnAdditionalProperties(t){Object.keys(t).includes("visible")||(t.visible="$CardState | crt.IsEqual : 'edit'"),Object.keys(t).includes("ariaLabel")||(t.ariaLabel=this._translateService.instant("NextSteps.AddNewStepMenuCaption"))}_setNextStepsComponentAdditionalProperties(t,n){if(t&&(Object.keys(t).includes("cardState")||(t.cardState="$CardState"),!Object.keys(t).includes("nextSteps"))){const a=n.viewModelConfig.attributes;this._createNextStepsAttribute(t,a)}}_createNextStepsAttribute(t,n){const a=`NextSteps_${t.name}`,o=`ReloadNextSteps_${t.name}`;n[a]={from:[this._getOrCreatePropertyAttribute(t.masterSchemaId||"",`MasterSchemaId_${t.name}`,n),this._getOrCreatePropertyAttribute(F,o,n)],converter:`crt.LoadNextSteps : '${t.masterSchemaName}'`},t.nextSteps=`$${a}`,t.reloadNextSteps=`$${o}`}_getOrCreatePropertyAttribute(t,n,a){return t.startsWith("$")?t.replace("$",""):(a[n]={value:t},n)}_handleNextStepsComponent(t){this._getViewConfigs(t,"crt.NextSteps").forEach(a=>{this._setNextStepsComponentAdditionalProperties(a,t)})}_handleNextStepsAddButtons(t){this._getViewConfigs(t,"crt.Button").forEach(a=>{if(a&&a.clickMode==="menu"){const o=a.menuItems||[];Array.isArray(o)&&o.some(c=>{const C=c.clicked;return C&&(C.request==="crt.AddNextStepRequest"||C.request==="crt.CreateEmailRequest")})&&this._setAddNextStepBtnAdditionalProperties(a)}})}_getNextStepRelatedConfigs(t){const n=u.MetadataSchemaUtils.getViewConfigInfoByFilter(a=>a.type==="crt.NextSteps"&&a.bindingColumns||a.type==="crt.MenuItem"&&a.clicked?.request==="crt.CreateEmailRequest"&&!a.clicked?.params?.bindingColumns,[t]).map(a=>a?.viewConfig).filter(Boolean);return n?.length!==2?null:{nextStep:n.find(a=>a.type==="crt.NextSteps"),addEmailBtn:n.find(a=>a.type==="crt.MenuItem")}}_getConfigsToFix(t){const n=new Array;return u.MetadataSchemaUtils.getViewConfigInfoByFilter(a=>{if(a.type!=="crt.ExpansionPanel")return!1;const o=this._getNextStepRelatedConfigs(a);return o&&n.push(o),!!o},t.viewConfig),n}_fixBindingColumns(t){this._getConfigsToFix(t).forEach(a=>{const o=a.addEmailBtn.clicked;o.params=o.params||{},o.params.bindingColumns=(0,d.cloneDeep)(a.nextStep.bindingColumns)})}crtOnMetaDataInit(t){const n=t;return this._fixBindingColumns(n),this._handleNextStepsAddButtons(n),this._handleNextStepsComponent(n),Promise.resolve(t)}static{this.\u0275fac=function(n){return new(n||I)(e.\u0275\u0275inject(v.TranslateService))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac})}}let L=class Y{constructor(t){this._materialIconsRegistrator=t;const n=[];n.push({name:"expansion-panel-arrow",icon:l(54663)}),this._materialIconsRegistrator.addIcons(n)}static{this.\u0275fac=function(n){return new(n||Y)(e.\u0275\u0275inject(x.MaterialIconsRegistrator))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:Y})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[b,{provide:u.CRT_METADATA_PREPROCESSOR,useClass:I,multi:!0}],imports:[p.CrtButtonModule,h.CommonModule,p.CrtLabelModule,p.CrtLinkModule,x.CrtPlaceholderModule,R.MatIconModule,v.TranslateModule,p.CrtGalleryModule,u.DateTimeFormattingModule,p.CrtImageInputModule,x.CrtSkeletonLoaderModule,x.CrtLottieModule,q.MatSnackBarModule,S.CrtLibTranslateModule.forRoot({i18n:ae}),p.CrtEntityIconModule]})}};L=(0,s.__decorate)([(0,r.CrtModule)({viewElements:[m,w,k],requestHandlers:[B,P,H],converters:[D]}),(0,s.__metadata)("design:paramtypes",[x.MaterialIconsRegistrator])],L),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(L,{declarations:[m,w,k,A,E,N,y],imports:[p.CrtButtonModule,h.CommonModule,p.CrtLabelModule,p.CrtLinkModule,x.CrtPlaceholderModule,R.MatIconModule,v.TranslateModule,p.CrtGalleryModule,u.DateTimeFormattingModule,p.CrtImageInputModule,x.CrtSkeletonLoaderModule,x.CrtLottieModule,q.MatSnackBarModule,S.CrtLibTranslateModule,p.CrtEntityIconModule],exports:[m,w,k,y]})}();let G=class extends r.BaseRequest{};G=(0,s.__decorate)([(0,r.CrtRequest)({type:"crt.AddNextStepRequest"})],G);let K=class extends r.BaseRequest{};K=(0,s.__decorate)([(0,r.CrtRequest)({type:"crt.ChangeNextStepsStateRequest"})],K)},54663:Q=>{Q.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4 10L8.0208 6L12 10" stroke="currentColor" stroke-width="2"/>
</svg>
`}}]);
