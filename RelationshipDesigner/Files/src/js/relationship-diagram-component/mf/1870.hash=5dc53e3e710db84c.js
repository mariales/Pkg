(self.webpackChunkapp_studio_enterprise_relationship_diagram=self.webpackChunkapp_studio_enterprise_relationship_diagram||[]).push([[1870,3308,927,8546,6165,2832,451,8070,5689,4260,1879],{66716:(X,K,u)=>{var h;/*! Hammer.JS - v2.0.7 - 2016-04-22
* http://hammerjs.github.io/
*
* Copyright (c) 2016 Jorik Tangelder;
* Licensed under the MIT license */(function(L,d,E,v){"use strict";var M=["","webkit","Moz","MS","ms","o"],p=d.createElement("div"),x="function",T=Math.round,c=Math.abs,a=Date.now;function e(C,R,B){return setTimeout(l(C,B),R)}function g(C,R,B){return Array.isArray(C)?(t(C,B[R],B),!0):!1}function t(C,R,B){var j;if(C)if(C.forEach)C.forEach(R,B);else if(C.length!==v)for(j=0;j<C.length;)R.call(B,C[j],j,C),j++;else for(j in C)C.hasOwnProperty(j)&&R.call(B,C[j],j,C)}function o(C,R,B){var j="DEPRECATED METHOD: "+R+`
`+B+` AT 
`;return function(){var Y=new Error("get-stack-trace"),et=Y&&Y.stack?Y.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ct=L.console&&(L.console.warn||L.console.log);return ct&&ct.call(L.console,j,et),C.apply(this,arguments)}}var r;typeof Object.assign!="function"?r=function(R){if(R===v||R===null)throw new TypeError("Cannot convert undefined or null to object");for(var B=Object(R),j=1;j<arguments.length;j++){var Y=arguments[j];if(Y!==v&&Y!==null)for(var et in Y)Y.hasOwnProperty(et)&&(B[et]=Y[et])}return B}:r=Object.assign;var y=o(function(R,B,j){for(var Y=Object.keys(B),et=0;et<Y.length;)(!j||j&&R[Y[et]]===v)&&(R[Y[et]]=B[Y[et]]),et++;return R},"extend","Use `assign`."),m=o(function(R,B){return y(R,B,!0)},"merge","Use `assign`.");function n(C,R,B){var j=R.prototype,Y;Y=C.prototype=Object.create(j),Y.constructor=C,Y._super=j,B&&r(Y,B)}function l(C,R){return function(){return C.apply(R,arguments)}}function _(C,R){return typeof C==x?C.apply(R&&R[0]||v,R):C}function S(C,R){return C===v?R:C}function D(C,R,B){t(F(R),function(j){C.addEventListener(j,B,!1)})}function b(C,R,B){t(F(R),function(j){C.removeEventListener(j,B,!1)})}function I(C,R){for(;C;){if(C==R)return!0;C=C.parentNode}return!1}function U(C,R){return C.indexOf(R)>-1}function F(C){return C.trim().split(/\s+/g)}function H(C,R,B){if(C.indexOf&&!B)return C.indexOf(R);for(var j=0;j<C.length;){if(B&&C[j][B]==R||!B&&C[j]===R)return j;j++}return-1}function V(C){return Array.prototype.slice.call(C,0)}function z(C,R,B){for(var j=[],Y=[],et=0;et<C.length;){var ct=R?C[et][R]:C[et];H(Y,ct)<0&&j.push(C[et]),Y[et]=ct,et++}return B&&(R?j=j.sort(function(ht,pt){return ht[R]>pt[R]}):j=j.sort()),j}function k(C,R){for(var B,j,Y=R[0].toUpperCase()+R.slice(1),et=0;et<M.length;){if(B=M[et],j=B?B+Y:R,j in C)return j;et++}return v}var N=1;function P(){return N++}function i(C){var R=C.ownerDocument||C;return R.defaultView||R.parentWindow||L}var s=/mobile|tablet|ip(ad|hone|od)|android/i,O="ontouchstart"in L,f=k(L,"PointerEvent")!==v,A=O&&s.test(navigator.userAgent),w="touch",W="pen",G="mouse",$="kinect",J=25,q=1,it=2,nt=4,tt=8,Z=1,ot=2,Q=4,at=8,rt=16,st=ot|Q,ut=at|rt,lt=st|ut,Ct=["x","y"],Et=["clientX","clientY"];function dt(C,R){var B=this;this.manager=C,this.callback=R,this.element=C.element,this.target=C.options.inputTarget,this.domHandler=function(j){_(C.options.enable,[C])&&B.handler(j)},this.init()}dt.prototype={handler:function(){},init:function(){this.evEl&&D(this.element,this.evEl,this.domHandler),this.evTarget&&D(this.target,this.evTarget,this.domHandler),this.evWin&&D(i(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(i(this.element),this.evWin,this.domHandler)}};function gt(C){var R,B=C.options.inputClass;return B?R=B:f?R=jt:A?R=bt:O?R=Ht:R=Lt,new R(C,Mt)}function Mt(C,R,B){var j=B.pointers.length,Y=B.changedPointers.length,et=R&q&&j-Y===0,ct=R&(nt|tt)&&j-Y===0;B.isFirst=!!et,B.isFinal=!!ct,et&&(C.session={}),B.eventType=R,de(C,B),C.emit("hammer.input",B),C.recognize(B),C.session.prevInput=B}function de(C,R){var B=C.session,j=R.pointers,Y=j.length;B.firstInput||(B.firstInput=Zt(R)),Y>1&&!B.firstMultiple?B.firstMultiple=Zt(R):Y===1&&(B.firstMultiple=!1);var et=B.firstInput,ct=B.firstMultiple,ft=ct?ct.center:et.center,ht=R.center=Qt(j);R.timeStamp=a(),R.deltaTime=R.timeStamp-et.timeStamp,R.angle=Kt(ft,ht),R.distance=wt(ft,ht),pe(B,R),R.offsetDirection=qt(R.deltaX,R.deltaY);var pt=Jt(R.deltaTime,R.deltaX,R.deltaY);R.overallVelocityX=pt.x,R.overallVelocityY=pt.y,R.overallVelocity=c(pt.x)>c(pt.y)?pt.x:pt.y,R.scale=ct?me(ct.pointers,j):1,R.rotation=ct?ge(ct.pointers,j):0,R.maxPointers=B.prevInput?R.pointers.length>B.prevInput.maxPointers?R.pointers.length:B.prevInput.maxPointers:R.pointers.length,ve(B,R);var _t=C.element;I(R.srcEvent.target,_t)&&(_t=R.srcEvent.target),R.target=_t}function pe(C,R){var B=R.center,j=C.offsetDelta||{},Y=C.prevDelta||{},et=C.prevInput||{};(R.eventType===q||et.eventType===nt)&&(Y=C.prevDelta={x:et.deltaX||0,y:et.deltaY||0},j=C.offsetDelta={x:B.x,y:B.y}),R.deltaX=Y.x+(B.x-j.x),R.deltaY=Y.y+(B.y-j.y)}function ve(C,R){var B=C.lastInterval||R,j=R.timeStamp-B.timeStamp,Y,et,ct,ft;if(R.eventType!=tt&&(j>J||B.velocity===v)){var ht=R.deltaX-B.deltaX,pt=R.deltaY-B.deltaY,_t=Jt(j,ht,pt);et=_t.x,ct=_t.y,Y=c(_t.x)>c(_t.y)?_t.x:_t.y,ft=qt(ht,pt),C.lastInterval=R}else Y=B.velocity,et=B.velocityX,ct=B.velocityY,ft=B.direction;R.velocity=Y,R.velocityX=et,R.velocityY=ct,R.direction=ft}function Zt(C){for(var R=[],B=0;B<C.pointers.length;)R[B]={clientX:T(C.pointers[B].clientX),clientY:T(C.pointers[B].clientY)},B++;return{timeStamp:a(),pointers:R,center:Qt(R),deltaX:C.deltaX,deltaY:C.deltaY}}function Qt(C){var R=C.length;if(R===1)return{x:T(C[0].clientX),y:T(C[0].clientY)};for(var B=0,j=0,Y=0;Y<R;)B+=C[Y].clientX,j+=C[Y].clientY,Y++;return{x:T(B/R),y:T(j/R)}}function Jt(C,R,B){return{x:R/C||0,y:B/C||0}}function qt(C,R){return C===R?Z:c(C)>=c(R)?C<0?ot:Q:R<0?at:rt}function wt(C,R,B){B||(B=Ct);var j=R[B[0]]-C[B[0]],Y=R[B[1]]-C[B[1]];return Math.sqrt(j*j+Y*Y)}function Kt(C,R,B){B||(B=Ct);var j=R[B[0]]-C[B[0]],Y=R[B[1]]-C[B[1]];return Math.atan2(Y,j)*180/Math.PI}function ge(C,R){return Kt(R[1],R[0],Et)+Kt(C[1],C[0],Et)}function me(C,R){return wt(R[0],R[1],Et)/wt(C[0],C[1],Et)}var ye={mousedown:q,mousemove:it,mouseup:nt},_e="mousedown",Ee="mousemove mouseup";function Lt(){this.evEl=_e,this.evWin=Ee,this.pressed=!1,dt.apply(this,arguments)}n(Lt,dt,{handler:function(R){var B=ye[R.type];B&q&&R.button===0&&(this.pressed=!0),B&it&&R.which!==1&&(B=nt),this.pressed&&(B&nt&&(this.pressed=!1),this.callback(this.manager,B,{pointers:[R],changedPointers:[R],pointerType:G,srcEvent:R}))}});var xe={pointerdown:q,pointermove:it,pointerup:nt,pointercancel:tt,pointerout:tt},Te={2:w,3:W,4:G,5:$},te="pointerdown",ee="pointermove pointerup pointercancel";L.MSPointerEvent&&!L.PointerEvent&&(te="MSPointerDown",ee="MSPointerMove MSPointerUp MSPointerCancel");function jt(){this.evEl=te,this.evWin=ee,dt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}n(jt,dt,{handler:function(R){var B=this.store,j=!1,Y=R.type.toLowerCase().replace("ms",""),et=xe[Y],ct=Te[R.pointerType]||R.pointerType,ft=ct==w,ht=H(B,R.pointerId,"pointerId");et&q&&(R.button===0||ft)?ht<0&&(B.push(R),ht=B.length-1):et&(nt|tt)&&(j=!0),!(ht<0)&&(B[ht]=R,this.callback(this.manager,et,{pointers:B,changedPointers:[R],pointerType:ct,srcEvent:R}),j&&B.splice(ht,1))}});var Pe={touchstart:q,touchmove:it,touchend:nt,touchcancel:tt},Ce="touchstart",Me="touchstart touchmove touchend touchcancel";function ne(){this.evTarget=Ce,this.evWin=Me,this.started=!1,dt.apply(this,arguments)}n(ne,dt,{handler:function(R){var B=Pe[R.type];if(B===q&&(this.started=!0),!!this.started){var j=Oe.call(this,R,B);B&(nt|tt)&&j[0].length-j[1].length===0&&(this.started=!1),this.callback(this.manager,B,{pointers:j[0],changedPointers:j[1],pointerType:w,srcEvent:R})}}});function Oe(C,R){var B=V(C.touches),j=V(C.changedTouches);return R&(nt|tt)&&(B=z(B.concat(j),"identifier",!0)),[B,j]}var Ae={touchstart:q,touchmove:it,touchend:nt,touchcancel:tt},Re="touchstart touchmove touchend touchcancel";function bt(){this.evTarget=Re,this.targetIds={},dt.apply(this,arguments)}n(bt,dt,{handler:function(R){var B=Ae[R.type],j=De.call(this,R,B);j&&this.callback(this.manager,B,{pointers:j[0],changedPointers:j[1],pointerType:w,srcEvent:R})}});function De(C,R){var B=V(C.touches),j=this.targetIds;if(R&(q|it)&&B.length===1)return j[B[0].identifier]=!0,[B,B];var Y,et,ct=V(C.changedTouches),ft=[],ht=this.target;if(et=B.filter(function(pt){return I(pt.target,ht)}),R===q)for(Y=0;Y<et.length;)j[et[Y].identifier]=!0,Y++;for(Y=0;Y<ct.length;)j[ct[Y].identifier]&&ft.push(ct[Y]),R&(nt|tt)&&delete j[ct[Y].identifier],Y++;if(ft.length)return[z(et.concat(ft),"identifier",!0),ft]}var Se=2500,ie=25;function Ht(){dt.apply(this,arguments);var C=l(this.handler,this);this.touch=new bt(this.manager,C),this.mouse=new Lt(this.manager,C),this.primaryTouch=null,this.lastTouches=[]}n(Ht,dt,{handler:function(R,B,j){var Y=j.pointerType==w,et=j.pointerType==G;if(!(et&&j.sourceCapabilities&&j.sourceCapabilities.firesTouchEvents)){if(Y)Ie.call(this,B,j);else if(et&&we.call(this,j))return;this.callback(R,B,j)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Ie(C,R){C&q?(this.primaryTouch=R.changedPointers[0].identifier,re.call(this,R)):C&(nt|tt)&&re.call(this,R)}function re(C){var R=C.changedPointers[0];if(R.identifier===this.primaryTouch){var B={x:R.clientX,y:R.clientY};this.lastTouches.push(B);var j=this.lastTouches,Y=function(){var et=j.indexOf(B);et>-1&&j.splice(et,1)};setTimeout(Y,Se)}}function we(C){for(var R=C.srcEvent.clientX,B=C.srcEvent.clientY,j=0;j<this.lastTouches.length;j++){var Y=this.lastTouches[j],et=Math.abs(R-Y.x),ct=Math.abs(B-Y.y);if(et<=ie&&ct<=ie)return!0}return!1}var oe=k(p.style,"touchAction"),ae=oe!==v,se="compute",ce="auto",zt="manipulation",Ot="none",Dt="pan-x",St="pan-y",Ut=be();function Gt(C,R){this.manager=C,this.set(R)}Gt.prototype={set:function(C){C==se&&(C=this.compute()),ae&&this.manager.element.style&&Ut[C]&&(this.manager.element.style[oe]=C),this.actions=C.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var C=[];return t(this.manager.recognizers,function(R){_(R.options.enable,[R])&&(C=C.concat(R.getTouchAction()))}),Le(C.join(" "))},preventDefaults:function(C){var R=C.srcEvent,B=C.offsetDirection;if(this.manager.session.prevented){R.preventDefault();return}var j=this.actions,Y=U(j,Ot)&&!Ut[Ot],et=U(j,St)&&!Ut[St],ct=U(j,Dt)&&!Ut[Dt];if(Y){var ft=C.pointers.length===1,ht=C.distance<2,pt=C.deltaTime<250;if(ft&&ht&&pt)return}if(!(ct&&et)&&(Y||et&&B&st||ct&&B&ut))return this.preventSrc(R)},preventSrc:function(C){this.manager.session.prevented=!0,C.preventDefault()}};function Le(C){if(U(C,Ot))return Ot;var R=U(C,Dt),B=U(C,St);return R&&B?Ot:R||B?R?Dt:St:U(C,zt)?zt:ce}function be(){if(!ae)return!1;var C={},R=L.CSS&&L.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(B){C[B]=R?L.CSS.supports("touch-action",B):!0}),C}var Bt=1,vt=2,Rt=4,Pt=8,xt=Pt,It=16,yt=32;function Tt(C){this.options=r({},this.defaults,C||{}),this.id=P(),this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=Bt,this.simultaneous={},this.requireFail=[]}Tt.prototype={defaults:{},set:function(C){return r(this.options,C),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(C){if(g(C,"recognizeWith",this))return this;var R=this.simultaneous;return C=Wt(C,this),R[C.id]||(R[C.id]=C,C.recognizeWith(this)),this},dropRecognizeWith:function(C){return g(C,"dropRecognizeWith",this)?this:(C=Wt(C,this),delete this.simultaneous[C.id],this)},requireFailure:function(C){if(g(C,"requireFailure",this))return this;var R=this.requireFail;return C=Wt(C,this),H(R,C)===-1&&(R.push(C),C.requireFailure(this)),this},dropRequireFailure:function(C){if(g(C,"dropRequireFailure",this))return this;C=Wt(C,this);var R=H(this.requireFail,C);return R>-1&&this.requireFail.splice(R,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(C){return!!this.simultaneous[C.id]},emit:function(C){var R=this,B=this.state;function j(Y){R.manager.emit(Y,C)}B<Pt&&j(R.options.event+ue(B)),j(R.options.event),C.additionalEvent&&j(C.additionalEvent),B>=Pt&&j(R.options.event+ue(B))},tryEmit:function(C){if(this.canEmit())return this.emit(C);this.state=yt},canEmit:function(){for(var C=0;C<this.requireFail.length;){if(!(this.requireFail[C].state&(yt|Bt)))return!1;C++}return!0},recognize:function(C){var R=r({},C);if(!_(this.options.enable,[this,R])){this.reset(),this.state=yt;return}this.state&(xt|It|yt)&&(this.state=Bt),this.state=this.process(R),this.state&(vt|Rt|Pt|It)&&this.tryEmit(R)},process:function(C){},getTouchAction:function(){},reset:function(){}};function ue(C){return C&It?"cancel":C&Pt?"end":C&Rt?"move":C&vt?"start":""}function le(C){return C==rt?"down":C==at?"up":C==ot?"left":C==Q?"right":""}function Wt(C,R){var B=R.manager;return B?B.get(C):C}function mt(){Tt.apply(this,arguments)}n(mt,Tt,{defaults:{pointers:1},attrTest:function(C){var R=this.options.pointers;return R===0||C.pointers.length===R},process:function(C){var R=this.state,B=C.eventType,j=R&(vt|Rt),Y=this.attrTest(C);return j&&(B&tt||!Y)?R|It:j||Y?B&nt?R|Pt:R&vt?R|Rt:vt:yt}});function Nt(){mt.apply(this,arguments),this.pX=null,this.pY=null}n(Nt,mt,{defaults:{event:"pan",threshold:10,pointers:1,direction:lt},getTouchAction:function(){var C=this.options.direction,R=[];return C&st&&R.push(St),C&ut&&R.push(Dt),R},directionTest:function(C){var R=this.options,B=!0,j=C.distance,Y=C.direction,et=C.deltaX,ct=C.deltaY;return Y&R.direction||(R.direction&st?(Y=et===0?Z:et<0?ot:Q,B=et!=this.pX,j=Math.abs(C.deltaX)):(Y=ct===0?Z:ct<0?at:rt,B=ct!=this.pY,j=Math.abs(C.deltaY))),C.direction=Y,B&&j>R.threshold&&Y&R.direction},attrTest:function(C){return mt.prototype.attrTest.call(this,C)&&(this.state&vt||!(this.state&vt)&&this.directionTest(C))},emit:function(C){this.pX=C.deltaX,this.pY=C.deltaY;var R=le(C.direction);R&&(C.additionalEvent=this.options.event+R),this._super.emit.call(this,C)}});function kt(){mt.apply(this,arguments)}n(kt,mt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ot]},attrTest:function(C){return this._super.attrTest.call(this,C)&&(Math.abs(C.scale-1)>this.options.threshold||this.state&vt)},emit:function(C){if(C.scale!==1){var R=C.scale<1?"in":"out";C.additionalEvent=this.options.event+R}this._super.emit.call(this,C)}});function Yt(){Tt.apply(this,arguments),this._timer=null,this._input=null}n(Yt,Tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ce]},process:function(C){var R=this.options,B=C.pointers.length===R.pointers,j=C.distance<R.threshold,Y=C.deltaTime>R.time;if(this._input=C,!j||!B||C.eventType&(nt|tt)&&!Y)this.reset();else if(C.eventType&q)this.reset(),this._timer=e(function(){this.state=xt,this.tryEmit()},R.time,this);else if(C.eventType&nt)return xt;return yt},reset:function(){clearTimeout(this._timer)},emit:function(C){this.state===xt&&(C&&C.eventType&nt?this.manager.emit(this.options.event+"up",C):(this._input.timeStamp=a(),this.manager.emit(this.options.event,this._input)))}});function Vt(){mt.apply(this,arguments)}n(Vt,mt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ot]},attrTest:function(C){return this._super.attrTest.call(this,C)&&(Math.abs(C.rotation)>this.options.threshold||this.state&vt)}});function $t(){mt.apply(this,arguments)}n($t,mt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:st|ut,pointers:1},getTouchAction:function(){return Nt.prototype.getTouchAction.call(this)},attrTest:function(C){var R=this.options.direction,B;return R&(st|ut)?B=C.overallVelocity:R&st?B=C.overallVelocityX:R&ut&&(B=C.overallVelocityY),this._super.attrTest.call(this,C)&&R&C.offsetDirection&&C.distance>this.options.threshold&&C.maxPointers==this.options.pointers&&c(B)>this.options.velocity&&C.eventType&nt},emit:function(C){var R=le(C.offsetDirection);R&&this.manager.emit(this.options.event+R,C),this.manager.emit(this.options.event,C)}});function Ft(){Tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}n(Ft,Tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[zt]},process:function(C){var R=this.options,B=C.pointers.length===R.pointers,j=C.distance<R.threshold,Y=C.deltaTime<R.time;if(this.reset(),C.eventType&q&&this.count===0)return this.failTimeout();if(j&&Y&&B){if(C.eventType!=nt)return this.failTimeout();var et=this.pTime?C.timeStamp-this.pTime<R.interval:!0,ct=!this.pCenter||wt(this.pCenter,C.center)<R.posThreshold;this.pTime=C.timeStamp,this.pCenter=C.center,!ct||!et?this.count=1:this.count+=1,this._input=C;var ft=this.count%R.taps;if(ft===0)return this.hasRequireFailures()?(this._timer=e(function(){this.state=xt,this.tryEmit()},R.interval,this),vt):xt}return yt},failTimeout:function(){return this._timer=e(function(){this.state=yt},this.options.interval,this),yt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==xt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function At(C,R){return R=R||{},R.recognizers=S(R.recognizers,At.defaults.preset),new Xt(C,R)}At.VERSION="2.0.7",At.defaults={domEvents:!1,touchAction:se,enable:!0,inputTarget:null,inputClass:null,preset:[[Vt,{enable:!1}],[kt,{enable:!1},["rotate"]],[$t,{direction:st}],[Nt,{direction:st},["swipe"]],[Ft],[Ft,{event:"doubletap",taps:2},["tap"]],[Yt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ue=1,fe=2;function Xt(C,R){this.options=r({},At.defaults,R||{}),this.options.inputTarget=this.options.inputTarget||C,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=C,this.input=gt(this),this.touchAction=new Gt(this,this.options.touchAction),he(this,!0),t(this.options.recognizers,function(B){var j=this.add(new B[0](B[1]));B[2]&&j.recognizeWith(B[2]),B[3]&&j.requireFailure(B[3])},this)}Xt.prototype={set:function(C){return r(this.options,C),C.touchAction&&this.touchAction.update(),C.inputTarget&&(this.input.destroy(),this.input.target=C.inputTarget,this.input.init()),this},stop:function(C){this.session.stopped=C?fe:Ue},recognize:function(C){var R=this.session;if(!R.stopped){this.touchAction.preventDefaults(C);var B,j=this.recognizers,Y=R.curRecognizer;(!Y||Y&&Y.state&xt)&&(Y=R.curRecognizer=null);for(var et=0;et<j.length;)B=j[et],R.stopped!==fe&&(!Y||B==Y||B.canRecognizeWith(Y))?B.recognize(C):B.reset(),!Y&&B.state&(vt|Rt|Pt)&&(Y=R.curRecognizer=B),et++}},get:function(C){if(C instanceof Tt)return C;for(var R=this.recognizers,B=0;B<R.length;B++)if(R[B].options.event==C)return R[B];return null},add:function(C){if(g(C,"add",this))return this;var R=this.get(C.options.event);return R&&this.remove(R),this.recognizers.push(C),C.manager=this,this.touchAction.update(),C},remove:function(C){if(g(C,"remove",this))return this;if(C=this.get(C),C){var R=this.recognizers,B=H(R,C);B!==-1&&(R.splice(B,1),this.touchAction.update())}return this},on:function(C,R){if(C!==v&&R!==v){var B=this.handlers;return t(F(C),function(j){B[j]=B[j]||[],B[j].push(R)}),this}},off:function(C,R){if(C!==v){var B=this.handlers;return t(F(C),function(j){R?B[j]&&B[j].splice(H(B[j],R),1):delete B[j]}),this}},emit:function(C,R){this.options.domEvents&&Be(C,R);var B=this.handlers[C]&&this.handlers[C].slice();if(!(!B||!B.length)){R.type=C,R.preventDefault=function(){R.srcEvent.preventDefault()};for(var j=0;j<B.length;)B[j](R),j++}},destroy:function(){this.element&&he(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function he(C,R){var B=C.element;if(B.style){var j;t(C.options.cssProps,function(Y,et){j=k(B.style,et),R?(C.oldCssProps[j]=B.style[j],B.style[j]=Y):B.style[j]=C.oldCssProps[j]||""}),R||(C.oldCssProps={})}}function Be(C,R){var B=d.createEvent("Event");B.initEvent(C,!0,!0),B.gesture=R,R.target.dispatchEvent(B)}r(At,{INPUT_START:q,INPUT_MOVE:it,INPUT_END:nt,INPUT_CANCEL:tt,STATE_POSSIBLE:Bt,STATE_BEGAN:vt,STATE_CHANGED:Rt,STATE_ENDED:Pt,STATE_RECOGNIZED:xt,STATE_CANCELLED:It,STATE_FAILED:yt,DIRECTION_NONE:Z,DIRECTION_LEFT:ot,DIRECTION_RIGHT:Q,DIRECTION_UP:at,DIRECTION_DOWN:rt,DIRECTION_HORIZONTAL:st,DIRECTION_VERTICAL:ut,DIRECTION_ALL:lt,Manager:Xt,Input:dt,TouchAction:Gt,TouchInput:bt,MouseInput:Lt,PointerEventInput:jt,TouchMouseInput:Ht,SingleTouchInput:ne,Recognizer:Tt,AttrRecognizer:mt,Tap:Ft,Pan:Nt,Swipe:$t,Pinch:kt,Rotate:Vt,Press:Yt,on:D,off:b,each:t,merge:m,extend:y,assign:r,inherit:n,bindFn:l,prefixed:k});var We=typeof L<"u"?L:typeof self<"u"?self:{};We.Hammer=At,h=function(){return At}.call(K,u,K,X),h!==v&&(X.exports=h)})(window,document,"Hammer")},82867:(X,K,u)=>{X.exports=u(49389),X.exports.Collection=u(12251)},12251:X=>{function K(h,L,d,E){var v=d.inverse;return Object.defineProperty(h,"remove",{value:function(M){var p=this.indexOf(M);return p!==-1&&(this.splice(p,1),L.unset(M,v,E)),M}}),Object.defineProperty(h,"contains",{value:function(M){return this.indexOf(M)!==-1}}),Object.defineProperty(h,"add",{value:function(M,p){var x=this.indexOf(M);if(typeof p>"u"){if(x!==-1)return;p=this.length}x!==-1&&this.splice(x,1),this.splice(p,0,M),x===-1&&L.set(M,v,E)}}),Object.defineProperty(h,"__refs_collection",{value:!0}),h}function u(h){return h.__refs_collection===!0}X.exports.extend=K,X.exports.isExtended=u},49389:(X,K,u)=>{var h=u(12251);function L(M,p){return Object.prototype.hasOwnProperty.call(M,p.name||p)}function d(M,p,x){var T=h.extend(x[p.name]||[],M,p,x);Object.defineProperty(x,p.name,{enumerable:p.enumerable,value:T}),T.length&&T.forEach(function(c){M.set(c,p.inverse,x)})}function E(M,p,x){var T=p.inverse,c=x[p.name];Object.defineProperty(x,p.name,{configurable:p.configurable,enumerable:p.enumerable,get:function(){return c},set:function(a){if(a!==c){var e=c;c=null,e&&M.unset(e,T,x),c=a,M.set(c,T,x)}}})}function v(M,p){if(!(this instanceof v))return new v(M,p);M.inverse=p,p.inverse=M,this.props={},this.props[M.name]=M,this.props[p.name]=p}v.prototype.bind=function(M,p){if(typeof p=="string"){if(!this.props[p])throw new Error("no property <"+p+"> in ref");p=this.props[p]}p.collection?d(this,p,M):E(this,p,M)},v.prototype.ensureRefsCollection=function(M,p){var x=M[p.name];return h.isExtended(x)||d(this,p,M),x},v.prototype.ensureBound=function(M,p){L(M,p)||this.bind(M,p)},v.prototype.unset=function(M,p,x){M&&(this.ensureBound(M,p),p.collection?this.ensureRefsCollection(M,p).remove(x):M[p.name]=void 0)},v.prototype.set=function(M,p,x){M&&(this.ensureBound(M,p),p.collection?this.ensureRefsCollection(M,p).add(x):M[p.name]=x)},X.exports=v},15192:(X,K,u)=>{u.d(K,{A:()=>N});var h=/^class /;function L(P){return h.test(P.toString())}function d(P){return Object.prototype.toString.call(P)==="[object Array]"}function E(){var P=Array.prototype.slice.call(arguments);P.length===1&&d(P[0])&&(P=P[0]);var i=P.pop();return i.$inject=P,i}var v=/constructor\s*[^(]*\(\s*([^)]*)\)/m,M=/^function\s*[^(]*\(\s*([^)]*)\)/m,p=/\/\*([^*]*)\*\//m;function x(P){if(typeof P!="function")throw new Error('Cannot annotate "'+P+'". Expected a function!');var i=P.toString().match(L(P)?v:M);return i?i[1]&&i[1].split(",").map(function(s){return i=s.match(p),i?i[1].trim():s.trim()})||[]:[]}function T(){var P=[];this.factory=function(i,s){return P.push([i,"factory",s]),this},this.value=function(i,s){return P.push([i,"value",s]),this},this.type=function(i,s){return P.push([i,"type",s]),this},this.forEach=function(i){P.forEach(i)}}var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P};function a(P){if(Array.isArray(P)){for(var i=0,s=Array(P.length);i<P.length;i++)s[i]=P[i];return s}else return Array.from(P)}function e(P,i){i=i||{get:function(Z,ot){if(s.push(Z),ot===!1)return null;throw w('No provider for "'+Z+'"!')}};var s=[],O=this._providers=Object.create(i._providers||null),f=this._instances=Object.create(null),A=f.injector=this,w=function(Z){var ot=s.join(" -> ");return s.length=0,new Error(ot?Z+" (Resolving: "+ot+")":Z)},W=function tt(Z,ot){if(!O[Z]&&Z.indexOf(".")!==-1){for(var Q=Z.split("."),at=tt(Q.shift());Q.length;)at=at[Q.shift()];return at}if(g(f,Z))return f[Z];if(g(O,Z)){if(s.indexOf(Z)!==-1)throw s.push(Z),w("Cannot resolve circular dependency!");return s.push(Z),f[Z]=O[Z][0](O[Z][1]),s.pop(),f[Z]}return i.get(Z,ot)},G=function(Z){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof Z!="function")if(d(Z))Z=E(Z.slice());else throw new Error('Cannot invoke "'+Z+'". Expected a function!');var Q=Z.$inject||x(Z),at=Q.map(function(rt){return g(ot,rt)?ot[rt]:W(rt)});return{fn:Z,dependencies:at}},$=function(Z){var ot=G(Z),Q=ot.dependencies,at=ot.fn;return new(Function.prototype.bind.apply(at,[null].concat(a(Q))))},J=function(Z,ot,Q){var at=G(Z,Q),rt=at.dependencies,st=at.fn;return st.call.apply(st,[ot].concat(a(rt)))},q=function(Z){return E(function(ot){return Z.get(ot)})},it=function(Z,ot){if(ot&&ot.length){var Q=Object.create(null),at=Object.create(null),rt=[],st=[],ut=[],lt,Ct,Et,dt;for(var gt in O)lt=O[gt],ot.indexOf(gt)!==-1&&(lt[2]==="private"?(Ct=rt.indexOf(lt[3]),Ct===-1?(Et=lt[3].createChild([],ot),dt=q(Et),rt.push(lt[3]),st.push(Et),ut.push(dt),Q[gt]=[dt,gt,"private",Et]):Q[gt]=[ut[Ct],gt,"private",st[Ct]]):Q[gt]=[lt[2],lt[1]],at[gt]=!0),(lt[2]==="factory"||lt[2]==="type")&&lt[1].$scope&&ot.forEach(function(Mt){lt[1].$scope.indexOf(Mt)!==-1&&(Q[gt]=[lt[2],lt[1]],at[Mt]=!0)});ot.forEach(function(Mt){if(!at[Mt])throw new Error('No provider for "'+Mt+'". Cannot use provider from the parent!')}),Z.unshift(Q)}return new e(Z,A)},nt={factory:J,type:$,value:function(Z){return Z}};P.forEach(function(tt){function Z(rt,st){return rt!=="value"&&d(st)&&(st=E(st.slice())),st}if(tt instanceof T)tt.forEach(function(rt){var st=rt[0],ut=rt[1],lt=rt[2];O[st]=[nt[ut],Z(ut,lt),ut]});else if((typeof tt>"u"?"undefined":c(tt))==="object")if(tt.__exports__){var ot=Object.keys(tt).reduce(function(rt,st){return st.substring(0,2)!=="__"&&(rt[st]=tt[st]),rt},Object.create(null)),Q=new e((tt.__modules__||[]).concat([ot]),A),at=E(function(rt){return Q.get(rt)});tt.__exports__.forEach(function(rt){O[rt]=[at,rt,"private",Q]})}else Object.keys(tt).forEach(function(rt){if(tt[rt][2]==="private"){O[rt]=tt[rt];return}var st=tt[rt][0],ut=tt[rt][1];O[rt]=[nt[st],Z(st,ut),st]})}),this.get=W,this.invoke=J,this.instantiate=$,this.createChild=it}function g(P,i){return Object.hasOwnProperty.call(P,i)}var t=u(51270),o=u.n(t),r=u(97975),y=u(12619),m=u(33225),n=u(10018),l=1;function _(P,i){r.A.call(this,P,l),this.CONNECTION_STYLE=i.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=i.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=i.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}o()(_,r.A),_.prototype.canRender=function(){return!0},_.prototype.drawShape=function(i,s){var O=(0,m.vt)("rect");return(0,m.CF)(O,{x:0,y:0,width:s.width||0,height:s.height||0}),(0,n.eb)(s)?(0,m.CF)(O,this.FRAME_STYLE):(0,m.CF)(O,this.SHAPE_STYLE),(0,m.BC)(i,O),O},_.prototype.drawConnection=function(i,s){var O=(0,y.RJ)(s.waypoints,this.CONNECTION_STYLE);return(0,m.BC)(i,O),O},_.prototype.getShapePath=function(i){var s=i.x,O=i.y,f=i.width,A=i.height,w=[["M",s,O],["l",f,0],["l",0,A],["l",-f,0],["z"]];return(0,y.tx)(w)},_.prototype.getConnectionPath=function(i){var s=i.waypoints,O,f,A=[];for(O=0;f=s[O];O++)f=f.original||f,A.push([O===0?"M":"L",f.x,f.y]);return(0,y.tx)(A)},_.$inject=["eventBus","styles"];var S=u(19187);const D={__init__:["defaultRenderer"],defaultRenderer:["type",_],styles:["type",S.A]};var b=u(69034),I=u(54343),U=u(15176),F=u(95820),H=u(40969);const V={__depends__:[D],__init__:["canvas"],canvas:["type",b.A],elementRegistry:["type",I.A],elementFactory:["type",U.A],eventBus:["type",F.A],graphicsFactory:["type",H.A]};function z(P){var i=[],s=[];function O(W){return i.indexOf(W)>=0}function f(W){i.push(W)}function A(W){O(W)||((W.__depends__||[]).forEach(A),!O(W)&&(f(W),(W.__init__||[]).forEach(function(G){s.push(G)})))}P.forEach(A);var w=new e(i);return s.forEach(function(W){try{w[typeof W=="string"?"get":"invoke"](W)}catch(G){throw console.error("Failed to instantiate component"),console.error(G.stack),G}}),w}function k(P){P=P||{};var i={config:["value",P]},s=[i,V].concat(P.modules||[]);return z(s)}function N(P,i){this.injector=i=i||k(P),this.get=i.get,this.invoke=i.invoke,this.get("eventBus").fire("diagram.init")}N.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},N.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")}},17389:(X,K,u)=>{u.d(K,{A:()=>d});var h=u(98218),L=u.n(h);function d(E,v){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[]},this._injector=v,this._eventBus=E,this._uid=1,E.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}d.$inject=["eventBus","injector"],d.prototype.execute=function(E,v){if(!E)throw new Error("command required");var M={command:E,context:v};this._pushAction(M),this._internalExecute(M),this._popAction(M)},d.prototype.canExecute=function(E,v){var M={command:E,context:v},p=this._getHandler(E),x=this._fire(E,"canExecute",M);if(x===void 0){if(!p)return!1;p.canExecute&&(x=p.canExecute(v))}return x},d.prototype.clear=function(E){this._stack.length=0,this._stackIdx=-1,E!==!1&&this._fire("changed")},d.prototype.undo=function(){var E=this._getUndoAction(),v;if(E){for(this._pushAction(E);E&&(this._internalUndo(E),v=this._getUndoAction(),!(!v||v.id!==E.id));)E=v;this._popAction()}},d.prototype.redo=function(){var E=this._getRedoAction(),v;if(E){for(this._pushAction(E);E&&(this._internalExecute(E,!0),v=this._getRedoAction(),!(!v||v.id!==E.id));)E=v;this._popAction()}},d.prototype.register=function(E,v){this._setHandler(E,v)},d.prototype.registerHandler=function(E,v){if(!E||!v)throw new Error("command and handlerCls must be defined");var M=this._injector.instantiate(v);this.register(E,M)},d.prototype.canUndo=function(){return!!this._getUndoAction()},d.prototype.canRedo=function(){return!!this._getRedoAction()},d.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},d.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},d.prototype._internalUndo=function(E){var v=this,M=E.command,p=E.context,x=this._getHandler(M);this._atomicDo(function(){v._fire(M,"revert",E),x.revert&&v._markDirty(x.revert(p)),v._revertedAction(E),v._fire(M,"reverted",E)})},d.prototype._fire=function(E,v,M){arguments.length<3&&(M=v,v=null);var p=v?[E+"."+v,v]:[E],x,T,c;for(M=this._eventBus.createEvent(M),x=0;(T=p[x])&&(c=this._eventBus.fire("commandStack."+T,M),!M.cancelBubble);x++);return c},d.prototype._createId=function(){return this._uid++},d.prototype._atomicDo=function(E){var v=this._currentExecution;v.atomic=!0;try{E()}finally{v.atomic=!1}},d.prototype._internalExecute=function(E,v){var M=this,p=E.command,x=E.context,T=this._getHandler(p);if(!T)throw new Error("no command handler registered for <"+p+">");this._pushAction(E),v||(this._fire(p,"preExecute",E),T.preExecute&&T.preExecute(x),this._fire(p,"preExecuted",E)),this._atomicDo(function(){M._fire(p,"execute",E),T.execute&&M._markDirty(T.execute(x)),M._executedAction(E,v),M._fire(p,"executed",E)}),v||(this._fire(p,"postExecute",E),T.postExecute&&T.postExecute(x),this._fire(p,"postExecuted",E)),this._popAction(E)},d.prototype._pushAction=function(E){var v=this._currentExecution,M=v.actions,p=M[0];if(v.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+E.command+")");E.id||(E.id=p&&p.id||this._createId()),M.push(E)},d.prototype._popAction=function(){var E=this._currentExecution,v=E.actions,M=E.dirty;v.pop(),v.length||(this._eventBus.fire("elements.changed",{elements:(0,h.uniqueBy)("id",M.reverse())}),M.length=0,this._fire("changed"))},d.prototype._markDirty=function(E){var v=this._currentExecution;E&&(E=(0,h.isArray)(E)?E:[E],v.dirty=v.dirty.concat(E))},d.prototype._executedAction=function(E,v){var M=++this._stackIdx;v||this._stack.splice(M,this._stack.length,E)},d.prototype._revertedAction=function(E){this._stackIdx--},d.prototype._getHandler=function(E){return this._handlerMap[E]},d.prototype._setHandler=function(E,v){if(!E||!v)throw new Error("command and handler required");if(this._handlerMap[E])throw new Error("overriding handler for command <"+E+">");this._handlerMap[E]=v}},69034:(X,K,u)=>{u.d(K,{A:()=>e});var h=u(98218),L=u.n(h),d=u(6958),E=u(10018),v=u(33225);function M(t,o){return Math.round(t*o)/o}function p(t){return(0,h.isNumber)(t)?t+"px":t}function x(t){t=(0,h.assign)({},{width:"100%",height:"100%"},t);var o=t.container||document.body,r=document.createElement("div");return r.setAttribute("class","djs-container"),(0,h.assign)(r.style,{position:"relative",overflow:"hidden",width:p(t.width),height:p(t.height)}),o.appendChild(r),r}function T(t,o,r){var y=(0,v.vt)("g");(0,v.Ly)(y).add(o);var m=r!==void 0?r:t.childNodes.length-1;return t.insertBefore(y,t.childNodes[m]||null),y}var c="base",a={shape:["x","y","width","height"],connection:["waypoints"]};function e(t,o,r,y){this._eventBus=o,this._elementRegistry=y,this._graphicsFactory=r,this._init(t||{})}e.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],e.prototype._init=function(t){var o=this._eventBus,r=this._container=x(t),y=this._svg=(0,v.vt)("svg");(0,v.CF)(y,{width:"100%",height:"100%"}),(0,v.BC)(r,y);var m=this._viewport=T(y,"viewport");this._layers={},t.deferUpdate!==!1&&(this._viewboxChanged=(0,h.debounce)((0,h.bind)(this._viewboxChanged,this),300)),o.on("diagram.init",function(){o.fire("canvas.init",{svg:y,viewport:m})},this),o.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed"],function(){delete this._cachedViewbox},this),o.on("diagram.destroy",500,this._destroy,this),o.on("diagram.clear",500,this._clear,this)},e.prototype._destroy=function(t){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var o=this._container.parentNode;o&&o.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},e.prototype._clear=function(){var t=this,o=this._elementRegistry.getAll();o.forEach(function(r){var y=(0,E.Pw)(r);y==="root"?t.setRootElement(null,!0):t._removeElement(r,y)}),delete this._cachedViewbox},e.prototype.getDefaultLayer=function(){return this.getLayer(c,0)},e.prototype.getLayer=function(t,o){if(!t)throw new Error("must specify a name");var r=this._layers[t];if(r||(r=this._layers[t]=this._createLayer(t,o)),typeof o<"u"&&r.index!==o)throw new Error("layer <"+t+"> already created at index <"+o+">");return r.group},e.prototype._createLayer=function(t,o){o||(o=0);var r=(0,h.reduce)(this._layers,function(y,m){return o>=m.index&&y++,y},0);return{group:T(this._viewport,"layer-"+t,r),index:o}},e.prototype.getContainer=function(){return this._container},e.prototype._updateMarker=function(t,o,r){var y;t.id||(t=this._elementRegistry.get(t)),y=this._elementRegistry._elements[t.id],y&&((0,h.forEach)([y.gfx,y.secondaryGfx],function(m){m&&(r?(0,v.Ly)(m).add(o):(0,v.Ly)(m).remove(o))}),this._eventBus.fire("element.marker.update",{element:t,gfx:y.gfx,marker:o,add:!!r}))},e.prototype.addMarker=function(t,o){this._updateMarker(t,o,!0)},e.prototype.removeMarker=function(t,o){this._updateMarker(t,o,!1)},e.prototype.hasMarker=function(t,o){t.id||(t=this._elementRegistry.get(t));var r=this.getGraphics(t);return(0,v.Ly)(r).has(o)},e.prototype.toggleMarker=function(t,o){this.hasMarker(t,o)?this.removeMarker(t,o):this.addMarker(t,o)},e.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement},e.prototype.setRootElement=function(t,o){t&&this._ensureValid("root",t);var r=this._rootElement,y=this._elementRegistry,m=this._eventBus;if(r){if(!o)throw new Error("rootElement already set, need to specify override");m.fire("root.remove",{element:r}),m.fire("root.removed",{element:r}),y.remove(r)}if(t){var n=this.getDefaultLayer();m.fire("root.add",{element:t}),y.add(t,n,this._svg),m.fire("root.added",{element:t,gfx:n})}return this._rootElement=t,t},e.prototype._ensureValid=function(t,o){if(!o.id)throw new Error("element must have an id");if(this._elementRegistry.get(o.id))throw new Error("element with id "+o.id+" already exists");var r=a[t],y=(0,h.every)(r,function(m){return typeof o[m]<"u"});if(!y)throw new Error("must supply { "+r.join(", ")+" } with "+t)},e.prototype._setParent=function(t,o,r){(0,d.WQ)(o.children,t,r),t.parent=o},e.prototype._addElement=function(t,o,r,y){r=r||this.getRootElement();var m=this._eventBus,n=this._graphicsFactory;this._ensureValid(t,o),m.fire(t+".add",{element:o,parent:r}),this._setParent(o,r,y);var l=n.create(t,o,y);return this._elementRegistry.add(o,l),n.update(t,o,l),m.fire(t+".added",{element:o,gfx:l}),o},e.prototype.addShape=function(t,o,r){return this._addElement("shape",t,o,r)},e.prototype.addConnection=function(t,o,r){return this._addElement("connection",t,o,r)},e.prototype._removeElement=function(t,o){var r=this._elementRegistry,y=this._graphicsFactory,m=this._eventBus;if(t=r.get(t.id||t),!!t)return m.fire(o+".remove",{element:t}),y.remove(t),(0,d.TF)(t.parent&&t.parent.children,t),t.parent=null,m.fire(o+".removed",{element:t}),r.remove(t),t},e.prototype.removeShape=function(t){return this._removeElement(t,"shape")},e.prototype.removeConnection=function(t){return this._removeElement(t,"connection")},e.prototype.getGraphics=function(t,o){return this._elementRegistry.getGraphics(t,o)},e.prototype._changeViewbox=function(t){this._eventBus.fire("canvas.viewbox.changing"),t.apply(this),this._cachedViewbox=null,this._viewboxChanged()},e.prototype._viewboxChanged=function(){this._container&&this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},e.prototype.viewbox=function(t){if(t===void 0&&this._cachedViewbox)return this._cachedViewbox;var o=this._viewport,r,y=this.getSize(),m,n,l,_,S;if(t)this._changeViewbox(function(){l=Math.min(y.width/t.width,y.height/t.height);var D=this._svg.createSVGMatrix().scale(l).translate(-t.x,-t.y);(0,v.pd)(o,D)});else return r=this.getDefaultLayer().getBBox(),n=(0,v.pd)(o),m=n?n.matrix:(0,v.uK)(),l=M(m.a,1e3),_=M(-m.e||0,1e3),S=M(-m.f||0,1e3),t=this._cachedViewbox={x:_?_/l:0,y:S?S/l:0,width:y.width/l,height:y.height/l,scale:l,inner:{width:r.width,height:r.height,x:r.x,y:r.y},outer:y},t;return t},e.prototype.scroll=function(t){var o=this._viewport,r=o.getCTM();return t&&this._changeViewbox(function(){t=(0,h.assign)({dx:0,dy:0},t||{}),r=this._svg.createSVGMatrix().translate(t.dx,t.dy).multiply(r),g(o,r)}),{x:r.e,y:r.f}},e.prototype.zoom=function(t,o){if(!t)return this.viewbox(t).scale;if(t==="fit-viewport")return this._fitViewport(o);var r,y;return this._changeViewbox(function(){typeof o!="object"&&(r=this.viewbox().outer,o={x:r.width/2,y:r.height/2}),y=this._setZoom(t,o)}),M(y.a,1e3)};function g(t,o){var r="matrix("+o.a+","+o.b+","+o.c+","+o.d+","+o.e+","+o.f+")";t.setAttribute("transform",r)}e.prototype._fitViewport=function(t){var o=this.viewbox(),r=o.outer,y=o.inner,m,n;return y.x>=0&&y.y>=0&&y.x+y.width<=r.width&&y.y+y.height<=r.height&&!t?n={x:0,y:0,width:Math.max(y.width+y.x,r.width),height:Math.max(y.height+y.y,r.height)}:(m=Math.min(1,r.width/y.width,r.height/y.height),n={x:y.x+(t?y.width/2-r.width/m/2:0),y:y.y+(t?y.height/2-r.height/m/2:0),width:r.width/m,height:r.height/m}),this.viewbox(n),this.viewbox(!1).scale},e.prototype._setZoom=function(t,o){var r=this._svg,y=this._viewport,m=r.createSVGMatrix(),n=r.createSVGPoint(),l,_,S,D,b;S=y.getCTM();var I=S.a;return o?(l=(0,h.assign)(n,o),_=l.matrixTransform(S.inverse()),D=m.translate(_.x,_.y).scale(1/I*t).translate(-_.x,-_.y),b=S.multiply(D)):b=m.scale(t),g(this._viewport,b),b},e.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},e.prototype.getAbsoluteBBox=function(t){var o=this.viewbox(),r;if(t.waypoints){var y=this.getGraphics(t);r=y.getBBox()}else r=t;var m=r.x*o.scale-o.x*o.scale,n=r.y*o.scale-o.y*o.scale,l=r.width*o.scale,_=r.height*o.scale;return{x:m,y:n,width:l,height:_}},e.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")}},15176:(X,K,u)=>{u.d(K,{A:()=>E});var h=u(49096),L=u(98218),d=u.n(L);function E(){this._uid=12}E.prototype.createRoot=function(v){return this.create("root",v)},E.prototype.createLabel=function(v){return this.create("label",v)},E.prototype.createShape=function(v){return this.create("shape",v)},E.prototype.createConnection=function(v){return this.create("connection",v)},E.prototype.create=function(v,M){return M=(0,L.assign)({},M||{}),M.id||(M.id=v+"_"+this._uid++),(0,h.vt)(v,M)}},54343:(X,K,u)=>{u.d(K,{A:()=>d});var h=u(33225),L="data-element-id";function d(E){this._elements={},this._eventBus=E}d.$inject=["eventBus"],d.prototype.add=function(E,v,M){var p=E.id;this._validateId(p),(0,h.CF)(v,L,p),M&&(0,h.CF)(M,L,p),this._elements[p]={element:E,gfx:v,secondaryGfx:M}},d.prototype.remove=function(E){var v=this._elements,M=E.id||E,p=M&&v[M];p&&((0,h.CF)(p.gfx,L,""),p.secondaryGfx&&(0,h.CF)(p.secondaryGfx,L,""),delete v[M])},d.prototype.updateId=function(E,v){this._validateId(v),typeof E=="string"&&(E=this.get(E)),this._eventBus.fire("element.updateId",{element:E,newId:v});var M=this.getGraphics(E),p=this.getGraphics(E,!0);this.remove(E),E.id=v,this.add(E,M,p)},d.prototype.get=function(E){var v;typeof E=="string"?v=E:v=E&&(0,h.CF)(E,L);var M=this._elements[v];return M&&M.element},d.prototype.filter=function(E){var v=[];return this.forEach(function(M,p){E(M,p)&&v.push(M)}),v},d.prototype.getAll=function(){return this.filter(function(E){return E})},d.prototype.forEach=function(E){var v=this._elements;Object.keys(v).forEach(function(M){var p=v[M],x=p.element,T=p.gfx;return E(x,T)})},d.prototype.getGraphics=function(E,v){var M=E.id||E,p=this._elements[M];return p&&(v?p.secondaryGfx:p.gfx)},d.prototype._validateId=function(E){if(!E)throw new Error("element must have an id");if(this._elements[E])throw new Error("element with id "+E+" already added")}},95820:(X,K,u)=>{u.d(K,{A:()=>M});var h=u(98218),L=u.n(h),d="__fn",E=1e3,v=Array.prototype.slice;function M(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}M.prototype.on=function(T,c,a,e){if(T=(0,h.isArray)(T)?T:[T],(0,h.isFunction)(c)&&(e=a,a=c,c=E),!(0,h.isNumber)(c))throw new Error("priority must be a number");var g=a;e&&(g=(0,h.bind)(a,e),g[d]=a[d]||a);var t=this;T.forEach(function(o){t._addListener(o,{priority:c,callback:g,next:null})})},M.prototype.once=function(T,c,a,e){var g=this;if((0,h.isFunction)(c)&&(e=a,a=c,c=E),!(0,h.isNumber)(c))throw new Error("priority must be a number");function t(){var o=a.apply(e,arguments);return g.off(T,t),o}t[d]=a,this.on(T,c,t)},M.prototype.off=function(T,c){T=(0,h.isArray)(T)?T:[T];var a=this;T.forEach(function(e){a._removeListener(e,c)})},M.prototype.createEvent=function(T){var c=new p;return c.init(T),c},M.prototype.fire=function(T,c){var a,e,g,t;if(t=v.call(arguments),typeof T=="object"&&(c=T,T=c.type),!T)throw new Error("no event type specified");if(e=this._listeners[T],!!e){c instanceof p?a=c:a=this.createEvent(c),t[0]=a;var o=a.type;T!==o&&(a.type=T);try{g=this._invokeListeners(a,t,e)}finally{T!==o&&(a.type=o)}return g===void 0&&a.defaultPrevented&&(g=!1),g}},M.prototype.handleError=function(T){return this.fire("error",{error:T})===!1},M.prototype._destroy=function(){this._listeners={}},M.prototype._invokeListeners=function(T,c,a){for(var e;a&&!T.cancelBubble;)e=this._invokeListener(T,c,a),a=a.next;return e},M.prototype._invokeListener=function(T,c,a){var e;try{e=x(a.callback,c),e!==void 0&&(T.returnValue=e,T.stopPropagation()),e===!1&&T.preventDefault()}catch(g){if(!this.handleError(g))throw console.error("unhandled error in event listener"),console.error(g.stack),g}return e},M.prototype._addListener=function(T,c){var a=this._getListeners(T),e;if(!a){this._setListeners(T,c);return}for(;a;){if(a.priority<c.priority){c.next=a,e?e.next=c:this._setListeners(T,c);return}e=a,a=a.next}e.next=c},M.prototype._getListeners=function(T){return this._listeners[T]},M.prototype._setListeners=function(T,c){this._listeners[T]=c},M.prototype._removeListener=function(T,c){var a=this._getListeners(T),e,g,t;if(!c){this._setListeners(T,null);return}for(;a;)e=a.next,t=a.callback,(t===c||t[d]===c)&&(g?g.next=e:this._setListeners(T,e)),g=a,a=e};function p(){}p.prototype.stopPropagation=function(){this.cancelBubble=!0},p.prototype.preventDefault=function(){this.defaultPrevented=!0},p.prototype.init=function(T){(0,h.assign)(this,T||{})};function x(T,c){return T.apply(null,c)}},97975:(X,K,u)=>{u.d(K,{A:()=>L});var h=1e3;function L(d,E){var v=this;E=E||h,d.on(["render.shape","render.connection"],E,function(M,p){var x=M.type,T=p.element,c=p.gfx;if(v.canRender(T))return x==="render.shape"?v.drawShape(c,T):v.drawConnection(c,T)}),d.on(["render.getShapePath","render.getConnectionPath"],E,function(M,p){if(v.canRender(p))return M.type==="render.getShapePath"?v.getShapePath(p):v.getConnectionPath(p)})}L.prototype.canRender=function(){},L.prototype.drawShape=function(){},L.prototype.drawConnection=function(){},L.prototype.getShapePath=function(){},L.prototype.getConnectionPath=function(){}},41666:(X,K,u)=>{u.d(K,{A:()=>p});var h=u(98218);function L(x){return x&&x[x.length-1]}function d(x){return x.y}function E(x){return x.x}var v={left:E,center:E,right:function(x){return x.x+x.width},top:d,middle:d,bottom:function(x){return x.y+x.height}};function M(x){this._modeling=x}M.$inject=["modeling"],M.prototype._getOrientationDetails=function(x){var T=["top","bottom","middle"],c="x",a="width";return T.indexOf(x)!==-1&&(c="y",a="height"),{axis:c,dimension:a}},M.prototype._isType=function(x,T){return T.indexOf(x)!==-1},M.prototype._alignmentPosition=function(x,T){var c=this._getOrientationDetails(x),a=c.axis,e=c.dimension,g={},t={},o=!1,r,y,m;function n(l,_){return Math.round((l[a]+_[a]+_[e])/2)}if(this._isType(x,["left","top"]))g[x]=T[0][a];else if(this._isType(x,["right","bottom"]))m=L(T),g[x]=m[a]+m[e];else if(this._isType(x,["center","middle"])){if((0,h.forEach)(T,function(l){var _=l[a]+Math.round(l[e]/2);t[_]?t[_].elements.push(l):t[_]={elements:[l],center:_}}),r=(0,h.sortBy)(t,function(l){return l.elements.length>1&&(o=!0),l.elements.length}),o)return g[x]=L(r).center,g;y=T[0],T=(0,h.sortBy)(T,function(l){return l[a]+l[e]}),m=L(T),g[x]=n(y,m)}return g},M.prototype.trigger=function(x,T){var c=this._modeling,a=(0,h.filter)(x,function(o){return!(o.waypoints||o.host||o.labelTarget)}),e=v[T],g=(0,h.sortBy)(a,e),t=this._alignmentPosition(T,g);c.alignElements(g,t)};const p={__init__:["alignElements"],alignElements:["type",M]}},20418:(X,K,u)=>{u.d(K,{A:()=>c});var h=u(51270),L=u.n(h),d=u(10018),E=u(65911),v=u(98218),M=u(29086);function p(a,e,g,t){M.A.call(this,a),this._elementRegistry=e,this._modeling=g,this._rules=t;var o=this;this.postExecuted(["shape.create"],function(r){var y=r.context,m=y.hints||{},n=y.shape,l=y.parent||y.newParent;m.autoResize!==!1&&o._expand([n],l)}),this.postExecuted(["elements.move"],function(r){var y=r.context,m=(0,v.flatten)((0,v.values)(y.closure.topLevel)),n=y.hints,l=n?n.autoResize:!0;if(l!==!1){var _=(0,v.groupBy)(m,function(S){return S.parent.id});(0,v.forEach)(_,function(S,D){(0,v.isArray)(l)&&(S=S.filter(function(b){return(0,v.find)(l,(0,v.matchPattern)({id:b.id}))})),o._expand(S,D)})}}),this.postExecuted(["shape.toggleCollapse"],function(r){var y=r.context,m=y.hints,n=y.shape;m&&m.autoResize===!1||n.collapsed||o._expand(n.children||[],n)}),this.postExecuted(["shape.resize"],function(r){var y=r.context,m=y.hints,n=y.shape,l=n.parent;m&&m.autoResize===!1||l&&o._expand([n],l)})}p.$inject=["eventBus","elementRegistry","modeling","rules"],L()(p,M.A),p.prototype._getOptimalBounds=function(a,e){var g=this.getOffset(e),t=this.getPadding(e),o=(0,E.Fy)((0,d.U7)(a)),r=(0,E.Fy)(e),y={};return o.top-r.top<t.top&&(y.top=o.top-g.top),o.left-r.left<t.left&&(y.left=o.left-g.left),r.right-o.right<t.right&&(y.right=o.right+g.right),r.bottom-o.bottom<t.bottom&&(y.bottom=o.bottom+g.bottom),(0,E.cD)((0,v.assign)({},r,y))},p.prototype._expand=function(a,e){typeof e=="string"&&(e=this._elementRegistry.get(e));var g=this._rules.allowed("element.autoResize",{elements:a,target:e});if(g){var t=this._getOptimalBounds(a,e);if(x(t,e)){var o=T((0,v.pick)(e,["x","y","width","height"]),t);this.resize(e,t,{autoResize:o});var r=e.parent;r&&this._expand([e],r)}}},p.prototype.getOffset=function(a){return{top:60,bottom:60,left:100,right:100}},p.prototype.getPadding=function(a){return{top:2,bottom:2,left:15,right:15}},p.prototype.resize=function(a,e,g){this._modeling.resizeShape(a,e,null,g)};function x(a,e){return a.x!==e.x||a.y!==e.y||a.width!==e.width||a.height!==e.height}function T(a,e){var g="";return a=(0,E.Fy)(a),e=(0,E.Fy)(e),a.top>e.top&&(g=g.concat("n")),a.right<e.right&&(g=g.concat("w")),a.bottom<e.bottom&&(g=g.concat("s")),a.left>e.left&&(g=g.concat("e")),g}const c={__init__:["autoResize"],autoResize:["type",p]}},69855:(X,K,u)=>{u.d(K,{LS:()=>o,qh:()=>r,zk:()=>n,fU:()=>_,Pj:()=>S,YU:()=>m});var h=u(86439),L=u(92159),d=u(33225),E=u(52965),v=u(38305),M=u.n(v),p=Math.round,x=Math.max;function T(b,I){var U=b.x,F=b.y;return[["M",U,F],["m",0,-I],["a",I,I,0,1,1,0,2*I],["a",I,I,0,1,1,0,-2*I],["z"]]}function c(b){var I=[];return b.forEach(function(U,F){I.push([F===0?"M":"L",U.x,U.y])}),I}var a=10;function e(b,I){var U,F;for(U=0;F=b[U];U++)if((0,L.cK)(F,I)<=a)return{point:b[U],bendpoint:!0,index:U};return null}function g(b,I){var U=M()(T(I,a),c(b)),F=U[0],H=U[U.length-1],V;return F?F!==H?F.segment2!==H.segment2?(V=x(F.segment2,H.segment2)-1,{point:b[V],bendpoint:!0,index:V}):{point:{x:p(F.x+H.x)/2,y:p(F.y+H.y)/2},index:F.segment2}:{point:{x:p(F.x),y:p(F.y)},index:F.segment2}:null}function t(b,I){return e(b,I)||g(b,I)}var o="djs-bendpoint",r="djs-segment-dragger";function y(b,I){var U=(0,h.gK)(I),F=b._container.getBoundingClientRect(),H;H={x:F.left,y:F.top};var V=b.viewbox();return{x:V.x+(U.x-H.x)/V.scale,y:V.y+(U.y-H.y)/V.scale}}function m(b,I,U){var F=y(b,U),H=t(I,F);return H}function n(b,I){var U=(0,d.vt)("g");(0,d.Ly)(U).add(o),(0,d.BC)(b,U);var F=(0,d.vt)("circle");(0,d.CF)(F,{cx:0,cy:0,r:4}),(0,d.Ly)(F).add("djs-visual"),(0,d.BC)(U,F);var H=(0,d.vt)("circle");return(0,d.CF)(H,{cx:0,cy:0,r:10}),(0,d.Ly)(H).add("djs-hit"),(0,d.BC)(U,H),I&&(0,d.Ly)(U).add(I),U}function l(b,I,U,F){var H=(0,d.vt)("g");(0,d.BC)(b,H);var V=14,z=3,k=6,N=D(I,U,F),P=z+k,i=(0,d.vt)("rect");(0,d.CF)(i,{x:-V/2,y:-z/2,width:V,height:z}),(0,d.Ly)(i).add("djs-visual"),(0,d.BC)(H,i);var s=(0,d.vt)("rect");return(0,d.CF)(s,{x:-N/2,y:-P/2,width:N,height:P}),(0,d.Ly)(s).add("djs-hit"),(0,d.BC)(H,s),(0,E.e$)(H,F==="v"?90:0,0,0),H}function _(b,I,U){var F=(0,d.vt)("g"),H=(0,L.P8)(I,U),V=(0,L.ke)(I,U);return(0,d.BC)(b,F),l(F,I,U,V),(0,d.Ly)(F).add(r),(0,d.Ly)(F).add(V==="h"?"horizontal":"vertical"),(0,E.Tl)(F,H.x,H.y),F}function S(b){return Math.abs(Math.round(b*2/3))}function D(b,I,U){var F=I.x-b.x,H=I.y-b.y;return S(U==="h"?F:H)}},6513:(X,K,u)=>{u.d(K,{A:()=>a});var h=u(98218),L=u.n(h),d=u(52687),E=u.n(d),v=u(69855),M=u(25141),p=u.n(M),x=u(92159),T=u(33225),c=u(52965);function a(g,t,o,r,y){var m=this;function n(P,i,s){var O=P.index,f=P.point,A,w,W,G,$,J;return O<=0||P.bendpoint?!1:(A=i[O-1],w=i[O],W=(0,x.P8)(A,w),G=(0,x.ke)(A,w),$=Math.abs(f.x-W.x),J=Math.abs(f.y-W.y),G&&$<=s&&J<=s)}function l(P,i){var s=P.waypoints,O,f,A,w;return i.index<=0||i.bendpoint||(O={start:s[i.index-1],end:s[i.index]},f=(0,x.ke)(O.start,O.end),!f)?null:(f==="h"?A=O.end.x-O.start.x:A=O.end.y-O.start.y,w=(0,v.Pj)(A)/2,w)}function _(P,i){var s=i.waypoints,O=(0,v.YU)(t,s,P),f;if(O)return f=l(i,O),n(O,s,f)?y.start(P,i,O.index):r.start(P,i,O.index,!O.bendpoint),!0}function S(P,i,s){d.event.bind(P,i,function(O){o.triggerMouseEvent(i,O,s),O.stopPropagation()})}function D(P,i){var s=t.getLayer("overlays"),O=(0,d.query)('.djs-bendpoints[data-element-id="'+p()(P.id)+'"]',s);return!O&&i&&(O=(0,T.vt)("g"),(0,T.CF)(O,{"data-element-id":P.id}),(0,T.Ly)(O).add("djs-bendpoints"),(0,T.BC)(s,O),S(O,"mousedown",P),S(O,"click",P),S(O,"dblclick",P)),O}function b(P,i){return(0,d.query)('.djs-segment-dragger[data-segment-idx="'+P+'"]',i)}function I(P,i){i.waypoints.filter(m.getConnectionBendpointsFilter).forEach(function(s,O){var f=(0,v.zk)(P);(0,T.BC)(P,f),(0,c.Tl)(f,s.x,s.y)}),(0,v.zk)(P,"floating")}function U(P,i){for(var s=i.waypoints,O,f,A,w=1;w<s.length;w++)O=s[w-1],f=s[w],(0,x.ke)(O,f)&&(A=(0,v.fU)(P,O,f),(0,T.CF)(A,{"data-segment-idx":w}),S(A,"mousemove",i))}function F(P){(0,h.forEach)((0,d.queryAll)("."+v.LS,P),function(i){(0,T.TF)(i)})}function H(P){(0,h.forEach)((0,d.queryAll)("."+v.qh,P),function(i){(0,T.TF)(i)})}function V(P){var i=D(P);return i||(i=D(P,!0),I(i,P),U(i,P)),i}function z(P){var i=D(P);i&&(H(i),F(i),U(i,P),I(i,P))}function k(P,i){var s=(0,d.query)(".floating",P),O=i.point;s&&(0,c.Tl)(s,O.x,O.y)}function N(P,i,s){var O=b(i.index,P),f=s[i.index-1],A=s[i.index],w=i.point,W=(0,x.P8)(f,A),G=(0,x.ke)(f,A),$,J;O&&($=e(O),J={x:w.x-W.x,y:w.y-W.y},G==="v"&&(J={x:J.y,y:J.x}),(0,c.Tl)($,J.x,J.y))}g.on("connection.changed",function(P){z(P.element)}),g.on("connection.remove",function(P){var i=D(P.element);i&&(0,T.TF)(i)}),g.on("element.marker.update",function(P){var i=P.element,s;i.waypoints&&(s=V(i),P.add?(0,T.Ly)(s).add(P.marker):(0,T.Ly)(s).remove(P.marker))}),g.on("element.mousemove",function(P){var i=P.element,s=i.waypoints,O,f;if(s){if(O=D(i,!0),f=(0,v.YU)(t,s,P.originalEvent),!f)return;k(O,f),f.bendpoint||N(O,f,s)}}),g.on("element.mousedown",function(P){var i=P.originalEvent,s=P.element,O=s.waypoints;if(O)return _(i,s)}),g.on("selection.changed",function(P){var i=P.newSelection,s=i[0];s&&s.waypoints&&V(s)}),g.on("element.hover",function(P){var i=P.element;i.waypoints&&(V(i),o.registerEvent(P.gfx,"mousemove","element.mousemove"))}),g.on("element.out",function(P){o.unregisterEvent(P.gfx,"mousemove","element.mousemove")}),g.on("element.updateId",function(P){var i=P.element,s=P.newId;if(i.waypoints){var O=D(i);O&&(0,T.CF)(O,{"data-element-id":s})}}),this.addHandles=V,this.updateHandles=z,this.getBendpointsContainer=D,this.getSegmentDragger=b}a.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function e(g){return(0,d.query)(".djs-visual",g)}a.prototype.getConnectionBendpointsFilter=function(g,t,o){return!0}},45041:(X,K,u)=>{u.d(K,{A:()=>g});var h=u(92159),L=u(69855),d=u(65911),E=u(33225),v=u(52965),M="connect-hover",p="djs-updating";function x(t,o,r){return T(t,o,t[o]+r)}function T(t,o,r){return{x:o==="x"?r:t.x,y:o==="y"?r:t.y}}function c(t,o,r,y){var m=Math.max(o[y],r[y]),n=Math.min(o[y],r[y]),l=20,_=Math.min(Math.max(n+l,t[y]),m-l);return T(o,y,_)}function a(t){return t==="x"?"y":"x"}function e(t,o,r){var y,m;return t.original?t.original:(y=(0,d.pp)(o),m=a(r),T(t,m,y[m]))}function g(t,o,r,y,m,n){var l=t.get("connectionDocking",!1);this.start=function(I,U,F){var H,V=r.getGraphics(U),z=F-1,k=F,N=U.waypoints,P=N[z],i=N[k],s=(0,L.YU)(r,N,I),O,f,A;O=(0,h.ke)(P,i),O&&(f=O==="v"?"x":"y",z===0&&(P=e(P,U.source,f)),k===N.length-1&&(i=e(i,U.target,f)),s?A=s.point:A={x:(P.x+i.x)/2,y:(P.y+i.y)/2},H={connection:U,segmentStartIndex:z,segmentEndIndex:k,segmentStart:P,segmentEnd:i,axis:f,dragPosition:A},y.init(I,A,"connectionSegment.move",{cursor:f==="x"?"resize-ew":"resize-ns",data:{connection:U,connectionGfx:V,context:H}}))};function _(I,U){if(!l)return U;var F=I.waypoints,H;return I.waypoints=U,H=l.getCroppedWaypoints(I),I.waypoints=F,H}function S(I){m.update("connection",I.connection,I.connectionGfx)}function D(I,U,F){var H=I.newWaypoints,V=I.segmentStartIndex+U,z=H[V],k=I.segmentEndIndex+U,N=H[k],P=a(I.axis),i=c(F,z,N,P);(0,v.Tl)(I.draggerGfx,i.x,i.y)}function b(I,U){var F=0,H=I.filter(function(V,z){return(0,h.XP)(I[z-1],I[z+1],V)?(F=z<=U?F-1:F,!1):!0});return{waypoints:H,segmentOffset:F}}o.on("connectionSegment.move.start",function(I){var U=I.context,F=I.connection,H=r.getLayer("overlays");U.originalWaypoints=F.waypoints.slice(),U.draggerGfx=(0,L.fU)(H,U.segmentStart,U.segmentEnd),(0,E.Ly)(U.draggerGfx).add("djs-dragging"),r.addMarker(F,p)}),o.on("connectionSegment.move.move",function(I){var U=I.context,F=U.connection,H=U.segmentStartIndex,V=U.segmentEndIndex,z=U.segmentStart,k=U.segmentEnd,N=U.axis,P=U.originalWaypoints.slice(),i=x(z,N,I["d"+N]),s=x(k,N,I["d"+N]),O=P.length,f=0;P[H]=i,P[V]=s;var A,w;H<2&&(A=(0,d.vc)(F.source,i),H===1?A==="intersect"&&(P.shift(),P[0]=i,f--):A!=="intersect"&&(P.unshift(z),f++)),V>O-3&&(w=(0,d.vc)(F.target,s),V===O-2?w==="intersect"&&(P.pop(),P[P.length-1]=s):w!=="intersect"&&P.push(k)),U.newWaypoints=F.waypoints=_(F,P),D(U,f,I),U.newSegmentStartIndex=H+f,S(I)}),o.on("connectionSegment.move.hover",function(I){I.context.hover=I.hover,r.addMarker(I.hover,M)}),o.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(I){var U=I.context.hover;U&&r.removeMarker(U,M)}),o.on("connectionSegment.move.cleanup",function(I){var U=I.context,F=U.connection;U.draggerGfx&&(0,E.TF)(U.draggerGfx),r.removeMarker(F,p)}),o.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(I){var U=I.context,F=U.connection;F.waypoints=U.originalWaypoints,S(I)}),o.on("connectionSegment.move.end",function(I){var U=I.context,F=U.connection,H=U.newWaypoints,V=U.newSegmentStartIndex;H=H.map(function(s){var O={x:Math.round(s.x),y:Math.round(s.y)};return s.original&&(O.original=s.original),O});var z=b(H,V),k=z.waypoints,N=_(F,k),P=z.segmentOffset,i={segmentMove:{segmentStartIndex:U.segmentStartIndex,newSegmentStartIndex:V+P}};n.updateWaypoints(F,N,i)})}g.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"]},39255:(X,K,u)=>{u.d(K,{A:()=>k});var h=u(84654),L=u(11918),d=u(6513),E=u(65911),v=Math.round,M="reconnectStart",p="reconnectEnd",x="updateWaypoints";function T(N,P,i,s,O,f){this._injector=N,this.start=function(A,w,W,G){var $=i.getGraphics(w),J=w.source,q=w.target,it=w.waypoints,nt;!G&&W===0?nt=M:!G&&W===it.length-1?nt=p:nt=x;var tt=nt===x?"connection.updateWaypoints":"connection.reconnect",Z=O.allowed(tt,{connection:w,source:J,target:q});Z===!1&&(Z=O.allowed(tt,{connection:w,source:q,target:J})),Z!==!1&&s.init(A,"bendpoint.move",{data:{connection:w,connectionGfx:$,context:{allowed:Z,bendpointIndex:W,connection:w,source:J,target:q,insert:G,type:nt}}})},P.on("bendpoint.move.hover",function(A){var w=A.context,W=w.connection,G=W.source,$=W.target,J=A.hover,q=w.type;w.hover=J;var it;if(J){var nt=q===x?"connection.updateWaypoints":"connection.reconnect";if(it=w.allowed=O.allowed(nt,{connection:W,source:q===M?J:G,target:q===p?J:$,type:q}),it){w.source=q===M?J:G,w.target=q===p?J:$;return}it===!1&&(it=w.allowed=O.allowed(nt,{connection:W,source:q===p?J:$,target:q===M?J:G,type:q})),it&&(w.source=q===p?J:$,w.target=q===M?J:G)}}),P.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(A){var w=A.context;w.hover=null,w.source=null,w.target=null,w.allowed=!1}),P.on("bendpoint.move.end",function(A){var w=A.context,W=w.allowed,G=w.bendpointIndex,$=w.connection,J=w.insert,q=$.waypoints.slice(),it=w.source,nt=w.target,tt=w.type,Z={},ot={x:v(A.x),y:v(A.y)};if(!W)return!1;tt===x?(J?q.splice(G,0,ot):q[G]=ot,Z={bendpointMove:{insert:J,bendpointIndex:G}},q=this.cropWaypoints($,q),f.updateWaypoints($,(0,E.Wy)(q),Z)):(tt===M?(Z.docking="source",c(w)&&(Z.docking="target",Z.newWaypoints=q.reverse())):tt===p&&(Z.docking="target",c(w)&&(Z.docking="source",Z.newWaypoints=q.reverse())),f.reconnect($,it,nt,ot,Z))},this)}T.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],T.prototype.cropWaypoints=function(N,P){var i=this._injector.get("connectionDocking",!1);if(!i)return P;var s=N.waypoints;return N.waypoints=P,N.waypoints=i.getCroppedWaypoints(N),P=N.waypoints,N.waypoints=s,P};function c(N){var P=N.hover,i=N.source,s=N.target,O=N.type;if(O===M)return P&&s&&P===s&&i!==s;if(O===p)return P&&i&&P===i&&i!==s}var a=u(33225),e=u(69855),g=u(52965),t="reconnectStart",o="reconnectEnd",r="updateWaypoints",y="connect-ok",m="connect-not-ok",n="connect-hover",l="djs-updating",_="djs-element-hidden",S=1100;function D(N,P,i,s){this._injector=P;var O=P.get("connectionPreview",!1);i.on("bendpoint.move.start",function(f){var A=f.context,w=A.bendpointIndex,W=A.connection,G=A.insert,$=W.waypoints,J=$.slice();A.waypoints=$,G&&J.splice(w,0,{x:f.x,y:f.y}),W.waypoints=J;var q=A.draggerGfx=(0,e.zk)(s.getLayer("overlays"));(0,a.Ly)(q).add("djs-dragging"),s.addMarker(W,_),s.addMarker(W,l)}),i.on("bendpoint.move.hover",function(f){var A=f.context,w=A.allowed,W=A.hover,G=A.type;if(W){if(s.addMarker(W,n),G===r)return;w?(s.removeMarker(W,m),s.addMarker(W,y)):w===!1&&(s.removeMarker(W,y),s.addMarker(W,m))}}),i.on(["bendpoint.move.out","bendpoint.move.cleanup"],S,function(f){var A=f.context,w=A.hover,W=A.target;w&&(s.removeMarker(w,n),s.removeMarker(w,W?y:m))}),i.on("bendpoint.move.move",function(f){var A=f.context,w=A.allowed,W=A.bendpointIndex,G=A.draggerGfx,$=A.hover,J=A.type,q=A.connection,it=q.source,nt=q.target,tt=q.waypoints.slice(),Z=tt.slice().reverse(),ot={x:f.x,y:f.y},Q;O&&(Q={source:it,target:nt},J===t?c(A)?(Q.connectionEnd=ot,Q.source=nt,Q.target=$||it,tt=Z):(Q.connectionStart=ot,Q.source=$||it):J===o?c(A)?(Q.connectionStart=ot,Q.target=it,Q.source=$||nt,tt=Z):(Q.connectionEnd=ot,Q.target=$||nt):(Q.noCropping=!0,Q.noLayout=!0,tt[W]=ot),J===r&&(tt=N.cropWaypoints(q,tt)),Q.waypoints=tt,O.drawPreview(A,w,Q)),(0,g.Tl)(G,f.x,f.y)},this),i.on(["bendpoint.move.end","bendpoint.move.cancel"],S,function(f){var A=f.context,w=A.connection,W=A.draggerGfx,G=A.hover,$=A.target,J=A.waypoints;w.waypoints=J,(0,a.TF)(W),s.removeMarker(w,l),s.removeMarker(w,_),G&&(s.removeMarker(G,y),s.removeMarker(G,$?y:m)),O&&O.cleanUp(A)})}D.$inject=["bendpointMove","injector","eventBus","canvas"];var b=u(45041),I=u(98218),U=u(17521),F=Math.abs,H=Math.round,V=10;function z(N){function P(f,A){if((0,I.isArray)(f)){for(var w=f.length;w--;)if(F(f[w]-A)<=V)return f[w]}else{f=+f;var W=A%f;if(W<V)return A-W;if(W>f-V)return A-W+f}return A}function i(f){if(f.width)return{x:H(f.width/2+f.x),y:H(f.height/2+f.y)}}function s(f){var A=f.snapPoints,w=f.connection,W=w.waypoints,G=f.segmentStart,$=f.segmentStartIndex,J=f.segmentEnd,q=f.segmentEndIndex,it=f.axis;if(A)return A;var nt=[W[$-1],G,J,W[q+1]];return $<2&&nt.unshift(i(w.source)),q>W.length-3&&nt.unshift(i(w.target)),f.snapPoints=A={horizontal:[],vertical:[]},(0,I.forEach)(nt,function(tt){tt&&(tt=tt.original||tt,it==="y"&&A.horizontal.push(tt.y),it==="x"&&A.vertical.push(tt.x))}),A}N.on("connectionSegment.move.move",1500,function(f){var A=f.context,w=s(A),W=f.x,G=f.y,$,J;if(w){$=P(w.vertical,W),J=P(w.horizontal,G);var q=W-$,it=G-J;(0,I.assign)(f,{dx:f.dx-q,dy:f.dy-it,x:$,y:J}),(q||w.vertical.indexOf(W)!==-1)&&(0,U.CU)(f,"x",$),(it||w.horizontal.indexOf(G)!==-1)&&(0,U.CU)(f,"y",J)}});function O(f){var A=f.snapPoints,w=f.connection.waypoints,W=f.bendpointIndex;if(A)return A;var G=[w[W-1],w[W+1]];return f.snapPoints=A={horizontal:[],vertical:[]},(0,I.forEach)(G,function($){$&&($=$.original||$,A.horizontal.push($.y),A.vertical.push($.x))}),A}N.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(f){var A=f.context,w=O(A),W=A.hover,G=W&&i(W),$=f.x,J=f.y,q,it;if(w){q=P(G?w.vertical.concat([G.x]):w.vertical,$),it=P(G?w.horizontal.concat([G.y]):w.horizontal,J);var nt=$-q,tt=J-it;(0,I.assign)(f,{dx:f.dx-nt,dy:f.dy-tt,x:f.x-nt,y:f.y-tt}),(nt||w.vertical.indexOf($)!==-1)&&(0,U.CU)(f,"x",q),(tt||w.horizontal.indexOf(J)!==-1)&&(0,U.CU)(f,"y",it)}})}z.$inject=["eventBus"];const k={__depends__:[h.A,L.A],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",d.A],bendpointMove:["type",T],bendpointMovePreview:["type",D],connectionSegmentMove:["type",b.A],bendpointSnapping:["type",z]}},54100:(X,K,u)=>{u.d(K,{A:()=>d});var h=u(10018);function L(E,v,M,p){E.on("element.changed",function(x){var T=x.element;(T.parent||T===v.getRootElement())&&(x.gfx=M.getGraphics(T)),x.gfx&&E.fire((0,h.Pw)(T)+".changed",x)}),E.on("elements.changed",function(x){var T=x.elements;T.forEach(function(c){E.fire("element.changed",{element:c})}),p.updateContainments(T)}),E.on("shape.changed",function(x){p.update("shape",x.element,x.gfx)}),E.on("connection.changed",function(x){p.update("connection",x.element,x.gfx)})}L.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const d={__init__:["changeSupport"],changeSupport:["type",L]}},95576:(X,K,u)=>{u.d(K,{A:()=>g});var h=u(56773),L=u(11918),d=u(84654),E=u(65911),v=u(98218);function M(t,o,r,y){function m(l,_){return y.allowed("connection.create",{source:l,target:_})}function n(l,_){return m(_,l)}t.on("connect.hover",function(l){var _=l.context,S=_.start,D=l.hover,b;if(_.hover=D,b=_.canExecute=m(S,D),!(0,v.isNil)(b)){if(b!==!1){_.source=S,_.target=D;return}b=_.canExecute=n(S,D),!(0,v.isNil)(b)&&b!==!1&&(_.source=D,_.target=S)}}),t.on(["connect.out","connect.cleanup"],function(l){var _=l.context;_.hover=null,_.source=null,_.target=null,_.canExecute=!1}),t.on("connect.end",function(l){var _=l.context,S=_.canExecute,D=_.connectionStart,b={x:l.x,y:l.y},I=_.source,U=_.target;if(!S)return!1;var F=null,H={connectionStart:p(_)?b:D,connectionEnd:p(_)?D:b};(0,v.isObject)(S)&&(F=S);var V=r.connect(I,U,F,H);l.context.connection=V}),this.start=function(l,_,S,D){(0,v.isObject)(S)||(D=S,S=(0,E.pp)(_)),o.init(l,"connect",{autoActivate:D,data:{shape:_,context:{start:_,connectionStart:S}}})}}M.$inject=["eventBus","dragging","modeling","rules"];function p(t){var o=t.hover,r=t.source,y=t.target;return o&&r&&o===r&&r!==y}var x=1100,T=900,c="connect-ok",a="connect-not-ok";function e(t,o,r){var y=t.get("connectionPreview",!1);y&&o.on("connect.move",function(m){var n=m.context,l=n.canExecute,_=n.hover,S=n.source,D=n.start,b=n.startPosition,I=n.target,U=p(n)?{x:m.x,y:m.y}:b,F=p(n)?b:{x:m.x,y:m.y};y.drawPreview(n,l,{source:S||D,target:I||_,connectionStart:U,connectionEnd:F})}),o.on("connect.hover",T,function(m){var n=m.context,l=m.hover,_=n.canExecute;_!==null&&r.addMarker(l,_?c:a)}),o.on(["connect.out","connect.cleanup"],x,function(m){var n=m.hover;n&&(r.removeMarker(n,c),r.removeMarker(n,a))}),y&&o.on("connect.cleanup",function(m){y.cleanUp(m.context)})}e.$inject=["injector","eventBus","canvas"];const g={__depends__:[h.A,L.A,d.A],__init__:["connectPreview"],connect:["type",M],connectPreview:["type",e]}},28012:(X,K,u)=>{u.d(K,{A:()=>M});var h=u(33225),L=u(98218),d=u.n(L),E=u(65911),v="djs-connection-preview";function M(T,c,a,e){this._canvas=c,this._graphicsFactory=a,this._elementFactory=e,this._connectionDocking=T.get("connectionDocking",!1),this._layouter=T.get("layouter",!1)}M.$inject=["injector","canvas","graphicsFactory","elementFactory"],M.prototype.drawPreview=function(T,c,a){a=a||{};var e=T.connectionPreviewGfx,g=T.getConnection,t=a.source,o=a.target,r=a.waypoints,y=a.connectionStart,m=a.connectionEnd,n=a.noLayout,l=a.noCropping,_=a.noNoop,S,D=this;if(e||(e=T.connectionPreviewGfx=this.createConnectionPreviewGfx()),(0,h.IU)(e),g||(g=T.getConnection=p(function(b,I,U){return D.getConnection(b,I,U)})),c&&(S=g(c,t,o)),!S){!_&&this.drawNoopPreview(e,a);return}S.waypoints=r||[],this._layouter&&!n&&(S.waypoints=this._layouter.layoutConnection(S,{source:t,target:o,connectionStart:y,connectionEnd:m,waypoints:a.waypoints||S.waypoints})),(!S.waypoints||!S.waypoints.length)&&(S.waypoints=[t?(0,E.pp)(t):y,o?(0,E.pp)(o):m]),this._connectionDocking&&(t||o)&&!l&&(S.waypoints=this._connectionDocking.getCroppedWaypoints(S,t,o)),this._graphicsFactory.drawConnection(e,S)},M.prototype.drawNoopPreview=function(T,c){var a=c.source,e=c.target,g=c.connectionStart||(0,E.pp)(a),t=c.connectionEnd||(0,E.pp)(e),o=this.cropWaypoints(g,t,a,e),r=this.createNoopConnection(o[0],o[1]);(0,h.BC)(T,r)},M.prototype.cropWaypoints=function(T,c,a,e){var g=this._graphicsFactory,t=a&&g.getShapePath(a),o=e&&g.getShapePath(e),r=g.getConnectionPath({waypoints:[T,c]});return T=a&&(0,E.ki)(t,r,!0)||T,c=e&&(0,E.ki)(o,r,!1)||c,[T,c]},M.prototype.cleanUp=function(T){T&&T.connectionPreviewGfx&&(0,h.TF)(T.connectionPreviewGfx)},M.prototype.getConnection=function(T){var c=x(T);return this._elementFactory.createConnection(c)},M.prototype.createConnectionPreviewGfx=function(){var T=(0,h.vt)("g");return(0,h.CF)(T,{pointerEvents:"none"}),(0,h.Ly)(T).add(v),(0,h.BC)(this._canvas.getDefaultLayer(),T),T},M.prototype.createNoopConnection=function(T,c){var a=(0,h.vt)("polyline");return(0,h.CF)(a,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),(0,h.CF)(a,{points:[T.x,T.y,c.x,c.y]}),a};function p(T){var c={};return function(a){var e=JSON.stringify(a),g=c[e];return g||(g=c[e]=T.apply(null,arguments)),g}}function x(T){return(0,L.isObject)(T)?T:{}}},85284:(X,K,u)=>{u.d(K,{A:()=>L});var h=u(28012);const L={__init__:["connectionPreview"],connectionPreview:["type",h.A]}},26316:(X,K,u)=>{u.d(K,{A:()=>m});var h=u(69380),L=u(98218),d=u(52687),E=u(10018),v=u(50941),M=new v.A("ov"),p=500;function x(n,l,_,S){this._eventBus=l,this._canvas=_,this._elementRegistry=S,this._ids=M,this._overlayDefaults=(0,L.assign)({show:null,scale:!0},n&&n.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=T(_.getContainer()),this._init()}x.$inject=["config.overlays","eventBus","canvas","elementRegistry"],x.prototype.get=function(n){if((0,L.isString)(n)&&(n={id:n}),(0,L.isString)(n.element)&&(n.element=this._elementRegistry.get(n.element)),n.element){var l=this._getOverlayContainer(n.element,!0);return l?n.type?(0,L.filter)(l.overlays,(0,L.matchPattern)({type:n.type})):l.overlays.slice():[]}else return n.type?(0,L.filter)(this._overlays,(0,L.matchPattern)({type:n.type})):n.id?this._overlays[n.id]:null},x.prototype.add=function(n,l,_){if((0,L.isObject)(l)&&(_=l,l=null),n.id||(n=this._elementRegistry.get(n)),!_.position)throw new Error("must specifiy overlay position");if(!_.html)throw new Error("must specifiy overlay html");if(!n)throw new Error("invalid element specified");var S=this._ids.next();return _=(0,L.assign)({},this._overlayDefaults,_,{id:S,type:l,element:n,html:_.html}),this._addOverlay(_),S},x.prototype.remove=function(n){var l=this.get(n)||[];(0,L.isArray)(l)||(l=[l]);var _=this;(0,L.forEach)(l,function(S){var D=_._getOverlayContainer(S.element,!0);if(S&&((0,d.remove)(S.html),(0,d.remove)(S.htmlContainer),delete S.htmlContainer,delete S.element,delete _._overlays[S.id]),D){var b=D.overlays.indexOf(S);b!==-1&&D.overlays.splice(b,1)}})},x.prototype.show=function(){a(this._overlayRoot)},x.prototype.hide=function(){a(this._overlayRoot,!1)},x.prototype.clear=function(){this._overlays={},this._overlayContainers=[],(0,d.clear)(this._overlayRoot)},x.prototype._updateOverlayContainer=function(n){var l=n.element,_=n.html,S=l.x,D=l.y;if(l.waypoints){var b=(0,E.U7)(l);S=b.x,D=b.y}c(_,S,D),(0,d.attr)(n.html,"data-container-id",l.id)},x.prototype._updateOverlay=function(n){var l=n.position,_=n.htmlContainer,S=n.element,D=l.left,b=l.top;if(l.right!==void 0){var I;S.waypoints?I=(0,E.U7)(S).width:I=S.width,D=l.right*-1+I}if(l.bottom!==void 0){var U;S.waypoints?U=(0,E.U7)(S).height:U=S.height,b=l.bottom*-1+U}c(_,D||0,b||0)},x.prototype._createOverlayContainer=function(n){var l=(0,d.domify)('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(l);var _={html:l,element:n,overlays:[]};return this._updateOverlayContainer(_),this._overlayContainers.push(_),_},x.prototype._updateRoot=function(n){var l=n.scale||1,_="matrix("+[l,0,0,l,-1*n.x*l,-1*n.y*l].join(",")+")";e(this._overlayRoot,_)},x.prototype._getOverlayContainer=function(n,l){var _=(0,L.find)(this._overlayContainers,function(S){return S.element===n});return!_&&!l?this._createOverlayContainer(n):_},x.prototype._addOverlay=function(n){var l=n.id,_=n.element,S=n.html,D,b;S.get&&S.constructor.prototype.jquery&&(S=S.get(0)),(0,L.isString)(S)&&(S=(0,d.domify)(S)),b=this._getOverlayContainer(_),D=(0,d.domify)('<div class="djs-overlay" data-overlay-id="'+l+'" style="position: absolute">'),D.appendChild(S),n.type&&(0,d.classes)(D).add("djs-overlay-"+n.type),n.htmlContainer=D,b.overlays.push(n),b.html.appendChild(D),this._overlays[l]=n,this._updateOverlay(n),this._updateOverlayVisibilty(n,this._canvas.viewbox())},x.prototype._updateOverlayVisibilty=function(n,l){var _=n.show,S=_&&_.minZoom,D=_&&_.maxZoom,b=n.htmlContainer,I=!0;_&&(((0,L.isDefined)(S)&&S>l.scale||(0,L.isDefined)(D)&&D<l.scale)&&(I=!1),a(b,I)),this._updateOverlayScale(n,l)},x.prototype._updateOverlayScale=function(n,l){var _=n.scale,S,D,b=n.htmlContainer,I,U="";_!==!0&&(_===!1?(S=1,D=1):(S=_.min,D=_.max),(0,L.isDefined)(S)&&l.scale<S&&(I=(1/l.scale||1)*S),(0,L.isDefined)(D)&&l.scale>D&&(I=(1/l.scale||1)*D)),(0,L.isDefined)(I)&&(U="scale("+I+","+I+")"),e(b,U)},x.prototype._updateOverlaysVisibilty=function(n){var l=this;(0,L.forEach)(this._overlays,function(_){l._updateOverlayVisibilty(_,n)})},x.prototype._init=function(){var n=this._eventBus,l=this;function _(S){l._updateRoot(S),l._updateOverlaysVisibilty(S),l.show()}n.on("canvas.viewbox.changing",function(S){l.hide()}),n.on("canvas.viewbox.changed",function(S){_(S.viewbox)}),n.on(["shape.remove","connection.remove"],function(S){var D=S.element,b=l.get({element:D});(0,L.forEach)(b,function(F){l.remove(F.id)});var I=l._getOverlayContainer(D);if(I){(0,d.remove)(I.html);var U=l._overlayContainers.indexOf(I);U!==-1&&l._overlayContainers.splice(U,1)}}),n.on("element.changed",p,function(S){var D=S.element,b=l._getOverlayContainer(D,!0);b&&((0,L.forEach)(b.overlays,function(I){l._updateOverlay(I)}),l._updateOverlayContainer(b))}),n.on("element.marker.update",function(S){var D=l._getOverlayContainer(S.element,!0);D&&(0,d.classes)(D.html)[S.add?"add":"remove"](S.marker)}),n.on("diagram.clear",this.clear,this)};function T(n){var l=(0,d.domify)('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');return n.insertBefore(l,n.firstChild),l}function c(n,l,_){(0,L.assign)(n.style,{left:l+"px",top:_+"px"})}function a(n,l){n.style.display=l===!1?"none":""}function e(n,l){n.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(_){n.style[_+"transform"]=l})}const g={__init__:["overlays"],overlays:["type",x]};var t=".entry",o=1e3;function r(n,l,_){this._eventBus=l,this._overlays=_;var S=(0,L.isDefined)(n&&n.scale)?n.scale:{min:1,max:1.5};this._overlaysConfig={position:{right:-9,top:-6},scale:S},this._current=null,this._init()}r.$inject=["config.contextPad","eventBus","overlays"],r.prototype._init=function(){var n=this._eventBus,l=this;n.on("selection.changed",function(_){var S=_.newSelection;S.length===1?l.open(S[0]):l.close()}),n.on("elements.delete",function(_){var S=_.elements;(0,L.forEach)(S,function(D){l.isOpen(D)&&l.close()})}),n.on("element.changed",function(_){var S=_.element,D=l._current;D&&D.element===S&&l.open(S,!0)})},r.prototype.registerProvider=function(n,l){l||(l=n,n=o),this._eventBus.on("contextPad.getProviders",n,function(_){_.providers.push(l)})},r.prototype.getEntries=function(n){var l=this._getProviders(),_={};return(0,L.forEach)(l,function(S){var D=S.getContextPadEntries(n);(0,L.isFunction)(D)?_=D(_):(0,L.forEach)(D,function(b,I){_[I]=b})}),_},r.prototype.trigger=function(n,l,_){var S=this._current.element,D=this._current.entries,b,I,U,F=l.delegateTarget||l.target;if(!F)return l.preventDefault();if(b=D[(0,d.attr)(F,"data-action")],I=b.action,U=l.originalEvent||l,(0,L.isFunction)(I)){if(n==="click")return I(U,S,_)}else if(I[n])return I[n](U,S,_);l.preventDefault()},r.prototype.open=function(n,l){!l&&this.isOpen(n)||(this.close(),this._updateAndOpen(n))},r.prototype._getProviders=function(n){var l=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(l),l.providers},r.prototype._updateAndOpen=function(n){var l=this.getEntries(n),_=this.getPad(n),S=_.html;(0,L.forEach)(l,function(D,b){var I=D.group||"default",U=(0,d.domify)(D.html||'<div class="entry" draggable="true"></div>'),F;(0,d.attr)(U,"data-action",b),F=(0,d.query)("[data-group="+I+"]",S),F||(F=(0,d.domify)('<div class="group" data-group="'+I+'"></div>'),S.appendChild(F)),F.appendChild(U),D.className&&y(U,D.className),D.title&&(0,d.attr)(U,"title",D.title),D.imageUrl&&U.appendChild((0,d.domify)('<img src="'+D.imageUrl+'">'))}),(0,d.classes)(S).add("open"),this._current={element:n,pad:_,entries:l},this._eventBus.fire("contextPad.open",{current:this._current})},r.prototype.getPad=function(n){if(this.isOpen())return this._current.pad;var l=this,_=this._overlays,S=(0,d.domify)('<div class="djs-context-pad"></div>'),D=(0,L.assign)({html:S},this._overlaysConfig);d.delegate.bind(S,t,"click",function(I){l.trigger("click",I)}),d.delegate.bind(S,t,"dragstart",function(I){l.trigger("dragstart",I)}),d.event.bind(S,"mousedown",function(I){I.stopPropagation()}),this._overlayId=_.add(n,"context-pad",D);var b=_.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:n,pad:b}),b},r.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},r.prototype.isOpen=function(n){return!!this._current&&(n?this._current.element===n:!0)};function y(n,l){var _=(0,d.classes)(n),S=(0,L.isArray)(l)?l:l.split(/\s+/g);S.forEach(function(D){_.add(D)})}const m={__depends__:[h.A,g],contextPad:["type",r]}},7034:(X,K,u)=>{u.d(K,{A:()=>a});var h=u(98218),L=u.n(h),d=u(10018);function E(e,g,t,o,r,y,m,n){this._canvas=e,this._create=g,this._clipboard=t,this._elementFactory=o,this._eventBus=r,this._modeling=y,this._mouse=m,this._rules=n,r.on("copyPaste.copyElement",function(l){var _=l.descriptor,S=l.element,D=l.elements;_.priority=1,_.id=S.id;var b=(0,h.find)(D,function(I){return I===S.parent});b&&(_.parent=S.parent.id),v(S)&&(_.priority=2,_.host=S.host.id),M(S)&&(_.priority=3,_.source=S.source.id,_.target=S.target.id,_.waypoints=x(S)),p(S)&&(_.priority=4,_.labelTarget=S.labelTarget.id),(0,h.forEach)(["x","y","width","height"],function(I){(0,h.isNumber)(S[I])&&(_[I]=S[I])}),_.hidden=S.hidden,_.collapsed=S.collapsed}),r.on("copyPaste.pasteElements",function(l){var _=l.hints;(0,h.assign)(_,{createElementsBehavior:!1})})}E.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"],E.prototype.copy=function(e){var g,t;return(0,h.isArray)(e)||(e=e?[e]:[]),g=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),g===!1?t={}:t=this.createTree((0,h.isArray)(g)?g:e),this._clipboard.set(t),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:t}),t},E.prototype.paste=function(e){var g=this._clipboard.get();if(!this._clipboard.isEmpty()){var t=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:t});var o=this._createElements(g);if(e&&e.element&&e.point)return this._paste(o,e.element,e.point,t);this._create.start(this._mouse.getLastMoveEvent(),o,{hints:t})}},E.prototype._paste=function(e,g,t,o){(0,h.forEach)(e,function(y){(0,h.isNumber)(y.x)||(y.x=0),(0,h.isNumber)(y.y)||(y.y=0)});var r=(0,d.U7)(e);return(0,h.forEach)(e,function(y){M(y)&&(y.waypoints=(0,h.map)(y.waypoints,function(m){return{x:m.x-r.x-r.width/2,y:m.y-r.y-r.height/2}})),(0,h.assign)(y,{x:y.x-r.x-r.width/2,y:y.y-r.y-r.height/2})}),this._modeling.createElements(e,t,g,(0,h.assign)({},o))},E.prototype._createElements=function(e){var g=this,t=this._eventBus,o={},r=[];return(0,h.forEach)(e,function(y,m){m=parseInt(m,10),y=(0,h.sortBy)(y,"priority"),(0,h.forEach)(y,function(n){var l=(0,h.assign)({},(0,h.omit)(n,["priority"]));o[n.parent]?l.parent=o[n.parent]:delete l.parent,t.fire("copyPaste.pasteElement",{cache:o,descriptor:l});var _;if(M(l)){l.source=o[n.source],l.target=o[n.target],_=o[n.id]=g.createConnection(l),r.push(_);return}if(p(l)){l.labelTarget=o[l.labelTarget],_=o[n.id]=g.createLabel(l),r.push(_);return}l.host&&(l.host=o[l.host]),_=o[n.id]=g.createShape(l),r.push(_)})}),r},E.prototype.createConnection=function(e){var g=this._elementFactory.createConnection((0,h.omit)(e,["id"]));return g},E.prototype.createLabel=function(e){var g=this._elementFactory.createLabel((0,h.omit)(e,["id"]));return g},E.prototype.createShape=function(e){var g=this._elementFactory.createShape((0,h.omit)(e,["id"]));return g},E.prototype.hasRelations=function(e,g){var t,o,r;return!(M(e)&&(o=(0,h.find)(g,(0,h.matchPattern)({id:e.source.id})),r=(0,h.find)(g,(0,h.matchPattern)({id:e.target.id})),!o||!r)||p(e)&&(t=(0,h.find)(g,(0,h.matchPattern)({id:e.labelTarget.id})),!t))},E.prototype.createTree=function(e){var g=this._rules,t=this,o={},r=[],y=(0,d.wT)(e);function m(_,S){return g.allowed("element.copy",{element:_,elements:S})}function n(_,S){var D=(0,h.find)(r,function(b){return _===b.element});if(!D){r.push({element:_,depth:S});return}D.depth<S&&(r=l(D,r),r.push({element:D.element,depth:S}))}function l(_,S){var D=S.indexOf(_);return D!==-1&&S.splice(D,1),S}return(0,d.qO)(y,function(_,S,D){if(p(_))return;(0,h.forEach)(_.labels,function(I){n(I,D)});function b(I){I&&I.length&&(0,h.forEach)(I,function(U){(0,h.forEach)(U.labels,function(F){n(F,D)}),n(U,D)})}return(0,h.forEach)([_.attachers,_.incoming,_.outgoing],b),n(_,D),_.children}),e=(0,h.map)(r,function(_){return _.element}),r=(0,h.map)(r,function(_){return _.descriptor={},t._eventBus.fire("copyPaste.copyElement",{descriptor:_.descriptor,element:_.element,elements:e}),_}),r=(0,h.sortBy)(r,function(_){return _.descriptor.priority}),e=(0,h.map)(r,function(_){return _.element}),(0,h.forEach)(r,function(_){var S=_.depth;if(!t.hasRelations(_.element,e)){c(_.element,e);return}if(!m(_.element,e)){c(_.element,e);return}o[S]||(o[S]=[]),o[S].push(_.descriptor)}),o};function v(e){return!!e.host}function M(e){return!!e.waypoints}function p(e){return!!e.labelTarget}function x(e){return(0,h.map)(e.waypoints,function(g){return g=T(g),g.original&&(g.original=T(g.original)),g})}function T(e){return(0,h.assign)({},e)}function c(e,g){var t=g.indexOf(e);return t===-1?g:g.splice(t,1)}const a=E},78768:(X,K,u)=>{u.d(K,{A:()=>T});function h(){}h.prototype.get=function(){return this._data},h.prototype.set=function(c){this._data=c},h.prototype.clear=function(){var c=this._data;return delete this._data,c},h.prototype.isEmpty=function(){return!this._data};const L={clipboard:["type",h]};var d=u(54559);function E(c){var a=this;this._lastMoveEvent=null;function e(g){a._lastMoveEvent=g}c.on("canvas.init",function(g){var t=a._svg=g.svg;t.addEventListener("mousemove",e)}),c.on("canvas.destroy",function(){a._lastMouseEvent=null,a._svg.removeEventListener("mousemove",e)})}E.$inject=["eventBus"],E.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||v(0,0)};function v(c,a){var e=document.createEvent("MouseEvent"),g=c,t=a,o=c,r=a;return e.initMouseEvent&&e.initMouseEvent("mousemove",!0,!0,window,0,g,t,o,r,!1,!1,!1,!1,0,null),e}const M={__init__:["mouse"],mouse:["type",E]};var p=u(11918),x=u(7034);const T={__depends__:[L,d.A,M,p.A],__init__:["copyPaste"],copyPaste:["type",x.A]}},54559:(X,K,u)=>{u.d(K,{A:()=>D});var h=u(84654),L=u(71953),d=u(11918),E=u(56773),v=u(98218),M=u(10018),p="drop-ok",x="drop-not-ok",T="attach-ok",c="new-parent",a="create",e=2e3;function g(b,I,U,F,H){function V(N,P,i,s){if(!P)return!1;N=(0,v.filter)(N,function(W){var G=W.labelTarget;return!W.parent&&!(y(W)&&N.indexOf(G)!==-1)});var O=(0,v.find)(N,function(W){return!o(W)}),f=!1,A=!1,w=!1;return r(N)&&(f=H.allowed("shape.attach",{position:i,shape:O,target:P})),f||(r(N)?w=H.allowed("shape.create",{position:i,shape:O,source:s,target:P}):w=H.allowed("elements.create",{elements:N,position:i,target:P})),w||f?(O&&s&&(A=H.allowed("connection.create",{source:s,target:O,hints:{targetParent:P,targetAttach:f}})),{attach:f,connect:A}):w===null||f===null?null:!1}function z(N,P){[T,p,x,c].forEach(function(i){i===P?b.addMarker(N,i):b.removeMarker(N,i)})}U.on(["create.move","create.hover"],function(N){var P=N.context,i=P.elements,s=N.hover,O=P.source;if(!s){P.canExecute=!1,P.target=null;return}t(N);var f={x:N.x,y:N.y},A=P.canExecute=s&&V(i,s,f,O);s&&A!==null&&(P.target=s,A&&A.attach?z(s,T):z(s,A?c:x))}),U.on(["create.end","create.out","create.cleanup"],function(N){var P=N.hover;P&&z(P,null)}),U.on("create.end",function(N){var P=N.context,i=P.source,s=P.shape,O=P.elements,f=P.target,A=P.hints,w=P.canExecute,W=w&&w.attach,G=w&&w.connect;if(w===!1||!f)return!1;t(N);var $={x:N.x,y:N.y};G?s=F.appendShape(i,s,$,f,{attach:W,connection:G===!0?{}:G}):(O=F.createElements(O,$,f,(0,v.assign)({},A,{attach:W})),s=(0,v.find)(O,function(J){return!o(J)})),(0,v.assign)(P,{elements:O,shape:s}),(0,v.assign)(N,{elements:O,shape:s})});function k(){var N=I.context();N&&N.prefix===a&&I.cancel()}U.on("create.init",function(){U.on("elements.changed",k),U.once(["create.cancel","create.end"],e,function(){U.off("elements.changed",k)})}),this.start=function(N,P,i){(0,v.isArray)(P)||(P=[P]);var s=(0,v.find)(P,function(f){return!o(f)});if(s){i=(0,v.assign)({elements:P,hints:{},shape:s},i||{}),(0,v.forEach)(P,function(f){(0,v.isNumber)(f.x)||(f.x=0),(0,v.isNumber)(f.y)||(f.y=0)});var O=(0,M.U7)(P);(0,v.forEach)(P,function(f){o(f)&&(f.waypoints=(0,v.map)(f.waypoints,function(A){return{x:A.x-O.x-Math.round(O.width/2),y:A.y-O.y-Math.round(O.height/2)}})),(0,v.assign)(f,{x:f.x-O.x-Math.round(O.width/2),y:f.y-O.y-Math.round(O.height/2)})}),I.init(N,a,{cursor:"grabbing",autoActivate:!0,data:{shape:s,elements:P,context:i}})}}}g.$inject=["canvas","dragging","eventBus","modeling","rules"];function t(b){var I=b.context,U=I.createConstraints;U&&(U.left&&(b.x=Math.max(b.x,U.left)),U.right&&(b.x=Math.min(b.x,U.right)),U.top&&(b.y=Math.max(b.y,U.top)),U.bottom&&(b.y=Math.min(b.y,U.bottom)))}function o(b){return!!b.waypoints}function r(b){return b&&b.length===1&&!o(b[0])}function y(b){return!!b.labelTarget}var m=u(52965),n=u(12266),l=u(33225),_=750;function S(b,I,U,F,H){function V(z){var k=(0,l.vt)("g");(0,l.CF)(k,H.cls("djs-drag-group",["no-events"]));var N=(0,l.vt)("g");return z.forEach(function(P){var i;(0,l.CF)(k,{"data-element-id":P.id}),!P.hidden&&(P.waypoints?(i=U._createContainer("connection",N),U.drawConnection((0,n.P)(i),P)):(i=U._createContainer("shape",N),U.drawShape((0,n.P)(i),P),(0,m.Tl)(i,P.x,P.y)),F.addDragger(P,k,i))}),k}I.on("create.move",_,function(z){var k=z.hover,N=z.context,P=N.elements,i=N.dragGroup;i||(i=N.dragGroup=V(P));var s;k?(i.parentNode||(s=b.getDefaultLayer(),(0,l.BC)(s,i)),(0,m.Tl)(i,z.x,z.y)):(0,l.TF)(i)}),I.on("create.cleanup",function(z){var k=z.context,N=k.dragGroup;N&&(0,l.TF)(N)})}S.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const D={__depends__:[h.A,L.A,d.A,E.A],__init__:["create","createPreview"],create:["type",g],createPreview:["type",S]}},84654:(X,K,u)=>{u.d(K,{A:()=>y});var h=u(56773),L=u(98218),d=u(52687),E=u(86439),v=u(46837),M=u(200),p=u(56764),x=Math.round,T="djs-drag-active";function c(m){m.preventDefault()}function a(m){return typeof TouchEvent<"u"&&m instanceof TouchEvent}function e(m){return Math.sqrt(Math.pow(m.x,2)+Math.pow(m.y,2))}function g(m,n,l,_){var S={threshold:5,trapClick:!0},D;function b(f){var A=n.viewbox(),w=n._container.getBoundingClientRect();return{x:A.x+(f.x-w.left)/A.scale,y:A.y+(f.y-w.top)/A.scale}}function I(f,A){A=A||D;var w=m.createEvent((0,L.assign)({},A.payload,A.data,{isTouch:A.isTouch}));return m.fire("drag."+f,w)===!1?!1:m.fire(A.prefix+"."+f,w)}function U(f){var A=f.filter(function(w){return _.get(w.id)});A.length&&l.select(A)}function F(f,A){var w=D.payload,W=D.displacement,G=D.globalStart,$=(0,E.gK)(f),J=(0,p.p)($,G),q=D.localStart,it=b($),nt=(0,p.p)(it,q);if(!D.active&&(A||e(J)>D.threshold)){if((0,L.assign)(w,{x:x(q.x+W.x),y:x(q.y+W.y),dx:0,dy:0},{originalEvent:f}),I("start")===!1)return i();D.active=!0,D.keepSelection||(w.previousSelection=l.get(),l.select(null)),D.cursor&&(0,v.hZ)(D.cursor),n.addMarker(n.getRootElement(),T)}(0,E.dG)(f),D.active&&((0,L.assign)(w,{x:x(it.x+W.x),y:x(it.y+W.y),dx:x(nt.x),dy:x(nt.y)},{originalEvent:f}),I("move"))}function H(f){var A,w=!0;D.active&&(f&&(D.payload.originalEvent=f,(0,E.dG)(f)),w=I("end")),w===!1&&I("rejected"),A=s(w!==!0),I("ended",A)}function V(f){f.which===27&&(c(f),i())}function z(f){var A;D.active&&(A=(0,M.a)(m),setTimeout(A,400),c(f)),H(f)}function k(f){F(f)}function N(f){var A=D.payload;A.hoverGfx=f.gfx,A.hover=f.element,I("hover")}function P(f){I("out");var A=D.payload;A.hoverGfx=null,A.hover=null}function i(f){var A;if(D){var w=D.active;w&&I("cancel"),A=s(f),w&&I("canceled",A)}}function s(f){var A,w;I("cleanup"),(0,v.wC)(),D.trapClick?w=z:w=H,d.event.unbind(document,"mousemove",F),d.event.unbind(document,"dragstart",c),d.event.unbind(document,"selectstart",c),d.event.unbind(document,"mousedown",w,!0),d.event.unbind(document,"mouseup",w,!0),d.event.unbind(document,"keyup",V),d.event.unbind(document,"touchstart",k,!0),d.event.unbind(document,"touchcancel",i,!0),d.event.unbind(document,"touchmove",F,!0),d.event.unbind(document,"touchend",H,!0),m.off("element.hover",N),m.off("element.out",P),n.removeMarker(n.getRootElement(),T);var W=D.payload.previousSelection;return f!==!1&&W&&!l.get().length&&U(W),A=D,D=null,A}function O(f,A,w,W){D&&i(!1),typeof A=="string"&&(W=w,w=A,A=null),W=(0,L.assign)({},S,W||{});var G=W.data||{},$,J,q,it,nt;W.trapClick?it=z:it=H,f?($=(0,E.AF)(f)||f,J=(0,E.gK)(f),(0,E.dG)(f),$.type==="dragstart"&&c($)):($=null,J={x:0,y:0}),q=b(J),A||(A=q),nt=a($),D=(0,L.assign)({prefix:w,data:G,payload:{},globalStart:J,displacement:(0,p.p)(A,q),localStart:q,isTouch:nt},W),W.manual||(nt?(d.event.bind(document,"touchstart",k,!0),d.event.bind(document,"touchcancel",i,!0),d.event.bind(document,"touchmove",F,!0),d.event.bind(document,"touchend",H,!0)):(d.event.bind(document,"mousemove",F),d.event.bind(document,"dragstart",c),d.event.bind(document,"selectstart",c),d.event.bind(document,"mousedown",it,!0),d.event.bind(document,"mouseup",it,!0)),d.event.bind(document,"keyup",V),m.on("element.hover",N),m.on("element.out",P)),I("init"),W.autoActivate&&F(f,!0)}m.on("diagram.destroy",i),this.init=O,this.move=F,this.hover=N,this.out=P,this.end=H,this.cancel=i,this.context=function(){return D},this.setOptions=function(f){(0,L.assign)(S,f)}}g.$inject=["eventBus","canvas","selection","elementRegistry"];var t=1500;function o(m,n,l){var _=this;function S(D){if(!D.hover){var b=D.originalEvent,I=_._findTargetGfx(b),U=I&&l.get(I);I&&U&&(D.stopPropagation(),n.hover({element:U,gfx:I}),n.move(b))}}m.on("drag.start",function(D){m.once("drag.move",t,function(b){S(b)})}),m.on("drag.init",function(){var D,b;function I(H){D=H.hover,b=H.hoverGfx}function U(){D=null,b=null}function F(){if(D){var H=D,V=b;D=null,b=null,n.out({element:H,gfx:V})}}m.on("drag.hover",I),m.on("element.out",U),m.on("element.hover",t,F),m.once("drag.cleanup",function(){m.off("drag.hover",I),m.off("element.out",U),m.off("element.hover",F)})}),this._findTargetGfx=function(D){var b,I;if(D instanceof MouseEvent)return b=(0,E.gK)(D),I=document.elementFromPoint(b.x,b.y),r(I)}}o.$inject=["eventBus","dragging","elementRegistry"];function r(m){return(0,d.closest)(m,"svg, .djs-element",!0)}const y={__init__:["hoverFix"],__depends__:[h.A],dragging:["type",g],hoverFix:["type",o]}},20990:(X,K,u)=>{u.d(K,{A:()=>v});var h=u(98218),L=u.n(h),d="is not a registered action",E="is already registered";function v(p,x){this._actions={};var T=this;p.on("diagram.init",function(){T._registerDefaultActions(x),p.fire("editorActions.init",{editorActions:T})})}v.$inject=["eventBus","injector"],v.prototype._registerDefaultActions=function(p){var x=p.get("commandStack",!1),T=p.get("modeling",!1),c=p.get("selection",!1),a=p.get("zoomScroll",!1),e=p.get("copyPaste",!1),g=p.get("canvas",!1),t=p.get("rules",!1),o=p.get("keyboardMove",!1),r=p.get("keyboardMoveSelection",!1);x&&(this.register("undo",function(){x.undo()}),this.register("redo",function(){x.redo()})),e&&c&&this.register("copy",function(){var y=c.get();e.copy(y)}),e&&this.register("paste",function(){e.paste()}),a&&this.register("stepZoom",function(y){a.stepZoom(y.value)}),g&&this.register("zoom",function(y){g.zoom(y.value)}),T&&c&&t&&this.register("removeSelection",function(){var y=c.get();if(y.length){var m=t.allowed("elements.delete",{elements:y}),n;m!==!1&&((0,h.isArray)(m)?n=m:n=y,n.length&&T.removeElements(n.slice()))}}),o&&this.register("moveCanvas",function(y){o.moveCanvas(y)}),r&&this.register("moveSelection",function(y){r.moveSelection(y.direction,y.accelerated)})},v.prototype.trigger=function(p,x){if(!this._actions[p])throw M(p,d);return this._actions[p](x)},v.prototype.register=function(p,x){var T=this;if(typeof p=="string")return this._registerAction(p,x);(0,h.forEach)(p,function(c,a){T._registerAction(a,c)})},v.prototype._registerAction=function(p,x){if(this.isRegistered(p))throw M(p,E);this._actions[p]=x},v.prototype.unregister=function(p){if(!this.isRegistered(p))throw M(p,d);this._actions[p]=void 0},v.prototype.getActions=function(){return Object.keys(this._actions)},v.prototype.isRegistered=function(p){return!!this._actions[p]};function M(p,x){return new Error(p+" "+x)}},46902:(X,K,u)=>{u.d(K,{A:()=>v});var h=u(60053),L=u(34495),d=1500,E="grab";function v(p,x,T,c,a){this._dragging=T;var e=this,g=c.get("keyboard",!1);a.registerTool("hand",{tool:"hand",dragging:"hand.move"}),p.on("element.mousedown",d,function(t){if((0,h.Io)(t))return this.activateMove(t.originalEvent),!1},this),g&&g.addListener(d,function(t){if(!M(t.keyEvent)||e.isActive())return;function o(y){e.activateMove(y),window.removeEventListener("mousemove",o)}window.addEventListener("mousemove",o);function r(y){M(y.keyEvent)&&(window.removeEventListener("mousemove",o),g.removeListener(r,"keyboard.keyup"),T.cancel())}g.addListener(d,r,"keyboard.keyup")},"keyboard.keydown"),p.on("hand.end",function(t){var o=t.originalEvent.target;if(!t.hover&&!(o instanceof SVGElement))return!1;p.once("hand.ended",function(){this.activateMove(t.originalEvent,{reactivate:!0})},this)},this),p.on("hand.move.move",function(t){var o=x.viewbox().scale;x.scroll({dx:t.dx*o,dy:t.dy*o})}),p.on("hand.move.end",function(t){var o=t.context,r=o.reactivate;return!(0,h.Io)(t)&&r&&p.once("hand.move.ended",function(y){this.activateHand(y.originalEvent,!0,!0)},this),!1},this)}v.$inject=["eventBus","canvas","dragging","injector","toolManager"],v.prototype.activateMove=function(p,x,T){typeof x=="object"&&(T=x,x=!1),this._dragging.init(p,"hand.move",{autoActivate:x,cursor:E,data:{context:T||{}}})},v.prototype.activateHand=function(p,x,T){this._dragging.init(p,"hand",{trapClick:!1,autoActivate:x,cursor:E,data:{context:{reactivate:T}}})},v.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateHand()},v.prototype.isActive=function(){var p=this._dragging.context();return p?/^(hand|hand\.move)$/.test(p.prefix):!1};function M(p){return(0,L.m0)(" ",p)}},69380:(X,K,u)=>{u.d(K,{A:()=>T});var h=u(98218),L=u(52687),d=u(60053),E=u(33225),v=u(12619);function M(c){return!0}var p=500;function x(c,a,e){var g=this;function t(P,i,s){if(!y(P,i)){var O,f,A;s?f=a.getGraphics(s):(O=i.delegateTarget||i.target,O&&(f=O,s=a.get(f))),!(!f||!s)&&(A=c.fire(P,{element:s,gfx:f,originalEvent:i}),A===!1&&(i.stopPropagation(),i.preventDefault()))}}var o={};function r(P){return o[P]}function y(P,i){var s=n[P]||d.ls;return!s(i)}var m={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},n={"element.contextmenu":M};function l(P,i,s){var O=m[P];if(!O)throw new Error("unmapped DOM event name <"+P+">");return t(O,i,s)}var _="svg, .djs-element";function S(P,i,s,O){var f=o[s]=function(A){t(s,A)};O&&(n[s]=O),f.$delegate=L.delegate.bind(P,_,i,f)}function D(P,i,s){var O=r(s);O&&L.delegate.unbind(P,i,O.$delegate)}function b(P){(0,h.forEach)(m,function(i,s){S(P,s,i)})}function I(P){(0,h.forEach)(m,function(i,s){D(P,s,i)})}c.on("canvas.destroy",function(P){I(P.svg)}),c.on("canvas.init",function(P){b(P.svg)}),c.on(["shape.added","connection.added"],function(P){var i=P.element,s=P.gfx;c.fire("interactionEvents.createHit",{element:i,gfx:s})}),c.on(["shape.changed","connection.changed"],p,function(P){var i=P.element,s=P.gfx;c.fire("interactionEvents.updateHit",{element:i,gfx:s})}),c.on("interactionEvents.createHit",p,function(P){var i=P.element,s=P.gfx;g.createDefaultHit(i,s)}),c.on("interactionEvents.updateHit",function(P){var i=P.element,s=P.gfx;g.updateDefaultHit(i,s)});var U=z("djs-hit djs-hit-stroke"),F=z("djs-hit djs-hit-click-stroke"),H=z("djs-hit djs-hit-all"),V={all:H,"click-stroke":F,stroke:U};function z(P,i){return i=(0,h.assign)({stroke:"white",strokeWidth:15},i||{}),e.cls(P,["no-fill","no-border"],i)}function k(P,i){var s=V[i];if(!s)throw new Error("invalid hit type <"+i+">");return(0,E.CF)(P,s),P}function N(P,i){(0,E.BC)(P,i)}this.removeHits=function(P){var i=(0,L.queryAll)(".djs-hit",P);(0,h.forEach)(i,E.TF)},this.createDefaultHit=function(P,i){var s=P.waypoints,O=P.isFrame,f;return s?this.createWaypointsHit(i,s):(f=O?"stroke":"all",this.createBoxHit(i,f,{width:P.width,height:P.height}))},this.createWaypointsHit=function(P,i){var s=(0,v.RJ)(i);return k(s,"stroke"),N(P,s),s},this.createBoxHit=function(P,i,s){s=(0,h.assign)({x:0,y:0},s);var O=(0,E.vt)("rect");return k(O,i),(0,E.CF)(O,s),N(P,O),O},this.updateDefaultHit=function(P,i){var s=(0,L.query)(".djs-hit",i);if(s)return P.waypoints?(0,v.si)(s,P.waypoints):(0,E.CF)(s,{width:P.width,height:P.height}),s},this.fire=t,this.triggerMouseEvent=l,this.mouseHandler=r,this.registerEvent=S,this.unregisterEvent=D}x.$inject=["eventBus","elementRegistry","styles"];const T={__init__:["interactionEvents"],interactionEvents:["type",x]}},77117:(X,K,u)=>{u.d(K,{A:()=>d});var h=u(34495),L=500;function d(E,v){var M=this;E.on("editorActions.init",L,function(p){var x=p.editorActions;M.registerBindings(v,x)})}d.$inject=["eventBus","keyboard"],d.prototype.registerBindings=function(E,v){function M(p,x){v.isRegistered(p)&&E.addListener(x)}M("undo",function(p){var x=p.keyEvent;if((0,h.nM)(x)&&!(0,h.Tu)(x)&&(0,h.m0)(["z","Z"],x))return v.trigger("undo"),!0}),M("redo",function(p){var x=p.keyEvent;if((0,h.nM)(x)&&((0,h.m0)(["y","Y"],x)||(0,h.m0)(["z","Z"],x)&&(0,h.Tu)(x)))return v.trigger("redo"),!0}),M("copy",function(p){var x=p.keyEvent;if((0,h.nM)(x)&&(0,h.m0)(["c","C"],x))return v.trigger("copy"),!0}),M("paste",function(p){var x=p.keyEvent;if((0,h.nM)(x)&&(0,h.m0)(["v","V"],x))return v.trigger("paste"),!0}),M("stepZoom",function(p){var x=p.keyEvent;if((0,h.m0)(["+","Add"],x)&&(0,h.nM)(x))return v.trigger("stepZoom",{value:1}),!0}),M("stepZoom",function(p){var x=p.keyEvent;if((0,h.m0)(["-","Subtract"],x)&&(0,h.nM)(x))return v.trigger("stepZoom",{value:-1}),!0}),M("zoom",function(p){var x=p.keyEvent;if((0,h.m0)("0",x)&&(0,h.nM)(x))return v.trigger("zoom",{value:1}),!0}),M("removeSelection",function(p){var x=p.keyEvent;if((0,h.m0)(["Delete","Del"],x))return v.trigger("removeSelection"),!0})}},50317:(X,K,u)=>{u.d(K,{A:()=>c});var h=u(98218),L=u(52687),d=u(34495),E="keyboard.keydown",v="keyboard.keyup",M=1e3;function p(a,e){var g=this;this._config=a||{},this._eventBus=e,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),e.on("diagram.destroy",function(){g._fire("destroy"),g.unbind()}),e.on("diagram.init",function(){g._fire("init")}),e.on("attach",function(){a&&a.bindTo&&g.bind(a.bindTo)}),e.on("detach",function(){g.unbind()})}p.$inject=["config.keyboard","eventBus"],p.prototype._keydownHandler=function(a){this._keyHandler(a,E)},p.prototype._keyupHandler=function(a){this._keyHandler(a,v)},p.prototype._keyHandler=function(a,e){var g=a.target,t;if(!x(g)){var o={keyEvent:a};t=this._eventBus.fire(e||E,o),!(a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.keyCode===67)&&t&&a.preventDefault()}},p.prototype.bind=function(a){this.unbind(),this._node=a,L.event.bind(a,"keydown",this._keydownHandler,!0),L.event.bind(a,"keyup",this._keyupHandler,!0),this._fire("bind")},p.prototype.getBinding=function(){return this._node},p.prototype.unbind=function(){var a=this._node;a&&(this._fire("unbind"),L.event.unbind(a,"keydown",this._keydownHandler,!0),L.event.unbind(a,"keyup",this._keyupHandler,!0)),this._node=null},p.prototype._fire=function(a){this._eventBus.fire("keyboard."+a,{node:this._node})},p.prototype.addListener=function(a,e,g){(0,h.isFunction)(a)&&(g=e,e=a,a=M),this._eventBus.on(g||E,a,e)},p.prototype.removeListener=function(a,e){this._eventBus.off(e||E,a)},p.prototype.hasModifier=d.mp,p.prototype.isCmd=d.nM,p.prototype.isShift=d.Tu,p.prototype.isKey=d.m0;function x(a){return a&&((0,L.matches)(a,"input, textarea")||a.contentEditable==="true")}var T=u(77117);const c={__init__:["keyboard","keyboardBindings"],keyboard:["type",p],keyboardBindings:["type",T.A]}},22170:(X,K,u)=>{u.d(K,{A:()=>c});var h=u(98218),L=u.n(h),d=u(51270),E=u.n(d),v=u(6958),M=u(91799),p=u(29086),x=250,T=1400;function c(e,g,t){p.A.call(this,g);var o=e.get("movePreview",!1);g.on("shape.move.start",T,function(r){var y=r.context,m=y.shapes,n=y.validatedShapes;y.shapes=a(m),y.validatedShapes=a(n)}),o&&g.on("shape.move.start",x,function(r){var y=r.context,m=y.shapes,n=[];(0,h.forEach)(m,function(l){(0,h.forEach)(l.labels,function(_){!_.hidden&&y.shapes.indexOf(_)===-1&&n.push(_),l.labelTarget&&n.push(l)})}),(0,h.forEach)(n,function(l){o.makeDraggable(y,l,!0)})}),this.preExecuted("elements.move",T,function(r){var y=r.context,m=y.closure,n=m.enclosedElements,l=[];(0,h.forEach)(n,function(_){(0,h.forEach)(_.labels,function(S){n[S.id]||l.push(S)})}),m.addAll(l)}),this.preExecute(["connection.delete","shape.delete"],function(r){var y=r.context,m=y.connection||y.shape;(0,M.l)(m.labels,function(n){t.removeShape(n,{nested:!0})})}),this.execute("shape.delete",function(r){var y=r.context,m=y.shape,n=m.labelTarget;n&&(y.labelTargetIndex=(0,v.qh)(n.labels,m),y.labelTarget=n,m.labelTarget=null)}),this.revert("shape.delete",function(r){var y=r.context,m=y.shape,n=y.labelTarget,l=y.labelTargetIndex;n&&((0,v.WQ)(n.labels,m,l),m.labelTarget=n)})}E()(c,p.A),c.$inject=["injector","eventBus","modeling"];function a(e){return(0,h.filter)(e,function(g){return e.indexOf(g.labelTarget)===-1})}},40406:(X,K,u)=>{u.d(K,{A:()=>p});var h=u(98218),L=u.n(h),d=u(10018),E=u(60053),v=u(33225),M="crosshair";function p(T,c,a,e,g,t){this._selection=g,this._dragging=a;var o=this,r={create:function(y){var m=c.getDefaultLayer(),n;n=y.frame=(0,v.vt)("rect"),(0,v.CF)(n,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),(0,v.BC)(m,n)},update:function(y){var m=y.frame,n=y.bbox;(0,v.CF)(m,{x:n.x,y:n.y,width:n.width,height:n.height})},remove:function(y){y.frame&&(0,v.TF)(y.frame)}};t.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),T.on("lasso.selection.end",function(y){var m=y.originalEvent.target;!y.hover&&!(m instanceof SVGElement)||T.once("lasso.selection.ended",function(){o.activateLasso(y.originalEvent,!0)})}),T.on("lasso.end",function(y){var m=x(y),n=e.filter(function(l){return l});o.select(n,m)}),T.on("lasso.start",function(y){var m=y.context;m.bbox=x(y),r.create(m)}),T.on("lasso.move",function(y){var m=y.context;m.bbox=x(y),r.update(m)}),T.on("lasso.cleanup",function(y){var m=y.context;r.remove(m)}),T.on("element.mousedown",1500,function(y){if((0,E.KH)(y))return o.activateLasso(y.originalEvent),!0})}p.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager"],p.prototype.activateLasso=function(T,c){this._dragging.init(T,"lasso",{autoActivate:c,cursor:M,data:{context:{}}})},p.prototype.activateSelection=function(T){this._dragging.init(T,"lasso.selection",{trapClick:!1,cursor:M,data:{context:{}}})},p.prototype.select=function(T,c){var a=(0,d.rx)(T,c);this._selection.select((0,h.values)(a))},p.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},p.prototype.isActive=function(){var T=this._dragging.context();return T&&/^lasso/.test(T.prefix)};function x(T){var c={x:T.x-T.dx,y:T.y-T.dy},a={x:T.x,y:T.y},e;return c.x<=a.x&&c.y<a.y||c.x<a.x&&c.y<=a.y?e={x:c.x,y:c.y,width:a.x-c.x,height:a.y-c.y}:c.x>=a.x&&c.y<a.y||c.x>a.x&&c.y<=a.y?e={x:a.x,y:c.y,width:c.x-a.x,height:a.y-c.y}:c.x<=a.x&&c.y>a.y||c.x<a.x&&c.y>=a.y?e={x:c.x,y:a.y,width:a.x-c.x,height:c.y-a.y}:c.x>=a.x&&c.y>a.y||c.x>a.x&&c.y>=a.y?e={x:a.x,y:a.y,width:c.x-a.x,height:c.y-a.y}:e={x:a.x,y:a.y,width:0,height:0},e}},50101:(X,K,u)=>{u.d(K,{A:()=>x});var h=u(84654),L=u(98218),d=u(52687),E=250;function v(T,c){this._eventBus=T,this._dragging=c,this._tools=[],this._active=null}v.$inject=["eventBus","dragging"],v.prototype.registerTool=function(T,c){var a=this._tools;if(!c)throw new Error(`A tool has to be registered with it's "events"`);a.push(T),this.bindEvents(T,c)},v.prototype.isActive=function(T){return T&&this._active===T},v.prototype.length=function(T){return this._tools.length},v.prototype.setActive=function(T){var c=this._eventBus;this._active!==T&&(this._active=T,c.fire("tool-manager.update",{tool:T}))},v.prototype.bindEvents=function(T,c){var a=this._eventBus,e=this._dragging,g=[];a.on(c.tool+".init",function(t){var o=t.context;if(!o.reactivate&&this.isActive(T)){this.setActive(null),e.cancel();return}this.setActive(T)},this),(0,L.forEach)(c,function(t){g.push(t+".ended"),g.push(t+".canceled")}),a.on(g,E,function(t){var o=t.originalEvent;this._active&&(o&&(0,d.closest)(o.target,'.group[data-group="tools"]')||this.setActive(null))},this)};const M={__depends__:[h.A],__init__:["toolManager"],toolManager:["type",v]};var p=u(40406);const x={__depends__:[M],__init__:["lassoTool"],lassoTool:["type",p.A]}},3366:(X,K,u)=>{u.d(K,{A:()=>P});var h=u(98218),L=u(49096);function d(i,s){this._modeling=i,this._canvas=s}d.$inject=["modeling","canvas"],d.prototype.preExecute=function(i){var s=this._modeling,O=i.elements,f=i.alignment;(0,h.forEach)(O,function(A){var w={x:0,y:0};f.left?w.x=f.left-A.x:f.right?w.x=f.right-A.width-A.x:f.center?w.x=f.center-Math.round(A.width/2)-A.x:f.top?w.y=f.top-A.y:f.bottom?w.y=f.bottom-A.height-A.y:f.middle&&(w.y=f.middle-Math.round(A.height/2)-A.y),s.moveElements([A],w,A.parent)})},d.prototype.postExecute=function(i){};function E(i){this._modeling=i}E.$inject=["modeling"],E.prototype.preExecute=function(i){var s=i.source;if(!s)throw new Error("source required");var O=i.target||s.parent,f=i.shape;f=i.shape=this._modeling.createShape(f,i.position,O,{attach:i.attach}),i.shape=f},E.prototype.postExecute=function(i){var s=i.connectionParent||i.shape.parent;v(i.source,i.shape)||this._modeling.connect(i.source,i.shape,i.connection,s)};function v(i,s){return(0,h.some)(i.outgoing,function(O){return O.target===s})}function M(i,s){this._canvas=i,this._layouter=s}M.$inject=["canvas","layouter"],M.prototype.execute=function(i){var s=i.connection,O=i.source,f=i.target,A=i.parent,w=i.parentIndex,W=i.hints;if(!O||!f)throw new Error("source and target required");if(!A)throw new Error("parent required");return s.source=O,s.target=f,s.waypoints||(s.waypoints=this._layouter.layoutConnection(s,W)),this._canvas.addConnection(s,A,w),s},M.prototype.revert=function(i){var s=i.connection;return this._canvas.removeConnection(s),s.source=null,s.target=null,s};var p=u(90006),x=u(34635),T=u(2050),c=u(6958);function a(i,s){this._canvas=i,this._modeling=s}a.$inject=["canvas","modeling"],a.prototype.execute=function(i){var s=i.connection,O=s.parent;return i.parent=O,i.parentIndex=(0,c.qh)(O.children,s),i.source=s.source,i.target=s.target,this._canvas.removeConnection(s),s.source=null,s.target=null,s},a.prototype.revert=function(i){var s=i.connection,O=i.parent,f=i.parentIndex;return s.source=i.source,s.target=i.target,(0,c.WQ)(O.children,s,f),this._canvas.addConnection(s,O),s};function e(i,s){this._modeling=i,this._elementRegistry=s}e.$inject=["modeling","elementRegistry"],e.prototype.postExecute=function(i){var s=this._modeling,O=this._elementRegistry,f=i.elements;(0,h.forEach)(f,function(A){O.get(A.id)&&(A.waypoints?s.removeConnection(A):s.removeShape(A))})};var g=u(81493);function t(i){this._modeling=i}t.$inject=["modeling"];var o={x:"y",y:"x"};t.prototype.preExecute=function(i){var s=this._modeling,O=i.groups,f=i.axis,A=i.dimension;function w(Q,at){Q.range.min=Math.min(at[f],Q.range.min),Q.range.max=Math.max(at[f]+at[A],Q.range.max)}function W(Q){return Q[f]+Q[A]/2}function G(Q){return Q.length-1}function $(Q){return Q.max-Q.min}function J(Q,at){var rt={y:0};rt[f]=Q-W(at),rt[f]&&(rt[o[f]]=0,s.moveElements([at],rt,at.parent))}var q=O[0],it=G(O),nt=O[it],tt,Z,ot=0;(0,h.forEach)(O,function(Q,at){var rt,st,ut;if(Q.elements.length<2){at&&at!==O.length-1&&(w(Q,Q.elements[0]),ot+=$(Q.range));return}rt=(0,h.sortBy)(Q.elements,f),st=rt[0],at===it&&(st=rt[G(rt)]),ut=W(st),Q.range=null,(0,h.forEach)(rt,function(lt){if(J(ut,lt),Q.range===null){Q.range={min:lt[f],max:lt[f]+lt[A]};return}w(Q,lt)}),at&&at!==O.length-1&&(ot+=$(Q.range))}),Z=Math.abs(nt.range.min-q.range.max),tt=Math.round((Z-ot)/(O.length-1)),!(tt<O.length-1)&&(0,h.forEach)(O,function(Q,at){var rt={},st;Q===q||Q===nt||(st=O[at-1],Q.range.max=0,(0,h.forEach)(Q.elements,function(ut,lt){rt[o[f]]=0,rt[f]=st.range.max-ut[f]+tt,Q.range.min!==ut[f]&&(rt[f]+=ut[f]-Q.range.min),rt[f]&&s.moveElements([ut],rt,ut.parent),Q.range.max=Math.max(ut[f]+ut[A],lt?Q.range.max:0)}))})},t.prototype.postExecute=function(i){};function r(i,s){this._layouter=i,this._canvas=s}r.$inject=["layouter","canvas"],r.prototype.execute=function(i){var s=i.connection,O=s.waypoints;return(0,h.assign)(i,{oldWaypoints:O}),s.waypoints=this._layouter.layoutConnection(s,i.hints),s},r.prototype.revert=function(i){var s=i.connection;return s.waypoints=i.oldWaypoints,s};function y(){}y.prototype.execute=function(i){var s=i.connection,O=i.delta,f=i.newParent||s.parent,A=i.newParentIndex,w=s.parent;return i.oldParent=w,i.oldParentIndex=(0,c.TF)(w.children,s),(0,c.WQ)(f.children,s,A),s.parent=f,(0,h.forEach)(s.waypoints,function(W){W.x+=O.x,W.y+=O.y,W.original&&(W.original.x+=O.x,W.original.y+=O.y)}),s},y.prototype.revert=function(i){var s=i.connection,O=s.parent,f=i.oldParent,A=i.oldParentIndex,w=i.delta;return(0,c.TF)(O.children,s),(0,c.WQ)(f.children,s,A),s.parent=f,(0,h.forEach)(s.waypoints,function(W){W.x-=w.x,W.y-=w.y,W.original&&(W.original.x-=w.x,W.original.y-=w.y)}),s};var m=u(12301),n=u(76935),l=u(97970),_=u(39226);function S(i,s){this._modeling=i,this._rules=s}S.$inject=["modeling","rules"],S.prototype.preExecute=function(i){var s=this,O=this._modeling,f=this._rules,A=i.oldShape,w=i.newData,W=i.hints||{},G;function $(Z,ot,Q){return f.allowed("connection.reconnect",{connection:Q,source:Z,target:ot})}var J={x:w.x,y:w.y},q={x:A.x,y:A.y,width:A.width,height:A.height};G=i.newShape=i.newShape||s.createShape(w,J,A.parent,W),A.host&&O.updateAttachment(G,A.host);var it;W.moveChildren!==!1&&(it=A.children.slice(),O.moveElements(it,{x:0,y:0},G,W));var nt=A.incoming.slice(),tt=A.outgoing.slice();(0,h.forEach)(nt,function(Z){var ot=Z.source,Q=$(ot,G,Z);Q&&s.reconnectEnd(Z,G,(0,_.tQ)(Z,G,q),W)}),(0,h.forEach)(tt,function(Z){var ot=Z.target,Q=$(G,ot,Z);Q&&s.reconnectStart(Z,G,(0,_.Fe)(Z,G,q),W)})},S.prototype.postExecute=function(i){var s=i.oldShape;this._modeling.removeShape(s)},S.prototype.execute=function(i){},S.prototype.revert=function(i){},S.prototype.createShape=function(i,s,O,f){return this._modeling.createShape(i,s,O,f)},S.prototype.reconnectStart=function(i,s,O,f){this._modeling.reconnectStart(i,s,O,f)},S.prototype.reconnectEnd=function(i,s,O,f){this._modeling.reconnectEnd(i,s,O,f)};var D=u(38226),b=u(57261);function I(i){this._modeling=i}I.$inject=["modeling"],I.prototype.execute=function(i){var s=i.shape,O=s.children;i.oldChildrenVisibility=U(O),s.collapsed=!s.collapsed;var f=F(O,s.collapsed);return[s].concat(f)},I.prototype.revert=function(i){var s=i.shape,O=i.oldChildrenVisibility,f=s.children,A=H(f,O);return s.collapsed=!s.collapsed,[s].concat(A)};function U(i){var s={};return(0,h.forEach)(i,function(O){s[O.id]=O.hidden,O.children&&(s=(0,h.assign)({},s,U(O.children)))}),s}function F(i,s){var O=[];return(0,h.forEach)(i,function(f){f.hidden=s,O=O.concat(f),f.children&&(O=O.concat(F(f.children,f.collapsed||s)))}),O}function H(i,s){var O=[];return(0,h.forEach)(i,function(f){f.hidden=s[f.id],O=O.concat(f),f.children&&(O=O.concat(H(f.children,s)))}),O}function V(i){this._modeling=i}V.$inject=["modeling"],V.prototype.execute=function(i){var s=i.shape,O=i.newHost,f=s.host;return i.oldHost=f,i.attacherIdx=z(f,s),k(O,s),s.host=O,s},V.prototype.revert=function(i){var s=i.shape,O=i.newHost,f=i.oldHost,A=i.attacherIdx;return s.host=f,z(O,s),k(f,s,A),s};function z(i,s){return(0,c.TF)(i&&i.attachers,s)}function k(i,s,O){if(i){var f=i.attachers;f||(i.attachers=f=[]),(0,c.WQ)(f,s,O)}}function N(){}N.prototype.execute=function(i){var s=i.connection,O=i.newWaypoints;return i.oldWaypoints=s.waypoints,s.waypoints=O,s},N.prototype.revert=function(i){var s=i.connection,O=i.oldWaypoints;return s.waypoints=O,s};function P(i,s,O){this._eventBus=i,this._elementFactory=s,this._commandStack=O;var f=this;i.on("diagram.init",function(){f.registerHandlers(O)})}P.$inject=["eventBus","elementFactory","commandStack"],P.prototype.getHandlers=function(){return{"shape.append":E,"shape.create":T.A,"shape.delete":g.A,"shape.move":n.A,"shape.resize":D.A,"shape.replace":S,"shape.toggleCollapse":I,spaceTool:b.A,"label.create":x.A,"connection.create":M,"connection.delete":a,"connection.move":y,"connection.layout":r,"connection.updateWaypoints":N,"connection.reconnect":l.A,"elements.create":p.A,"elements.move":m.A,"elements.delete":e,"elements.distribute":t,"elements.align":d,"element.updateAttachment":V}},P.prototype.registerHandlers=function(i){(0,h.forEach)(this.getHandlers(),function(s,O){i.registerHandler(O,s)})},P.prototype.moveShape=function(i,s,O,f,A){typeof f=="object"&&(A=f,f=null);var w={shape:i,delta:s,newParent:O,newParentIndex:f,hints:A||{}};this._commandStack.execute("shape.move",w)},P.prototype.updateAttachment=function(i,s){var O={shape:i,newHost:s};this._commandStack.execute("element.updateAttachment",O)},P.prototype.moveElements=function(i,s,O,f){f=f||{};var A=f.attach,w=O,W;A===!0?(W=O,w=O.parent):A===!1&&(W=null);var G={shapes:i,delta:s,newParent:w,newHost:W,hints:f};this._commandStack.execute("elements.move",G)},P.prototype.moveConnection=function(i,s,O,f,A){typeof f=="object"&&(A=f,f=void 0);var w={connection:i,delta:s,newParent:O,newParentIndex:f,hints:A||{}};this._commandStack.execute("connection.move",w)},P.prototype.layoutConnection=function(i,s){var O={connection:i,hints:s||{}};this._commandStack.execute("connection.layout",O)},P.prototype.createConnection=function(i,s,O,f,A,w){typeof O=="object"&&(w=A,A=f,f=O,O=void 0),f=this._create("connection",f);var W={source:i,target:s,parent:A,parentIndex:O,connection:f,hints:w};return this._commandStack.execute("connection.create",W),W.connection},P.prototype.createShape=function(i,s,O,f,A){typeof f!="number"&&(A=f,f=void 0),A=A||{};var w=A.attach,W,G;i=this._create("shape",i),w?(W=O.parent,G=O):W=O;var $={position:s,shape:i,parent:W,parentIndex:f,host:G,hints:A};return this._commandStack.execute("shape.create",$),$.shape},P.prototype.createElements=function(i,s,O,f,A){(0,h.isArray)(i)||(i=[i]),typeof f!="number"&&(A=f,f=void 0),A=A||{};var w={position:s,elements:i,parent:O,parentIndex:f,hints:A};return this._commandStack.execute("elements.create",w),w.elements},P.prototype.createLabel=function(i,s,O,f){O=this._create("label",O);var A={labelTarget:i,position:s,parent:f||i.parent,shape:O};return this._commandStack.execute("label.create",A),A.shape},P.prototype.appendShape=function(i,s,O,f,A){A=A||{},s=this._create("shape",s);var w={source:i,position:O,target:f,shape:s,connection:A.connection,connectionParent:A.connectionParent,attach:A.attach};return this._commandStack.execute("shape.append",w),w.shape},P.prototype.removeElements=function(i){var s={elements:i};this._commandStack.execute("elements.delete",s)},P.prototype.distributeElements=function(i,s,O){var f={groups:i,axis:s,dimension:O};this._commandStack.execute("elements.distribute",f)},P.prototype.removeShape=function(i,s){var O={shape:i,hints:s||{}};this._commandStack.execute("shape.delete",O)},P.prototype.removeConnection=function(i,s){var O={connection:i,hints:s||{}};this._commandStack.execute("connection.delete",O)},P.prototype.replaceShape=function(i,s,O){var f={oldShape:i,newData:s,hints:O||{}};return this._commandStack.execute("shape.replace",f),f.newShape},P.prototype.alignElements=function(i,s){var O={elements:i,alignment:s};this._commandStack.execute("elements.align",O)},P.prototype.resizeShape=function(i,s,O,f){var A={shape:i,newBounds:s,minBounds:O,hints:f};this._commandStack.execute("shape.resize",A)},P.prototype.createSpace=function(i,s,O,f,A){var w={delta:O,direction:f,movingShapes:i,resizingShapes:s,start:A};this._commandStack.execute("spaceTool",w)},P.prototype.updateWaypoints=function(i,s,O){var f={connection:i,newWaypoints:s,hints:O||{}};this._commandStack.execute("connection.updateWaypoints",f)},P.prototype.reconnect=function(i,s,O,f,A){var w={connection:i,newSource:s,newTarget:O,dockingOrPoints:f,hints:A||{}};this._commandStack.execute("connection.reconnect",w)},P.prototype.reconnectStart=function(i,s,O,f){f||(f={}),this.reconnect(i,s,i.target,O,(0,h.assign)(f,{docking:"source"}))},P.prototype.reconnectEnd=function(i,s,O,f){f||(f={}),this.reconnect(i,i.source,s,O,(0,h.assign)(f,{docking:"target"}))},P.prototype.connect=function(i,s,O,f){return this.createConnection(i,s,O||{},i.parent,f)},P.prototype._create=function(i,s){return s instanceof L.C6?s:this._elementFactory.create(i,s)},P.prototype.toggleCollapse=function(i,s){var O={shape:i,hints:s||{}};this._commandStack.execute("shape.toggleCollapse",O)}},90006:(X,K,u)=>{u.d(K,{A:()=>v});var h=u(98218),L=u.n(h),d=u(10018),E=Math.round;function v(p){this._modeling=p}v.$inject=["modeling"],v.prototype.preExecute=function(p){var x=p.elements,T=p.parent,c=p.parentIndex,a=p.position,e=p.hints,g=this._modeling;(0,h.forEach)(x,function(m){(0,h.isNumber)(m.x)||(m.x=0),(0,h.isNumber)(m.y)||(m.y=0)});var t=(0,d.U7)(x);(0,h.forEach)(x,function(m){M(m)&&(m.waypoints=(0,h.map)(m.waypoints,function(n){return{x:n.x-t.x-E(t.width/2)+a.x,y:n.y-t.y-E(t.height/2)+a.y}})),(0,h.assign)(m,{x:m.x-t.x-E(t.width/2)+a.x,y:m.y-t.y-E(t.height/2)+a.y})});var o=(0,d.wT)(x),r={},y=this;(0,h.forEach)(x,function(m){if(M(m)){r[m.id]=(0,h.isNumber)(c)?g.createConnection(r[m.source.id],r[m.target.id],c,m,m.parent||T,e):g.createConnection(r[m.source.id],r[m.target.id],m,m.parent||T,e);return}var n=(0,h.assign)({},e);o.indexOf(m)===-1&&(n.autoResize=!1),r[m.id]=(0,h.isNumber)(c)?g.createShape(m,(0,h.pick)(m,["x","y","width","height"]),y.getParent(m,p),c,n):g.createShape(m,(0,h.pick)(m,["x","y","width","height"]),y.getParent(m,p),n)}),p.elements=(0,h.values)(r)},v.prototype.getParent=function(p,x){return p.parent||x.parent};function M(p){return!!p.waypoints}},34635:(X,K,u)=>{u.d(K,{A:()=>E});var h=u(51270),L=u.n(h),d=u(2050);function E(x){d.A.call(this,x)}L()(E,d.A),E.$inject=["canvas"];var v=d.A.prototype.execute;E.prototype.execute=function(x){var T=x.shape;return p(T),T.labelTarget=x.labelTarget,v.call(this,x)};var M=d.A.prototype.revert;E.prototype.revert=function(x){return x.shape.labelTarget=null,M.call(this,x)};function p(x){["width","height"].forEach(function(T){typeof x[T]>"u"&&(x[T]=0)})}},2050:(X,K,u)=>{u.d(K,{A:()=>E});var h=u(98218),L=u.n(h),d=Math.round;function E(v){this._canvas=v}E.$inject=["canvas"],E.prototype.execute=function(v){var M=v.shape,p=v.position,x=v.parent,T=v.parentIndex;if(!x)throw new Error("parent required");if(!p)throw new Error("position required");return p.width!==void 0?(0,h.assign)(M,p):(0,h.assign)(M,{x:p.x-d(M.width/2),y:p.y-d(M.height/2)}),this._canvas.addShape(M,x,T),M},E.prototype.revert=function(v){var M=v.shape;return this._canvas.removeShape(M),M}},81493:(X,K,u)=>{u.d(K,{A:()=>d});var h=u(6958),L=u(91799);function d(v,M){this._canvas=v,this._modeling=M}d.$inject=["canvas","modeling"],d.prototype.preExecute=function(v){var M=this._modeling,p=v.shape;(0,L.l)(p.incoming,function(x){M.removeConnection(x,{nested:!0})}),(0,L.l)(p.outgoing,function(x){M.removeConnection(x,{nested:!0})}),(0,L.l)(p.children,function(x){E(x)?M.removeConnection(x,{nested:!0}):M.removeShape(x,{nested:!0})})},d.prototype.execute=function(v){var M=this._canvas,p=v.shape,x=p.parent;return v.oldParent=x,v.oldParentIndex=(0,h.qh)(x.children,p),M.removeShape(p),p},d.prototype.revert=function(v){var M=this._canvas,p=v.shape,x=v.oldParent,T=v.oldParentIndex;return(0,h.WQ)(x.children,p,T),M.addShape(p,x),p};function E(v){return v.waypoints}},12301:(X,K,u)=>{u.d(K,{A:()=>L});var h=u(35797);function L(d){this._helper=new h.A(d)}L.$inject=["modeling"],L.prototype.preExecute=function(d){d.closure=this._helper.getClosure(d.shapes)},L.prototype.postExecute=function(d){var E=d.hints,v;E&&E.primaryShape&&(v=E.primaryShape,E.oldParent=v.parent),this._helper.moveClosure(d.closure,d.delta,d.newParent,d.newHost,v)}},57261:(X,K,u)=>{u.d(K,{A:()=>E});var h=u(98218),L=u.n(h),d=u(45240);function E(T){this._modeling=T}E.$inject=["modeling"],E.prototype.preExecute=function(T){var c=T.delta,a=T.direction,e=T.movingShapes,g=T.resizingShapes,t=T.start;this.moveShapes(e,c),this.resizeShapes(g,c,a),this.updateConnectionWaypoints((0,d.Gq)(e,g),c,a,t,e,g)},E.prototype.execute=function(){},E.prototype.revert=function(){},E.prototype.moveShapes=function(T,c){var a=this;(0,h.forEach)(T,function(e){a._modeling.moveShape(e,c,null,{autoResize:!1,layout:!1,recurse:!1})})},E.prototype.resizeShapes=function(T,c,a){var e=this;(0,h.forEach)(T,function(g){var t=(0,d.Ih)(g,a,c);e._modeling.resizeShape(g,t,null,{attachSupport:!1,autoResize:!1,layout:!1})})},E.prototype.updateConnectionWaypoints=function(T,c,a,e,g,t){var o=this;(0,h.forEach)(T,function(r){var y=r.source,m=r.target,n=M(r),l=p(a);n=(0,h.map)(n,function(_,S){var D=S===0,b=S===n.length-1;return D&&!x(g.concat(t),y)||b&&!x(g.concat(t),m)||((_[l]>e&&/e|s/.test(a)||_[l]<e&&/n|w/.test(a))&&(_[l]=_[l]+c[l]),_.original&&(_.original[l]>e&&/e|s/.test(a)||_.original[l]<e&&/n|w/.test(a))&&(_.original[l]=_.original[l]+c[l])),_}),o._modeling.updateWaypoints(r,n,{labelBehavior:!1})})};function v(T){return(0,h.assign)({},T)}function M(T){return(0,h.map)(T.waypoints,function(c){return c=v(c),c.original&&(c.original=v(c.original)),c})}function p(T){switch(T){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function x(T,c){return T.indexOf(c)!==-1}},77648:(X,K,u)=>{u.d(K,{A:()=>x});var h=u(17389);const L={commandStack:["type",h.A]};var d=u(54100),E=u(56773),v=u(11918),M=u(3366),p=u(10033);const x={__depends__:[L,d.A,E.A,v.A],__init__:["modeling"],modeling:["type",M.A],layouter:["type",p.A]}},79691:(X,K,u)=>{u.d(K,{A:()=>V});var h=u(69380),L=u(56773),d=u(35576),E=u(11918),v=u(84654),M=u(71953),p=u(98218),x=u(86439),T=500,c=1250,a=1500,e=Math.round;function g(z){return{x:z.x+e(z.width/2),y:z.y+e(z.height/2)}}function t(z,k,N,P,i){function s(f,A,w,W){return i.allowed("elements.move",{shapes:f,delta:A,position:w,target:W})}z.on("shape.move.start",a,function(f){var A=f.context,w=f.shape,W=P.get().slice();W.indexOf(w)===-1&&(W=[w]),W=o(W),(0,p.assign)(A,{shapes:W,validatedShapes:W,shape:w})}),z.on("shape.move.start",c,function(f){var A=f.context,w=A.validatedShapes,W;if(W=A.canExecute=s(w),!W)return!1}),z.on("shape.move.move",T,function(f){var A=f.context,w=A.validatedShapes,W=f.hover,G={x:f.dx,y:f.dy},$={x:f.x,y:f.y},J;if(J=s(w,G,$,W),A.delta=G,A.canExecute=J,J===null){A.target=null;return}A.target=W}),z.on("shape.move.end",function(f){var A=f.context,w=A.delta,W=A.canExecute,G=W==="attach",$=A.shapes;if(W===!1)return!1;w.x=e(w.x),w.y=e(w.y),!(w.x===0&&w.y===0)&&N.moveElements($,w,A.target,{primaryShape:A.shape,attach:G})}),z.on("element.mousedown",function(f){var A=(0,x.AF)(f);if(!A)throw new Error("must supply DOM mousedown event");return O(A,f.element)});function O(f,A,w,W){if((0,p.isObject)(w)&&(W=w,w=!1),!(A.waypoints||!A.parent)){var G=g(A);return k.init(f,G,"shape.move",{cursor:"grabbing",autoActivate:w,data:{shape:A,context:W||{}}}),!0}}this.start=O}t.$inject=["eventBus","dragging","modeling","selection","rules"];function o(z){var k=(0,p.groupBy)(z,"id");return(0,p.filter)(z,function(N){for(;N=N.parent;)if(k[N.id])return!1;return!0})}var r=u(10018),y=u(33225),m=u(52965),n=499,l="djs-dragging",_="drop-ok",S="drop-not-ok",D="new-parent",b="attach-ok";function I(z,k,N,P){function i(A){var w=s(A),W=U(w);return W}function s(A){var w=(0,r.cZ)(A,!0),W=(0,p.map)(w,function(G){return(G.incoming||[]).concat(G.outgoing||[])});return(0,p.flatten)(w.concat(W))}function O(A,w){[b,_,S,D].forEach(function(W){W===w?k.addMarker(A,W):k.removeMarker(A,W)})}function f(A,w,W){P.addDragger(w,A.dragGroup),W&&k.addMarker(w,l),A.allDraggedElements?A.allDraggedElements.push(w):A.allDraggedElements=[w]}z.on("shape.move.start",n,function(A){var w=A.context,W=w.shapes,G=w.allDraggedElements,$=i(W);if(!w.dragGroup){var J=(0,y.vt)("g");(0,y.CF)(J,N.cls("djs-drag-group",["no-events"]));var q=k.getDefaultLayer();(0,y.BC)(q,J),w.dragGroup=J}$.forEach(function(it){P.addDragger(it,w.dragGroup)}),G?G=(0,p.flatten)([G,s(W)]):G=s(W),(0,p.forEach)(G,function(it){k.addMarker(it,l)}),w.allDraggedElements=G,w.differentParents=F(W)}),z.on("shape.move.move",n,function(A){var w=A.context,W=w.dragGroup,G=w.target,$=w.shape.parent,J=w.canExecute;G&&(J==="attach"?O(G,b):w.canExecute&&G&&G.id!==$.id?O(G,D):O(G,w.canExecute?_:S)),(0,m.Tl)(W,A.dx,A.dy)}),z.on(["shape.move.out","shape.move.cleanup"],function(A){var w=A.context,W=w.target;W&&O(W,null)}),z.on("shape.move.cleanup",function(A){var w=A.context,W=w.allDraggedElements,G=w.dragGroup;(0,p.forEach)(W,function($){k.removeMarker($,l)}),G&&(0,y.TF)(G)}),this.makeDraggable=f}I.$inject=["eventBus","canvas","styles","previewSupport"];function U(z){var k=(0,p.filter)(z,function(N){return H(N)?(0,p.find)(z,(0,p.matchPattern)({id:N.source.id}))&&(0,p.find)(z,(0,p.matchPattern)({id:N.target.id})):!0});return k}function F(z){return(0,p.size)((0,p.groupBy)(z,function(k){return k.parent&&k.parent.id}))!==1}function H(z){return z.waypoints}const V={__depends__:[h.A,L.A,d.A,E.A,v.A,M.A],__init__:["move","movePreview"],move:["type",t],movePreview:["type",I]}},35576:(X,K,u)=>{u.d(K,{A:()=>p});var h=u(10018),L=u(33225),d=u(52687),E=u(98218),v=500;function M(x,T,c){this.offset=6;var a=T.cls("djs-outline",["no-fill"]),e=this;function g(t,o){var r=(0,L.vt)("rect");return(0,L.CF)(r,(0,E.assign)({x:10,y:10,width:100,height:100},a)),(0,L.BC)(t,r),r}x.on(["shape.added","shape.changed"],v,function(t){var o=t.element,r=t.gfx,y=(0,d.query)(".djs-outline",r);y||(y=g(r,o)),e.updateShapeOutline(y,o)}),x.on(["connection.added","connection.changed"],function(t){var o=t.element,r=t.gfx,y=(0,d.query)(".djs-outline",r);y||(y=g(r,o)),e.updateConnectionOutline(y,o)})}M.prototype.updateShapeOutline=function(x,T){(0,L.CF)(x,{x:-this.offset,y:-this.offset,width:T.width+this.offset*2,height:T.height+this.offset*2})},M.prototype.updateConnectionOutline=function(x,T){var c=(0,h.U7)(T);(0,L.CF)(x,{x:c.x-this.offset,y:c.y-this.offset,width:c.width+this.offset*2,height:c.height+this.offset*2})},M.$inject=["eventBus","styles","elementRegistry"];const p={__init__:["outline"],outline:["type",M]}},18587:(X,K,u)=>{u.d(K,{A:()=>a});var h=u(98218),L=u.n(h),d=u(52687),E=u.n(d),v=".djs-palette-toggle",M=".entry",p=v+", "+M,x="open",T="two-column",c=1e3;function a(t,o){this._eventBus=t,this._canvas=o;var r=this;t.on("tool-manager.update",function(y){var m=y.tool;r.updateToolHighlight(m)}),t.on("i18n.changed",function(){r._update()}),t.on("diagram.init",function(){r._diagramInitialized=!0,r._rebuild()})}a.$inject=["eventBus","canvas"],a.prototype.registerProvider=function(t,o){o||(o=t,t=c),this._eventBus.on("palette.getProviders",t,function(r){r.providers.push(o)}),this._rebuild()},a.prototype.getEntries=function(){var t=this._getProviders();return t.reduce(g,{})},a.prototype._rebuild=function(){if(this._diagramInitialized){var t=this._getProviders();t.length&&(this._container||this._init(),this._update())}},a.prototype._init=function(){var t=this,o=this._eventBus,r=this._getParentContainer(),y=this._container=(0,d.domify)(a.HTML_MARKUP);r.appendChild(y),d.delegate.bind(y,p,"click",function(m){var n=m.delegateTarget;if((0,d.matches)(n,v))return t.toggle();t.trigger("click",m)}),d.event.bind(y,"mousedown",function(m){m.stopPropagation()}),d.delegate.bind(y,M,"dragstart",function(m){t.trigger("dragstart",m)}),o.on("canvas.resized",this._layoutChanged,this),o.fire("palette.create",{container:y})},a.prototype._getProviders=function(t){var o=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(o),o.providers},a.prototype._toggleState=function(t){t=t||{};var o=this._getParentContainer(),r=this._container,y=this._eventBus,m,n=(0,d.classes)(r);"twoColumn"in t?m=t.twoColumn:m=this._needsCollapse(o.clientHeight,this._entries||{}),n.toggle(T,m),"open"in t&&n.toggle(x,t.open),y.fire("palette.changed",{twoColumn:m,open:this.isOpen()})},a.prototype._update=function(){var t=(0,d.query)(".djs-palette-entries",this._container),o=this._entries=this.getEntries();(0,d.clear)(t),(0,h.forEach)(o,function(r,y){var m=r.group||"default",n=(0,d.query)("[data-group="+m+"]",t);n||(n=(0,d.domify)('<div class="group" data-group="'+m+'"></div>'),t.appendChild(n));var l=r.html||(r.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),_=(0,d.domify)(l);n.appendChild(_),r.separator||((0,d.attr)(_,"data-action",y),r.title&&(0,d.attr)(_,"title",r.title),r.className&&e(_,r.className),r.imageUrl&&_.appendChild((0,d.domify)('<img src="'+r.imageUrl+'">')))}),this.open()},a.prototype.trigger=function(t,o,r){var y=this._entries,m,n,l,_=o.delegateTarget||o.target;if(!_)return o.preventDefault();m=y[(0,d.attr)(_,"data-action")],m&&(n=m.action,l=o.originalEvent||o,(0,h.isFunction)(n)?t==="click"&&n(l,r):n[t]&&n[t](l,r),o.preventDefault())},a.prototype._layoutChanged=function(){this._toggleState({})},a.prototype._needsCollapse=function(t,o){var r=50,y=Object.keys(o).length*46;return t<y+r},a.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},a.prototype.open=function(){this._toggleState({open:!0})},a.prototype.toggle=function(t){this.isOpen()?this.close():this.open()},a.prototype.isActiveTool=function(t){return t&&this._activeTool===t},a.prototype.updateToolHighlight=function(t){var o,r;this._toolsContainer||(o=(0,d.query)(".djs-palette-entries",this._container),this._toolsContainer=(0,d.query)("[data-group=tools]",o)),r=this._toolsContainer,(0,h.forEach)(r.children,function(y){var m=y.getAttribute("data-action");if(m){var n=(0,d.classes)(y);m=m.replace("-tool",""),n.contains("entry")&&m===t?n.add("highlighted-entry"):n.remove("highlighted-entry")}})},a.prototype.isOpen=function(){return(0,d.classes)(this._container).has(x)},a.prototype._getParentContainer=function(){return this._canvas.getContainer()},a.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function e(t,o){var r=(0,d.classes)(t),y=(0,h.isArray)(o)?o:o.split(/\s+/g);y.forEach(function(m){r.add(m)})}function g(t,o){var r=o.getPaletteEntries();return(0,h.isFunction)(r)?r(t):((0,h.forEach)(r,function(y,m){t[m]=y}),t)}},85868:(X,K,u)=>{u.d(K,{A:()=>L});var h=u(18587);const L={__init__:["palette"],palette:["type",h.A]}},6226:(X,K,u)=>{u.d(K,{A:()=>x});var h=u(98218),L=u.n(h),d=u(52687),E=u.n(d),v="data-id",M=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],p=1e3;function x(c,a,e){var g=(0,h.isDefined)(c&&c.scale)?c.scale:{min:1,max:1.5};this._config={scale:g},this._eventBus=a,this._canvas=e,this._providers={},this._current={}}x.$inject=["config.popupMenu","eventBus","canvas"],x.prototype.registerProvider=function(c,a,e){e||(e=a,a=p),this._eventBus.on("popupMenu.getProviders."+c,a,function(g){g.providers.push(e)})},x.prototype.isEmpty=function(c,a){if(!c)throw new Error("element parameter is missing");if(!a)throw new Error("providerId parameter is missing");var e=this._getProviders(a);if(!e)return!0;var g=this._getEntries(c,e),t=this._getHeaderEntries(c,e),o=(0,h.size)(g)>0,r=t&&(0,h.size)(t)>0;return!o&&!r},x.prototype.open=function(c,a,e){var g=this._getProviders(a);if(!c)throw new Error("Element is missing");if(!g||!g.length)throw new Error("No registered providers for: "+a);if(!e)throw new Error("the position argument is missing");this.isOpen()&&this.close(),this._emit("open");var t=this._current={className:a,element:c,position:e},o=this._getEntries(c,g),r=this._getHeaderEntries(c,g);t.entries=(0,h.assign)({},o,r),t.container=this._createContainer(),(0,h.size)(r)&&t.container.appendChild(this._createEntries(r,"djs-popup-header")),(0,h.size)(o)&&t.container.appendChild(this._createEntries(o,"djs-popup-body"));var y=this._canvas,m=y.getContainer();this._attachContainer(t.container,m,e.cursor),this._bindAutoClose()},x.prototype.close=function(){this.isOpen()&&(this._emit("close"),this._unbindAutoClose(),(0,d.remove)(this._current.container),this._current.container=null)},x.prototype.isOpen=function(){return!!this._current.container},x.prototype.trigger=function(c){c.preventDefault();var a=c.delegateTarget||c.target,e=(0,d.attr)(a,v),g=this._getEntry(e);if(g.action)return g.action.call(null,c,g)},x.prototype._getProviders=function(c){var a=this._eventBus.createEvent({type:"popupMenu.getProviders."+c,providers:[]});return this._eventBus.fire(a),a.providers},x.prototype._getEntries=function(c,a){var e={};return(0,h.forEach)(a,function(g){if(!g.getPopupMenuEntries){(0,h.forEach)(g.getEntries(c),function(o){var r=o.id;if(!r)throw new Error("every entry must have the id property set");e[r]=(0,h.omit)(o,["id"])});return}var t=g.getPopupMenuEntries(c);(0,h.isFunction)(t)?e=t(e):(0,h.forEach)(t,function(o,r){e[r]=o})}),e},x.prototype._getHeaderEntries=function(c,a){var e={};return(0,h.forEach)(a,function(g){if(!g.getPopupMenuHeaderEntries){if(!g.getHeaderEntries)return;(0,h.forEach)(g.getHeaderEntries(c),function(o){var r=o.id;if(!r)throw new Error("every entry must have the id property set");e[r]=(0,h.omit)(o,["id"])});return}var t=g.getPopupMenuHeaderEntries(c);(0,h.isFunction)(t)?e=t(e):(0,h.forEach)(t,function(o,r){e[r]=o})}),e},x.prototype._getEntry=function(c){var a=this._current.entries[c];if(!a)throw new Error("entry not found");return a},x.prototype._emit=function(c){this._eventBus.fire("popupMenu."+c)},x.prototype._createContainer=function(){var c=(0,d.domify)('<div class="djs-popup">'),a=this._current.position,e=this._current.className;return(0,h.assign)(c.style,{position:"absolute",left:a.x+"px",top:a.y+"px",visibility:"hidden"}),(0,d.classes)(c).add(e),c},x.prototype._attachContainer=function(c,a,e){var g=this;d.delegate.bind(c,".entry","click",function(t){g.trigger(t)}),this._updateScale(c),a.appendChild(c),e&&this._assureIsInbounds(c,e)},x.prototype._updateScale=function(c){var a=this._canvas.zoom(),e=this._config.scale,g,t,o=a;e!==!0&&(e===!1?(g=1,t=1):(g=e.min,t=e.max),(0,h.isDefined)(g)&&a<g&&(o=g),(0,h.isDefined)(t)&&a>t&&(o=t)),T(c,"scale("+o+")")},x.prototype._assureIsInbounds=function(c,a){var e=this._canvas,g=e._container.getBoundingClientRect(),t=c.offsetLeft,o=c.offsetTop,r=c.scrollWidth,y=c.scrollHeight,m={},n,l,_={x:a.x-g.left,y:a.y-g.top};t+r>g.width&&(m.x=!0),o+y>g.height&&(m.y=!0),m.x&&m.y?(n=_.x-r+"px",l=_.y-y+"px"):m.x?(n=_.x-r+"px",l=_.y+"px"):m.y&&_.y<y?(n=_.x+"px",l="10px"):m.y&&(n=_.x+"px",l=_.y-y+"px"),(0,h.assign)(c.style,{left:n,top:l},{visibility:"visible","z-index":1e3})},x.prototype._createEntries=function(c,a){var e=(0,d.domify)("<div>"),g=this;return(0,d.classes)(e).add(a),(0,h.forEach)(c,function(t,o){var r=g._createEntry(t,o);e.appendChild(r)}),e},x.prototype._createEntry=function(c,a){var e=(0,d.domify)("<div>"),g=(0,d.classes)(e);if(g.add("entry"),c.className&&c.className.split(" ").forEach(function(o){g.add(o)}),(0,d.attr)(e,v,a),c.label){var t=(0,d.domify)("<span>");t.textContent=c.label,e.appendChild(t)}return c.imageUrl&&e.appendChild((0,d.domify)('<img src="'+c.imageUrl+'" />')),c.active===!0&&g.add("active"),c.disabled===!0&&g.add("disabled"),c.title&&(e.title=c.title),e},x.prototype._bindAutoClose=function(){this._eventBus.once(M,this.close,this)},x.prototype._unbindAutoClose=function(){this._eventBus.off(M,this.close,this)};function T(c,a){c.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(e){c.style[e+"transform"]=a})}},40127:(X,K,u)=>{u.d(K,{A:()=>L});var h=u(6226);const L={__init__:["popupMenu"],popupMenu:["type",h.A]}},38134:(X,K,u)=>{u.d(K,{A:()=>T});var h=u(98218),L=u.n(h),d=u(33225),E=u(52687),v=u.n(E),M=u(12266),p=["marker-start","marker-mid","marker-end"],x=["circle","ellipse","line","path","polygon","polyline","rect"];function T(t,o,r,y){this._elementRegistry=t,this._canvas=r,this._styles=y,this._clonedMarkers={};var m=this;o.on("drag.cleanup",function(){(0,h.forEach)(m._clonedMarkers,function(n){(0,d.TF)(n)}),m._clonedMarkers={}})}T.$inject=["elementRegistry","eventBus","canvas","styles"],T.prototype.getGfx=function(t){return this._elementRegistry.getGraphics(t)},T.prototype.addDragger=function(t,o,r){r=r||this.getGfx(t);var y=(0,d.o8)(r),m=r.getBoundingClientRect();return this._cloneMarkers((0,M.P)(y)),(0,d.CF)(y,this._styles.cls("djs-dragger",[],{x:m.top,y:m.left})),(0,d.BC)(o,y),y},T.prototype.addFrame=function(t,o){var r=(0,d.vt)("rect",{class:"djs-resize-overlay",width:t.width,height:t.height,x:t.x,y:t.y});return(0,d.BC)(o,r),r},T.prototype._cloneMarkers=function(t){var o=this;if(t.childNodes)for(var r=0;r<t.childNodes.length;r++)o._cloneMarkers(t.childNodes[r]);g(t)&&p.forEach(function(y){if((0,d.CF)(t,y)){var m=c(t,y,o._canvas.getContainer());o._cloneMarker(t,m,y)}})},T.prototype._cloneMarker=function(t,o,r){var y=o.id,m=this._clonedMarkers[y];if(!m){m=(0,d.o8)(o);var n=y+"-clone";m.id=n,(0,d.Ly)(m).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[y]=m;var l=(0,E.query)("defs",this._canvas._svg);l||(l=(0,d.vt)("defs"),(0,d.BC)(this._canvas._svg,l)),(0,d.BC)(l,m)}var _=e(this._clonedMarkers[y].id);(0,d.CF)(t,r,_)};function c(t,o,r){var y=a((0,d.CF)(t,o));return(0,E.query)("marker#"+y,r||document)}function a(t){return t.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function e(t){return"url(#"+t+")"}function g(t){return x.indexOf(t.nodeName)!==-1}},71953:(X,K,u)=>{u.d(K,{A:()=>L});var h=u(38134);const L={__init__:["previewSupport"],previewSupport:["type",h.A]}},73229:(X,K,u)=>{u.d(K,{A:()=>M,a:()=>x});var h=u(98218),L=u.n(h),d=u(11345),E=u(65911),v=10;function M(c,a,e,g){this._dragging=g,this._rules=a;var t=this;function o(m,n){var l=m.shape,_=m.direction,S=m.resizeConstraints,D;m.delta=n,D=(0,d.Ih)(l,_,n),m.newBounds=(0,d.Dp)(D,S),m.canExecute=t.canResize(m)}function r(m){var n=m.resizeConstraints,l=m.minBounds;n===void 0&&(l===void 0&&(l=t.computeMinResizeBox(m)),m.resizeConstraints={min:(0,E.Fy)(l)})}function y(m){var n=m.shape,l=m.canExecute,_=m.newBounds;if(l){if(_=(0,E.Au)(_),!p(n,_))return;e.resizeShape(n,_)}}c.on("resize.start",function(m){r(m.context)}),c.on("resize.move",function(m){var n={x:m.dx,y:m.dy};o(m.context,n)}),c.on("resize.end",function(m){y(m.context)})}M.prototype.canResize=function(c){var a=this._rules,e=(0,h.pick)(c,["newBounds","shape","delta","direction"]);return a.allowed("shape.resize",e)},M.prototype.activate=function(c,a,e){var g=this._dragging,t,o;if(typeof e=="string"&&(e={direction:e}),t=(0,h.assign)({shape:a},e),o=t.direction,!o)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");g.init(c,x(a,o),"resize",{autoActivate:!0,cursor:T(o),data:{shape:a,context:t}})},M.prototype.computeMinResizeBox=function(c){var a=c.shape,e=c.direction,g,t;return g=c.minDimensions||{width:v,height:v},t=(0,d.uR)(a,c.childrenBoxPadding),(0,d.Cw)(e,a,g,t)},M.$inject=["eventBus","rules","modeling","dragging"];function p(c,a){return c.x!==a.x||c.y!==a.y||c.width!==a.width||c.height!==a.height}function x(c,a){var e=(0,E.pp)(c),g=(0,E.Fy)(c),t={x:e.x,y:e.y};return a.indexOf("n")!==-1?t.y=g.top:a.indexOf("s")!==-1&&(t.y=g.bottom),a.indexOf("e")!==-1?t.x=g.right:a.indexOf("w")!==-1&&(t.x=g.left),t}function T(c){var a="resize-";return c==="n"||c==="s"?a+"ns":c==="e"||c==="w"?a+"ew":c==="nw"||c==="se"?a+"nwse":a+"nesw"}},25342:(X,K,u)=>{u.d(K,{A:()=>t});var h=u(98218),L=u.n(h),d=u(33225),E=u(52687),v=u.n(E),M=u(60053),p=u(52965),x=u(73229),T=-6,c=4,a=20,e="djs-resizer",g=["n","w","s","e","nw","ne","se","sw"];function t(r,y,m,n){this._resize=n,this._canvas=y;var l=this;r.on("selection.changed",function(_){var S=_.newSelection;l.removeResizers(),S.length===1&&(0,h.forEach)(S,(0,h.bind)(l.addResizer,l))}),r.on("shape.changed",function(_){var S=_.element;m.isSelected(S)&&(l.removeResizers(),l.addResizer(S))})}t.prototype.makeDraggable=function(r,y,m){var n=this._resize;function l(_){(0,M.ls)(_)&&n.activate(_,r,m)}E.event.bind(y,"mousedown",l),E.event.bind(y,"touchstart",l)},t.prototype._createResizer=function(r,y,m,n){var l=this._getResizersParent(),_=o(n),S=(0,d.vt)("g");(0,d.Ly)(S).add(e),(0,d.Ly)(S).add(e+"-"+r.id),(0,d.Ly)(S).add(e+"-"+n),(0,d.BC)(l,S);var D=(0,d.vt)("rect");(0,d.CF)(D,{x:-c/2+_.x,y:-c/2+_.y,width:c,height:c}),(0,d.Ly)(D).add(e+"-visual"),(0,d.BC)(S,D);var b=(0,d.vt)("rect");return(0,d.CF)(b,{x:-a/2+_.x,y:-a/2+_.y,width:a,height:a}),(0,d.Ly)(b).add(e+"-hit"),(0,d.BC)(S,b),(0,p.pd)(S,y,m),S},t.prototype.createResizer=function(r,y){var m=(0,x.a)(r,y),n=this._createResizer(r,m.x,m.y,y);this.makeDraggable(r,n,y)},t.prototype.addResizer=function(r){var y=this,m=this._resize;m.canResize({shape:r})&&(0,h.forEach)(g,function(n){y.createResizer(r,n)})},t.prototype.removeResizers=function(){var r=this._getResizersParent();(0,d.IU)(r)},t.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},t.$inject=["eventBus","canvas","selection","resize"];function o(r){var y={x:0,y:0};return r.indexOf("e")!==-1?y.x=-T:r.indexOf("w")!==-1&&(y.x=T),r.indexOf("s")!==-1?y.y=-T:r.indexOf("n")!==-1&&(y.y=T),y}},88729:(X,K,u)=>{u.d(K,{A:()=>v});var h=u(33225),L="djs-resizing",d="resize-not-ok",E=500;function v(M,p,x){function T(a){var e=a.shape,g=a.newBounds,t=a.frame;t||(t=a.frame=x.addFrame(e,p.getDefaultLayer()),p.addMarker(e,L)),g.width>5&&(0,h.CF)(t,{x:g.x,width:g.width}),g.height>5&&(0,h.CF)(t,{y:g.y,height:g.height}),a.canExecute?(0,h.Ly)(t).remove(d):(0,h.Ly)(t).add(d)}function c(a){var e=a.shape,g=a.frame;g&&(0,h.TF)(a.frame),p.removeMarker(e,L)}M.on("resize.move",E,function(a){T(a.context)}),M.on("resize.cleanup",function(a){c(a.context)})}v.$inject=["eventBus","canvas","previewSupport"]},11345:(X,K,u)=>{u.d(K,{Cw:()=>t,Dp:()=>g,Ih:()=>T,uR:()=>m});var h=u(98218),L=u.n(h),d=u(10018),E=u(65911),v=Math.max,M=Math.min,p=20;function x(n,l){return{top:n.top-l.top,right:n.right-l.right,bottom:n.bottom-l.bottom,left:n.left-l.left}}function T(n,l,_){var S=_.x,D=_.y,b={x:n.x,y:n.y,width:n.width,height:n.height};return l.indexOf("n")!==-1?(b.y=n.y+D,b.height=n.height-D):l.indexOf("s")!==-1&&(b.height=n.height+D),l.indexOf("e")!==-1?b.width=n.width+S:l.indexOf("w")!==-1&&(b.x=n.x+S,b.width=n.width-S),b}function c(n,l){return{x:n.x+(l.left||0),y:n.y+(l.top||0),width:n.width-(l.left||0)+(l.right||0),height:n.height-(l.top||0)+(l.bottom||0)}}function a(n,l,_){var S=n.width/l.width,D=n.height/l.height;return{x:Math.round(l.x+l.width/2)-Math.floor((n.x+n.width/2-_.x)/S),y:Math.round(l.y+l.height/2)-Math.floor((n.y+n.height/2-_.y)/D)}}function e(n,l,_){var S=l[n],D=_.min&&_.min[n],b=_.max&&_.max[n];return(0,h.isNumber)(D)&&(S=(/top|left/.test(n)?M:v)(S,D)),(0,h.isNumber)(b)&&(S=(/top|left/.test(n)?v:M)(S,b)),S}function g(n,l){if(!l)return n;var _=(0,E.Fy)(n);return(0,E.cD)({top:e("top",_,l),right:e("right",_,l),bottom:e("bottom",_,l),left:e("left",_,l)})}function t(n,l,_,S){var D=(0,E.Fy)(l),b={top:/n/.test(n)?D.bottom-_.height:D.top,left:/w/.test(n)?D.right-_.width:D.left,bottom:/s/.test(n)?D.top+_.height:D.bottom,right:/e/.test(n)?D.left+_.width:D.right},I=S?(0,E.Fy)(S):b,U={top:M(b.top,I.top),left:M(b.left,I.left),bottom:v(b.bottom,I.bottom),right:v(b.right,I.right)};return(0,E.cD)(U)}function o(n,l){return typeof n<"u"?n:p}function r(n,l){var _,S,D,b;return typeof l=="object"?(_=o(l.left),S=o(l.right),D=o(l.top),b=o(l.bottom)):_=S=D=b=o(l),{x:n.x-_,y:n.y-D,width:n.width+_+S,height:n.height+D+b}}function y(n){return!(n.waypoints||n.type==="label")}function m(n,l){var _;if(n.length===void 0?_=(0,h.filter)(n.children,y):_=n,_.length)return r((0,d.U7)(_),l)}},43537:(X,K,u)=>{u.d(K,{A:()=>E});var h=u(51270),L=u.n(h),d=u(29086);function E(v){d.A.call(this,v),this.init()}E.$inject=["eventBus"],L()(E,d.A),E.prototype.addRule=function(v,M,p){var x=this;typeof v=="string"&&(v=[v]),v.forEach(function(T){x.canExecute(T,M,function(c,a,e){return p(c)},!0)})},E.prototype.init=function(){}},11918:(X,K,u)=>{u.d(K,{A:()=>L});function h(d){this._commandStack=d.get("commandStack",!1)}h.$inject=["injector"],h.prototype.allowed=function(d,E){var v=!0,M=this._commandStack;return M&&(v=M.canExecute(d,E)),v===void 0?!0:v};const L={__init__:["rules"],rules:["type",h]}},56773:(X,K,u)=>{u.d(K,{A:()=>a});var h=u(69380),L=u(35576),d=u(6587),E=u(98218),v="hover",M="selected";function p(e,g,t,o){this._multiSelectionBox=null;function r(m,n){g.addMarker(m,n)}function y(m,n){g.removeMarker(m,n)}e.on("element.hover",function(m){r(m.element,v)}),e.on("element.out",function(m){y(m.element,v)}),e.on("selection.changed",function(m){function n(D){y(D,M)}function l(D){r(D,M)}var _=m.oldSelection,S=m.newSelection;(0,E.forEach)(_,function(D){S.indexOf(D)===-1&&n(D)}),(0,E.forEach)(S,function(D){_.indexOf(D)===-1&&l(D)})})}p.$inject=["eventBus","canvas","selection","styles"];var x=u(60053);function T(e,g,t,o){e.on("create.end",500,function(r){var y=r.context,m=y.canExecute,n=y.elements,l=y.hints||{},_=l.autoSelect;if(m){if(_===!1)return;(0,E.isArray)(_)?g.select(_):g.select(n.filter(c))}}),e.on("connect.end",500,function(r){r.context.canExecute&&r.context.connection&&g.select(r.context.connection)}),e.on("shape.move.end",500,function(r){var y=r.previousSelection||[],m=o.get(r.context.shape.id),n=(0,E.find)(y,function(l){return m.id===l.id});n||g.select(m)}),e.on("element.click",function(r){var y=r.element;y===t.getRootElement()&&(y=null);var m=g.isSelected(y),n=g.get().length>1,l=(0,x.Io)(r);if(m&&n)return l?g.deselect(y):g.select(y);m||g.select(y,l)})}T.$inject=["eventBus","selection","canvas","elementRegistry"];function c(e){return!e.hidden}const a={__init__:["selectionVisuals","selectionBehavior"],__depends__:[h.A,L.A],selection:["type",d.A],selectionVisuals:["type",p],selectionBehavior:["type",T]}},19506:(X,K,u)=>{u.d(K,{A:()=>r});var h=u(98218),L=u.n(h),d=u(65911),E=u(10018),v=u(45240),M=u(60053),p=u(46837),x=Math.abs,T=Math.round,c={x:"width",y:"height"},a="crosshair",e={n:"top",w:"left",s:"bottom",e:"right"},g=1500,t={n:"s",w:"e",s:"n",e:"w"},o=20;function r(D,b,I,U,F,H){this._canvas=D,this._dragging=b,this._eventBus=I,this._modeling=U,this._rules=F,this._toolManager=H;var V=this;H.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),I.on("spaceTool.selection.end",function(z){I.once("spaceTool.selection.ended",function(){V.activateMakeSpace(z.originalEvent)})}),I.on("spaceTool.move",g,function(z){var k=z.context,N=k.initialized;N||(N=k.initialized=V.init(z,k)),N&&m(z)}),I.on("spaceTool.end",function(z){var k=z.context,N=k.direction,P=k.movingShapes,i=k.resizingShapes,s=k.start;if(k.initialized){m(z);var O=V.getDelta(z);V.makeSpace(P,i,O,N,s),I.once("spaceTool.ended",function(f){V.activateSelection(f.originalEvent,!0,!0)})}})}r.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager"],r.prototype.activateSelection=function(D,b,I){this._dragging.init(D,"spaceTool.selection",{autoActivate:b,cursor:a,data:{context:{reactivate:I}},trapClick:!1})},r.prototype.activateMakeSpace=function(D){this._dragging.init(D,"spaceTool",{autoActivate:!0,cursor:a,data:{context:{}}})},r.prototype.makeSpace=function(D,b,I,U,F){return this._modeling.createSpace(D,b,I,U,F)},r.prototype.init=function(D,b){var I=x(D.dx)>x(D.dy)?"x":"y",U=D["d"+I],F=D[I]-U;if(x(U)<5)return!1;U<0&&(U*=-1),(0,M.Io)(D)&&(U*=-1);var H=(0,v.u6)(I,U),V=this._canvas.getRootElement(),z=(0,E.cZ)(V,!0),k=this.calculateAdjustments(z,I,U,F),N=this._eventBus.fire("spaceTool.getMinDimensions",{shapes:k.resizingShapes}),P=n(k,I,H,F,N);return(0,h.assign)(b,k,{axis:I,direction:H,spaceToolConstraints:P,start:F}),(0,p.hZ)("resize-"+(I==="x"?"ew":"ns")),!0},r.prototype.calculateAdjustments=function(D,b,I,U){var F=this._rules,H=[],V=[];return(0,h.forEach)(D,function(z){if(!(!z.parent||_(z))){var k=z[b],N=k+z[c[b]];if(I>0&&k>U||I<0&&N<U)return H.push(z);if(k<U&&N>U&&F.allowed("shape.resize",{shape:z}))return V.push(z)}}),{movingShapes:H,resizingShapes:V}},r.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},r.prototype.isActive=function(){var D=this._dragging.context();return D&&/^spaceTool/.test(D.prefix)},r.prototype.getDelta=function(D){var b=D.context,I=b.axis,U={x:0,y:0};return U[I]=T(D["d"+I]),U};function y(D){return{top:D.top-o,right:D.right+o,bottom:D.bottom+o,left:D.left-o}}function m(D){var b=D.context,I=b.spaceToolConstraints;if(I){var U,F;(0,h.isNumber)(I.left)&&(U=Math.max(D.x,I.left),D.dx=D.dx+U-D.x,D.x=U),(0,h.isNumber)(I.right)&&(U=Math.min(D.x,I.right),D.dx=D.dx+U-D.x,D.x=U),(0,h.isNumber)(I.top)&&(F=Math.max(D.y,I.top),D.dy=D.dy+F-D.y,D.y=F),(0,h.isNumber)(I.bottom)&&(F=Math.min(D.y,I.bottom),D.dy=D.dy+F-D.y,D.y=F)}}function n(D,b,I,U,F){var H=D.movingShapes,V=D.resizingShapes;if(V.length){var z={},k,N;return(0,h.forEach)(V,function(P){var i=(0,d.Fy)(P),s=(0,h.filter)(P.children,function(G){return!_(G)&&!S(G)&&!l(H,G)&&!l(V,G)}),O=(0,h.filter)(P.children,function(G){return!_(G)&&!S(G)&&l(H,G)}),f,A,w;s.length&&(A=y((0,d.Fy)((0,E.U7)(s))),f=U-i[e[I]]+A[e[I]],I==="n"?z.bottom=N=(0,h.isNumber)(N)?Math.min(N,f):f:I==="w"?z.right=N=(0,h.isNumber)(N)?Math.min(N,f):f:I==="s"?z.top=k=(0,h.isNumber)(k)?Math.max(k,f):f:I==="e"&&(z.left=k=(0,h.isNumber)(k)?Math.max(k,f):f)),O.length&&(w=y((0,d.Fy)((0,E.U7)(O))),f=U-w[e[t[I]]]+i[e[t[I]]],I==="n"?z.bottom=N=(0,h.isNumber)(N)?Math.min(N,f):f:I==="w"?z.right=N=(0,h.isNumber)(N)?Math.min(N,f):f:I==="s"?z.top=k=(0,h.isNumber)(k)?Math.max(k,f):f:I==="e"&&(z.left=k=(0,h.isNumber)(k)?Math.max(k,f):f));var W=F&&F[P.id];W&&(I==="n"?(f=U+P[c[b]]-W[c[b]],z.bottom=N=(0,h.isNumber)(N)?Math.min(N,f):f):I==="w"?(f=U+P[c[b]]-W[c[b]],z.right=N=(0,h.isNumber)(N)?Math.min(N,f):f):I==="s"?(f=U-P[c[b]]+W[c[b]],z.top=k=(0,h.isNumber)(k)?Math.max(k,f):f):I==="e"&&(f=U-P[c[b]]+W[c[b]],z.left=k=(0,h.isNumber)(k)?Math.max(k,f):f))}),z}}function l(D,b){return D.indexOf(b)!==-1}function _(D){return!!D.waypoints}function S(D){return!!D.labelTarget}},7264:(X,K,u)=>{u.d(K,{A:()=>T});var h=u(98218),L=u.n(h),d=u(33225),E=u(52965),v="djs-dragging",M="djs-resizing",p=250,x=Math.max;function T(a,e,g,t,o){var r=this;function y(m,n){(0,h.forEach)(m,function(l){o.addDragger(l,n),g.addMarker(l,v)})}a.on("spaceTool.selection.start",function(m){var n=g.getLayer("space"),l=m.context,_={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},S=(0,d.vt)("g");(0,d.CF)(S,t.cls("djs-crosshair-group",["no-events"])),(0,d.BC)(n,S);var D=(0,d.vt)("path");(0,d.CF)(D,"d",_.x),(0,d.Ly)(D).add("djs-crosshair"),(0,d.BC)(S,D);var b=(0,d.vt)("path");(0,d.CF)(b,"d",_.y),(0,d.Ly)(b).add("djs-crosshair"),(0,d.BC)(S,b),l.crosshairGroup=S}),a.on("spaceTool.selection.move",function(m){var n=m.context.crosshairGroup;(0,E.Tl)(n,m.x,m.y)}),a.on("spaceTool.selection.cleanup",function(m){var n=m.context,l=n.crosshairGroup;l&&(0,d.TF)(l)}),a.on("spaceTool.move",p,function(m){var n=m.context,l=n.line,_=n.axis,S=n.movingShapes,D=n.resizingShapes;if(n.initialized){if(!n.dragGroup){var b=g.getLayer("space");l=(0,d.vt)("path"),(0,d.CF)(l,"d","M0,0 L0,0"),(0,d.Ly)(l).add("djs-crosshair"),(0,d.BC)(b,l),n.line=l;var I=(0,d.vt)("g");(0,d.CF)(I,t.cls("djs-drag-group",["no-events"])),(0,d.BC)(g.getDefaultLayer(),I),y(S,I);var U=n.movingConnections=e.filter(function(k){var N=!1;(0,h.forEach)(S,function(O){(0,h.forEach)(O.outgoing,function(f){k===f&&(N=!0)})});var P=!1;(0,h.forEach)(S,function(O){(0,h.forEach)(O.incoming,function(f){k===f&&(P=!0)})});var i=!1;(0,h.forEach)(D,function(O){(0,h.forEach)(O.outgoing,function(f){k===f&&(i=!0)})});var s=!1;return(0,h.forEach)(D,function(O){(0,h.forEach)(O.incoming,function(f){k===f&&(s=!0)})}),c(k)&&(N||i)&&(P||s)});y(U,I),n.dragGroup=I}if(!n.frameGroup){var F=(0,d.vt)("g");(0,d.CF)(F,t.cls("djs-frame-group",["no-events"])),(0,d.BC)(g.getDefaultLayer(),F);var H=[];(0,h.forEach)(D,function(k){var N=o.addFrame(k,F),P=N.getBBox();H.push({element:N,initialBounds:P}),g.addMarker(k,M)}),n.frameGroup=F,n.frames=H}var V={x:"M"+m.x+", -10000 L"+m.x+", 10000",y:"M -10000, "+m.y+" L 10000, "+m.y};(0,d.CF)(l,{d:V[_]});var z=r.getDelta(m);(0,E.Tl)(n.dragGroup,z.x,z.y),(0,h.forEach)(n.frames,function(k){var N=k.element,P=k.initialBounds,i,s;n.direction==="e"?(0,d.CF)(N,{width:x(P.width+z.x,5)}):(i=x(P.width-z.x,5),(0,d.CF)(N,{width:i,x:P.x+P.width-i})),n.direction==="s"?(0,d.CF)(N,{height:x(P.height+z.y,5)}):(s=x(P.height-z.y,5),(0,d.CF)(N,{height:s,y:P.y+P.height-s}))})}}),a.on("spaceTool.cleanup",function(m){var n=m.context,l=n.movingShapes,_=n.movingConnections,S=n.resizingShapes,D=n.line,b=n.dragGroup,I=n.frameGroup;(0,h.forEach)(l,function(U){g.removeMarker(U,v)}),(0,h.forEach)(_,function(U){g.removeMarker(U,v)}),b&&((0,d.TF)(D),(0,d.TF)(b)),(0,h.forEach)(S,function(U){g.removeMarker(U,M)}),I&&(0,d.TF)(I)})}T.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];function c(a){return a.waypoints}T.prototype.getDelta=function(a){var e=a.context,g={x:"y",y:"x"},t={x:a.dx,y:a.dy};return t[g[e.axis]]=0,t}},45240:(X,K,u)=>{u.d(K,{Gq:()=>E,Ih:()=>M,u6:()=>d});var h=u(98218),L=u.n(h);function d(p,x){if(p==="x"){if(x>0)return"e";if(x<0)return"w"}if(p==="y"){if(x>0)return"s";if(x<0)return"n"}return null}function E(p,x){var T=[];return(0,h.forEach)(p,function(c){var a=c.incoming,e=c.outgoing;(0,h.forEach)(a.concat(e),function(g){var t=g.source,o=g.target;(v(p,t)||v(p,o)||v(x,t)||v(x,o))&&(v(T,g)||T.push(g))})}),T}function v(p,x){return p.indexOf(x)!==-1}function M(p,x,T){var c=p.x,a=p.y,e=p.width,g=p.height,t=T.x,o=T.y;switch(x){case"n":return{x:c,y:a+o,width:e,height:g-o};case"s":return{x:c,y:a,width:e,height:g+o};case"w":return{x:c+t,y:a,width:e-t,height:g};case"e":return{x:c,y:a,width:e+t,height:g};default:throw new Error("unknown direction: "+x)}}},28400:(X,K,u)=>{u.d(K,{A:()=>a});var h=u(98218),L=u(52687),d=u(50941),E=new d.A("tt");function v(e){var g=(0,L.domify)('<div class="djs-tooltip-container" style="position: absolute; width: 0; height: 0;" />');return e.insertBefore(g,e.firstChild),g}function M(e,g,t){(0,h.assign)(e.style,{left:g+"px",top:t+"px"})}function p(e,g){e.style.display=g===!1?"none":""}var x="djs-tooltip",T="."+x;function c(e,g){this._eventBus=e,this._canvas=g,this._ids=E,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=v(g.getContainer());var t=this;L.delegate.bind(this._tooltipRoot,T,"mousedown",function(o){o.stopPropagation()}),L.delegate.bind(this._tooltipRoot,T,"mouseover",function(o){t.trigger("mouseover",o)}),L.delegate.bind(this._tooltipRoot,T,"mouseout",function(o){t.trigger("mouseout",o)}),this._init()}c.$inject=["eventBus","canvas"],c.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var g=this._ids.next();return e=(0,h.assign)({},this._tooltipDefaults,e,{id:g}),this._addTooltip(e),e.timeout&&this.setTimeout(e),g},c.prototype.trigger=function(e,g){var t=g.delegateTarget||g.target,o=this.get((0,L.attr)(t,"data-tooltip-id"));o&&(e==="mouseover"&&o.timeout&&this.clearTimeout(o),e==="mouseout"&&o.timeout&&(o.timeout=1e3,this.setTimeout(o)))},c.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]},c.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var g=e.removeTimer;g&&(clearTimeout(g),e.removeTimer=null)}},c.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var g=this;e.removeTimer=setTimeout(function(){g.remove(e)},e.timeout)}},c.prototype.remove=function(e){var g=this.get(e);g&&((0,L.remove)(g.html),(0,L.remove)(g.htmlContainer),delete g.htmlContainer,delete this._tooltips[g.id])},c.prototype.show=function(){p(this._tooltipRoot)},c.prototype.hide=function(){p(this._tooltipRoot,!1)},c.prototype._updateRoot=function(e){var g=e.scale||1,t=e.scale||1,o="matrix("+g+",0,0,"+t+","+-1*e.x*g+","+-1*e.y*t+")";this._tooltipRoot.style.transform=o,this._tooltipRoot.style["-ms-transform"]=o},c.prototype._addTooltip=function(e){var g=e.id,t=e.html,o,r=this._tooltipRoot;t.get&&t.constructor.prototype.jquery&&(t=t.get(0)),(0,h.isString)(t)&&(t=(0,L.domify)(t)),o=(0,L.domify)('<div data-tooltip-id="'+g+'" class="'+x+'" style="position: absolute">'),o.appendChild(t),e.type&&(0,L.classes)(o).add("djs-tooltip-"+e.type),e.className&&(0,L.classes)(o).add(e.className),e.htmlContainer=o,r.appendChild(o),this._tooltips[g]=e,this._updateTooltip(e)},c.prototype._updateTooltip=function(e){var g=e.position,t=e.htmlContainer;M(t,g.x,g.y)},c.prototype._updateTooltipVisibilty=function(e){(0,h.forEach)(this._tooltips,function(g){var t=g.show,o=g.htmlContainer,r=!0;t&&((t.minZoom>e.scale||t.maxZoom<e.scale)&&(r=!1),p(o,r))})},c.prototype._init=function(){var e=this;function g(t){e._updateRoot(t),e._updateTooltipVisibilty(t),e.show()}this._eventBus.on("canvas.viewbox.changing",function(t){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(t){g(t.viewbox)})};const a={__init__:["tooltips"],tooltips:["type",c]}},10033:(X,K,u)=>{u.d(K,{A:()=>L});var h=u(65911);function L(){}L.prototype.layoutConnection=function(d,E){return E=E||{},[E.connectionStart||(0,h.pp)(E.source||d.source),E.connectionEnd||(0,h.pp)(E.target||d.target)]}},23550:(X,K,u)=>{u.d(K,{A:()=>v});var h=u(98218),L=u.n(h),d=u(65911);function E(M){return(0,h.assign)({original:M.point.original||M.point},M.actual)}function v(M,p){this._elementRegistry=M,this._graphicsFactory=p}v.$inject=["elementRegistry","graphicsFactory"],v.prototype.getCroppedWaypoints=function(M,p,x){p=p||M.source,x=x||M.target;var T=this.getDockingPoint(M,p,!0),c=this.getDockingPoint(M,x),a=M.waypoints.slice(T.idx+1,c.idx);return a.unshift(E(T)),a.push(E(c)),a},v.prototype.getDockingPoint=function(M,p,x){var T=M.waypoints,c,a,e;return c=x?0:T.length-1,a=T[c],e=this._getIntersection(p,M,x),{point:a,actual:e||a,idx:c}},v.prototype._getIntersection=function(M,p,x){var T=this._getShapePath(M),c=this._getConnectionPath(p);return(0,d.ki)(T,c,x)},v.prototype._getConnectionPath=function(M){return this._graphicsFactory.getConnectionPath(M)},v.prototype._getShapePath=function(M){return this._graphicsFactory.getShapePath(M)},v.prototype._getGfx=function(M){return this._elementRegistry.getGraphics(M)}},49096:(X,K,u)=>{u.d(K,{C6:()=>e,bL:()=>t,vt:()=>m});var h=u(98218),L=u.n(h),d=u(51270),E=u.n(d),v=u(82867),M=u.n(v),p=new(M())({name:"children",enumerable:!0,collection:!0},{name:"parent"}),x=new(M())({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),T=new(M())({name:"attachers",collection:!0},{name:"host"}),c=new(M())({name:"outgoing",collection:!0},{name:"source"}),a=new(M())({name:"incoming",collection:!0},{name:"target"});function e(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(n){var l=this.label,_=this.labels;!n&&l?_.remove(l):_.add(n,0)}}),p.bind(this,"parent"),x.bind(this,"labels"),c.bind(this,"outgoing"),a.bind(this,"incoming")}function g(){e.call(this),p.bind(this,"children"),T.bind(this,"host"),T.bind(this,"attachers")}E()(g,e);function t(){g.call(this)}E()(t,g);function o(){g.call(this),x.bind(this,"labelTarget")}E()(o,g);function r(){e.call(this),c.bind(this,"source"),a.bind(this,"target")}E()(r,e);var y={connection:r,shape:g,label:o,root:t};function m(n,l){var _=y[n];if(!_)throw new Error("unknown type: <"+n+">");return(0,h.assign)(new _,l)}},64916:(X,K,u)=>{u.d(K,{A:()=>T});var h=u(46837),L=u(200),d=u(56764),E=u(52687),v=u(86439),M=15;function p(c,a){var e;c.on("element.mousedown",500,function(r){return o(r.originalEvent)});function g(r){var y=e.start,m=(0,v.gK)(r),n=(0,d.p)(m,y);if(!e.dragging&&x(n)>M&&(e.dragging=!0,(0,L.a)(c),(0,h.hZ)("grab")),e.dragging){var l=e.last||e.start;n=(0,d.p)(m,l),a.scroll({dx:n.x,dy:n.y}),e.last=m}r.preventDefault()}function t(r){E.event.unbind(document,"mousemove",g),E.event.unbind(document,"mouseup",t),e=null,(0,h.wC)()}function o(r){if(!(0,E.closest)(r.target,".djs-draggable")&&!(r.button||r.ctrlKey||r.shiftKey||r.altKey))return e={start:(0,v.gK)(r)},E.event.bind(document,"mousemove",g),E.event.bind(document,"mouseup",t),!0}}p.$inject=["eventBus","canvas"];function x(c){return Math.sqrt(Math.pow(c.x,2)+Math.pow(c.y,2))}const T={__init__:["moveCanvas"],moveCanvas:["type",p]}},32959:(X,K,u)=>{u.d(K,{A:()=>m});var h=u(69380),L=u(98218),d=u(52687),E=u(66716),v=u.n(E),M=u(86439),p=.2,x=4,T=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function c(){}function a(n,l){return l.get(n,!1)}function e(n){n.preventDefault(),n.stopPropagation(),typeof n.stopImmediatePropagation=="function"&&n.stopImmediatePropagation()}function g(n){function l(H){(0,L.forEach)(T,function(V){d.event.bind(n,V,e,!0)})}function _(H){setTimeout(function(){(0,L.forEach)(T,function(V){d.event.unbind(n,V,e,!0)})},500)}d.event.bind(n,"touchstart",l,!0),d.event.bind(n,"touchend",_,!0),d.event.bind(n,"touchcancel",_,!0);var S=new(v()).Manager(n,{inputClass:v().TouchInput,recognizers:[]}),D=new(v()).Tap,b=new(v()).Pan({threshold:10}),I=new(v()).Press,U=new(v()).Pinch,F=new(v()).Tap({event:"doubletap",taps:2});return U.requireFailure(b),U.requireFailure(I),S.add([b,I,U,F,D]),S.reset=function(H){var V=this.recognizers,z=this.session;z.stopped||(S.stop(H),setTimeout(function(){var k,N;for(k=0;N=V[k];k++)N.reset(),N.state=8;z.curRecognizer=null},0))},S.on("hammer.input",function(H){H.srcEvent.defaultPrevented&&S.reset(!0)}),S}function t(n,l,_,S,D){var b=a("dragging",n),I=a("move",n),U=a("contextPad",n),F=a("palette",n),H;function V(N){return function(P){D.fire(N,P)}}function z(N){var P=(0,d.closest)(N,"svg, .djs-element",!0);return P}function k(N){H=g(N),H.on("doubletap",V("element.dblclick")),H.on("tap",V("element.click"));function P(O){var f=0,A=0;function w(G){var $=G.deltaX-f,J=G.deltaY-A;l.scroll({dx:$,dy:J}),f=G.deltaX,A=G.deltaY}function W(G){H.off("panmove",w),H.off("panend",W),H.off("pancancel",W)}H.on("panmove",w),H.on("panend",W),H.on("pancancel",W)}function i(O){var f=z(O.target),A=f&&S.get(f);if(I&&l.getRootElement()!==A)return I.start(O,A,!0);P(O)}function s(O){var f=l.zoom(),A=O.center;function w(G){var $=1-(1-G.scale)/1.5,J=Math.max(p,Math.min(x,$*f));l.zoom(J,A),e(G)}function W(G){H.off("pinchmove",w),H.off("pinchend",W),H.off("pinchcancel",W),H.reset(!0)}H.on("pinchmove",w),H.on("pinchend",W),H.on("pinchcancel",W)}H.on("panstart",i),H.on("press",i),H.on("pinchstart",s)}b&&_.on("drag.move",function(N){var P=N.originalEvent;if(!(!P||P instanceof MouseEvent)){var i=(0,M.gK)(P),s=document.elementFromPoint(i.x,i.y),O=z(s),f=O&&S.get(O);f!==N.hover&&(N.hover&&b.out(N),f&&(b.hover({element:f,gfx:O}),N.hover=f,N.hoverGfx=O))}}),U&&_.on("contextPad.create",function(N){var P=N.pad.html,i=g(P);i.on("panstart",function(s){U.trigger("dragstart",s,!0)}),i.on("press",function(s){U.trigger("dragstart",s,!0)}),i.on("tap",function(s){U.trigger("click",s)})}),F&&_.on("palette.create",function(N){var P=N.container,i=g(P);i.on("panstart",function(s){F.trigger("dragstart",s,!0)}),i.on("press",function(s){F.trigger("dragstart",s,!0)}),i.on("tap",function(s){F.trigger("click",s)})}),_.on("canvas.init",function(N){k(N.svg)})}t.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"];var o=u(33225);function r(n,l){var _=this;l.on("canvas.init",function(S){_.addBBoxMarker(S.svg)})}r.$inject=["canvas","eventBus"],r.prototype.addBBoxMarker=function(n){var l={fill:"none",class:"outer-bound-marker"},_=(0,o.vt)("rect");(0,o.CF)(_,{x:-1e4,y:1e4,width:10,height:10}),(0,o.CF)(_,l),(0,o.BC)(n,_);var S=(0,o.vt)("rect");(0,o.CF)(S,{x:1e4,y:1e4,width:10,height:10}),(0,o.CF)(S,l),(0,o.BC)(n,S)};const m={__depends__:[{__depends__:[h.A],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",t],touchFix:["type",r]}]}},436:(X,K,u)=>{u.d(K,{A:()=>e});var h=u(52687),L=u.n(h),d=u(56165),E=u(55817),v=u(98218),M=u.n(v),p=Math.sign||function(g){return g>=0?1:-1},x={min:.2,max:4},T=10,c=.1,a=.75;function e(g,t,o){g=g||{},this._enabled=!1,this._canvas=o,this._container=o._container,this._handleWheel=(0,v.bind)(this._handleWheel,this),this._totalDelta=0,this._scale=g.scale||a;var r=this;t.on("canvas.init",function(y){r._init(g.enabled!==!1)})}e.$inject=["config.zoomScroll","eventBus","canvas"],e.prototype.scroll=function(t){this._canvas.scroll(t)},e.prototype.reset=function(){this._canvas.zoom("fit-viewport")},e.prototype.zoom=function(t,o){var r=(0,d.U)(x,T*2);this._totalDelta+=t,Math.abs(this._totalDelta)>c&&(this._zoom(t,o,r),this._totalDelta=0)},e.prototype._handleWheel=function(t){if(!(0,h.closest)(t.target,".djs-scrollable",!0)){var o=this._container;t.preventDefault();var r=t.ctrlKey,y=t.shiftKey,m=-1*this._scale,n;if(r?m*=t.deltaMode===0?.02:.32:m*=t.deltaMode===0?1:16,r){var l=o.getBoundingClientRect(),_={x:t.clientX-l.left,y:t.clientY-l.top};n=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*p(t.deltaY)*m,this.zoom(n,_)}else y?n={dx:m*t.deltaY,dy:0}:n={dx:m*t.deltaX,dy:m*t.deltaY},this.scroll(n)}},e.prototype.stepZoom=function(t,o){var r=(0,d.U)(x,T);this._zoom(t,o,r)},e.prototype._zoom=function(g,t,o){var r=this._canvas,y=g>0?1:-1,m=(0,E.Y)(r.zoom()),n=Math.round(m/o)*o;n+=o*y;var l=Math.pow(10,n);r.zoom((0,d.N)(x,l),t)},e.prototype.toggle=function(t){var o=this._container,r=this._handleWheel,y=this._enabled;return typeof t>"u"&&(t=!y),y!==t&&h.event[t?"bind":"unbind"](o,"wheel",r,!1),this._enabled=t,t},e.prototype._init=function(g){this.toggle(g)}},56165:(X,K,u)=>{u.d(K,{N:()=>d,U:()=>L});var h=u(55817);function L(E,v){var M=(0,h.Y)(E.min),p=(0,h.Y)(E.max),x=Math.abs(M)+Math.abs(p);return x/v}function d(E,v){return Math.max(E.min,Math.min(E.max,v))}},81284:(X,K,u)=>{u.d(K,{A:()=>L});var h=u(436);const L={__init__:["zoomScroll"],zoomScroll:["type",h.A]}},200:(X,K,u)=>{u.d(K,{a:()=>L});var h=5e3;function L(d,E){E=E||"element.click";function v(){return!1}return d.once(E,h,v),function(){d.off(E,v)}}},46837:(X,K,u)=>{u.d(K,{hZ:()=>E,wC:()=>v});var h=u(52687),L=u.n(h),d=/^djs-cursor-.*$/;function E(p){var x=(0,h.classes)(document.body);x.removeMatching(d),p&&x.add("djs-cursor-"+p)}function v(){E(null)}function M(p){var x=domClasses(document.body);return x.has("djs-cursor-"+p)}},86439:(X,K,u)=>{u.d(K,{AF:()=>L,dG:()=>d,gK:()=>E});function h(v){!v||typeof v.stopPropagation!="function"||v.stopPropagation()}function L(v){return v.originalEvent||v.srcEvent}function d(v,M){h(v,M),h(L(v),M)}function E(v){return v.pointers&&v.pointers.length&&(v=v.pointers[0]),v.touches&&v.touches.length&&(v=v.touches[0]),v?{x:v.clientX,y:v.clientY}:null}},50941:(X,K,u)=>{u.d(K,{A:()=>h});function h(L){this._counter=0,this._prefix=(L?L+"-":"")+Math.floor(Math.random()*1e9)+"-"}h.prototype.next=function(){return this._prefix+ ++this._counter}},55817:(X,K,u)=>{u.d(K,{Y:()=>h});function h(L){return Math.log(L)/Math.log(10)}},60053:(X,K,u)=>{u.d(K,{Io:()=>E,KH:()=>v,ls:()=>d});var h=u(86439);function L(){return/mac/i.test(navigator.platform)}function d(M){return!((0,h.AF)(M)||M).button}function E(M){var p=(0,h.AF)(M)||M;return d(M)?L()?p.metaKey:p.ctrlKey:!1}function v(M){var p=(0,h.AF)(M)||M;return d(M)&&p.shiftKey}},91799:(X,K,u)=>{u.d(K,{l:()=>h});function h(L,d){if(typeof d!="function")throw new Error("removeFn iterator must be a function");if(L){for(var E;E=L[0];)d(E);return L}}},44156:(X,K,u)=>{u.d(K,{A:()=>t});var h=u(98218),L=u.n(h),d=u(33225),E=0,v={width:150,height:50};function M(r){var y=r.split("-");return{horizontal:y[0]||"center",vertical:y[1]||"top"}}function p(r){return(0,h.isObject)(r)?(0,h.assign)({top:0,left:0,right:0,bottom:0},r):{top:r,left:r,right:r,bottom:r}}function x(r,y){y.textContent=r;var m;try{var n,l=r==="";return y.textContent=l?"dummy":r,m=y.getBBox(),n={width:m.width+m.x*2,height:m.height},l&&(n.width=0),n}catch{return{width:0,height:0}}}function T(r,y,m){for(var n=r.shift(),l=n,_;;){if(_=x(l,m),_.width=l?_.width:0,l===" "||l===""||Math.round(_.width)<=Math.round(y)||l.length<2)return c(r,l,n,_);l=e(l,_.width,y)}}function c(r,y,m,n){if(y.length<m.length){var l=m.slice(y.length).trim();r.unshift(l)}return{width:n.width,height:n.height,text:y}}function a(r,y){var m=r.split(/(\s|-)/g),n,l=[],_=0;if(m.length>1)for(;n=m.shift();)if(n.length+_<y)l.push(n),_+=n.length;else{n==="-"&&l.pop();break}return l.join("")}function e(r,y,m){var n=Math.max(r.length*(m/y),1),l=a(r,n);return l||(l=r.slice(0,Math.max(Math.round(n-1),1))),l}function g(){var r=document.getElementById("helper-svg");return r||(r=(0,d.vt)("svg"),(0,d.CF)(r,{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(r)),r}function t(r){this._config=(0,h.assign)({},{size:v,padding:E,style:{},align:"center-top"},r||{})}t.prototype.createText=function(r,y){return this.layoutText(r,y).element},t.prototype.getDimensions=function(r,y){return this.layoutText(r,y).dimensions},t.prototype.layoutText=function(r,y){var m=(0,h.assign)({},this._config.size,y.box),n=(0,h.assign)({},this._config.style,y.style),l=M(y.align||this._config.align),_=p(y.padding!==void 0?y.padding:this._config.padding),S=y.fitBox||!1,D=o(n),b=r.split(/\r?\n/g),I=[],U=m.width-_.left-_.right,F=(0,d.vt)("text");(0,d.CF)(F,{x:0,y:0}),(0,d.CF)(F,n);var H=g();for((0,d.BC)(H,F);b.length;)I.push(T(b,U,F));l.vertical==="middle"&&(_.top=_.bottom=0);var V=(0,h.reduce)(I,function(i,s,O){return i+(D||s.height)},0)+_.top+_.bottom,z=(0,h.reduce)(I,function(i,s,O){return s.width>i?s.width:i},0),k=_.top;l.vertical==="middle"&&(k+=(m.height-V)/2),k-=(D||I[0].height)/4;var N=(0,d.vt)("text");(0,d.CF)(N,n),(0,h.forEach)(I,function(i){var s;switch(k+=D||i.height,l.horizontal){case"left":s=_.left;break;case"right":s=(S?z:U)-_.right-i.width;break;default:s=Math.max(((S?z:U)-i.width)/2+_.left,0)}var O=(0,d.vt)("tspan");(0,d.CF)(O,{x:s,y:k}),O.textContent=i.text,(0,d.BC)(N,O)}),(0,d.TF)(F);var P={width:z,height:V};return{dimensions:P,element:N}};function o(r){if("fontSize"in r&&"lineHeight"in r)return r.lineHeight*parseInt(r.fontSize,10)}},73308:(X,K,u)=>{u.d(K,{A:()=>L});function h(d,E,v,M,p,x,T){try{var c=d[x](T),a=c.value}catch(e){v(e);return}c.done?E(a):Promise.resolve(a).then(M,p)}function L(d){return function(){var E=this,v=arguments;return new Promise(function(M,p){var x=d.apply(E,v);function T(a){h(x,M,p,T,c,"next",a)}function c(a){h(x,M,p,T,c,"throw",a)}T(void 0)})}}}}]);
